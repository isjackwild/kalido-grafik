!function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=n[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return r(n?n:t)},h,h.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.SHAPE_COUNT=4,n.SHAPE_COUNT_MOB=1,n.WALL_RESTITUTION=1,n.BODY_RESTITUTION=1,n.BODY_FRICTION=.04,n.BODY_AIR_FRICTION=.04,n.BODY_BASE_MASS=3.5,n.BODY_RAND_MASS=3.5,n.WALL_THICKNESS=1,n.SHAPE_RADIUS=40,n.GRAVITY_STRENGTH=.06,n.OWN_GRAVITY_STRENGTH=6e-4,n.CLICK_STRENGTH=.3,n.MAX_VELOCITY=8,n.MAX_ANGULAR_VELOCITY=20,n.BODY_COLLISSION_FORCE=.068,n.BODY_COLLISSION_FORCE_SMALL=.055,n.COLOUR_CHANGE_SPEED=8,n.EXAMPLE_SVG='\n\t\t<svg width="335px" height="240px" viewBox="0 0 335 240" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n\t\t        <path d="M85.4257812,92.046875 C-15.1289063,113.355469 2.578125,195.035156 2.578125,195.035156 C2.578125,195.035156 276.523438,244.179688 276.523438,238.851563 C276.523438,233.523438 333.058594,158.125 263.25,165.875 C193.441406,173.625 98.8359375,210.847656 122.023437,172.351562 C145.210937,133.855469 317.257813,133.8125 317.257813,133.8125 C317.257813,133.8125 368.269531,-1.2890625 294.007813,8.9296875 C219.746094,19.1484375 81.1367187,-20.3828125 81.1367187,19.0898438 C81.1367187,58.5625 185.980469,70.7382813 85.4257812,92.046875 Z" id="Path" stroke="#979797" fill="#A94A4A"></path>\n\t\t    </g>\n\t\t</svg>\n\t'},{}],2:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}var r=t("./kalidoscope"),s=i(r),o=t("lodash"),a=i(o),u=void 0,l=function(){u=(0,s["default"])(),u.init(),window.kalido=u,window.addEventListener("resize",a["default"].debounce(h,333))},h=function(){u.onResize()};document.addEventListener("DOMContentLoaded",l)},{"./kalidoscope":3,lodash:7}],3:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t){for(var e=t.length;e;e--){var n=Math.floor(Math.random()*e),i=[t[n],t[e-1]];t[e-1]=i[0],t[n]=i[1]}}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},a=t("matter-js"),u=t("victor"),l=i(u);t("gsap");var h=t("lodash"),c=i(h),f=t("./lib/colour.js"),d=t("./CONSTANTS.js"),p=t("paper");p.install(window);var _=function(){var t=void 0,e=void 0,n=0,i=1,u=!1,h=[],_=[],g=[[],[],[],[]],v=[],m=void 0,y=void 0,x=void 0,b=document.getElementsByClassName("interactive-background")[0];p.setup(b);var w=b.dataset.colors?b.dataset.colors.split(","):null;w.pop(),s(w);var S=window.innerWidth<=375?d.BODY_COLLISSION_FORCE_SMALL:d.BODY_COLLISSION_FORCE,C=document.getElementsByClassName("interactive-background__custom-svg")[0],T=C.getElementsByTagName("svg")[0];project.currentStyle={strokeColor:"#000000",fillColor:w&&w.length?w[w.length-1]:"#000000",strokeWidth:0,opacity:.5};var P={isStatic:!0,restitution:d.WALL_RESTITUTION},A={restitution:d.BODY_RESTITUTION,friction:d.BODY_FRICTION,frictionAir:d.BODY_AIR_FRICTION,frictionStatic:0,density:.001},k=function(){var t=void 0;t=window.innerWidth<=414?b.dataset.shapeRadiusMob?parseInt(b.dataset.shapeRadiusMob)||d.SHAPE_RADIUS:d.SHAPE_RADIUS:b.dataset.shapeRadius?parseInt(b.dataset.shapeRadius)||d.SHAPE_RADIUS:d.SHAPE_RADIUS,w&&w.length&&(x=(0,f.hexToRgb)(w[w.length-1])),m=a.Engine.create(),h=[a.Bodies.rectangle(window.innerWidth*-.25,window.innerHeight*-.5-.5*d.WALL_THICKNESS,.5*window.innerWidth,d.WALL_THICKNESS,P),a.Bodies.rectangle(window.innerWidth*-.25,.5*d.WALL_THICKNESS,.5*window.innerWidth,d.WALL_THICKNESS,P),a.Bodies.rectangle(window.innerWidth*-.5-.5*d.WALL_THICKNESS,window.innerHeight*-.25,d.WALL_THICKNESS,.5*window.innerHeight,P),a.Bodies.rectangle(.5*d.WALL_THICKNESS,window.innerHeight*-.25,d.WALL_THICKNESS,.5*window.innerHeight,P)],h[0].hitForce=new l["default"](0,1),h[1].hitForce=new l["default"](0,(-1)),h[2].hitForce=new l["default"](1,0),h[3].hitForce=new l["default"]((-1),0),h.forEach(function(t){return t.label="wall"});for(var i=Math.sqrt(window.innerWidth*window.innerWidth+window.innerHeight*window.innerHeight)/2*.8,s=function(){return 3}(),c=0;c<s;c++){var p=(i-t)/s*c+2*t,v=new l["default"]((-1),(-1)).normalize().rotateByDeg(45).multiply(new l["default"](p*-1,p*-1));v.y<window.innerHeight*-1+t&&(v.y=window.innerHeight*-1+t+10),v.x<window.innerWidth*-1+t&&(v.x=window.innerWidth*-1+t+10);var S=(c+.5)/(s+1),C=(.5*window.innerHeight-2*t,.5*window.innerWidth-2*t);v.y=-1*S*(window.innerHeight/2)-.5*t,v.x=-1*(Math.random()*C)-t;var k=a.Bodies.circle(v.x,v.y,t,A);k.velocity=new l["default"](0,0),k.position=new l["default"](v.x,v.y),k.label="shape",k.gravity={x:0,y:0},k.gravitySpeed={x:.008*Math.random()+.005,y:.008*Math.random()+.005},a.Body.setMass(k,Math.random()*d.BODY_RAND_MASS+d.BODY_BASE_MASS),_.push(k)}var M=function(e,n){if(!T)return new Path.Circle(view.center.clone().add(e),t);var i=project.importSVG(T);return i.strokeWidth=0,i.bounds.width=1.8*t,i.bounds.height=1.8*t,i.scale(n.x,n.y),i};_.forEach(function(t){var e=new Point(t.position.x,t.position.y),n=M(e,{x:1,y:1});n.opacity=0,g[0].push(n);var i=new Point(t.position.x*-1,t.position.y),r=M(i,{x:-1,y:1});r.opacity=0,g[1].push(r);var s=new Point(t.position.x*-1,t.position.y*-1),o=M(s,{x:-1,y:-1});o.opacity=0,g[2].push(o);var a=new Point(t.position.x,t.position.y*-1),u=M(a,{x:1,y:-1});u.opacity=0,g[3].push(u)});var O=[].concat(r(h),r(_));e=(new Date).getTime(),n=5e3*Math.random(),a.World.add(m.world,O),a.Engine.run(m),a.Events.on(m,"afterUpdate",D),a.Events.on(m,"beforeUpdate",z),a.Events.on(m,"collisionStart",L),window.addEventListener("mousedown",E),window.addEventListener("touchstart",E),w&&w.length&&(y=new TimelineLite({onComplete:function(){return y.restart()}}),w.forEach(function(t){y.to(x,d.COLOUR_CHANGE_SPEED,o({},(0,f.hexToRgb)(t),{ease:Power0.easeNone,onUpdate:B}))})),I(),u=!0},M=function(){u&&(u=!1,a.Engine.clear(m),a.Events.off(m,"afterUpdate",D),a.Events.off(m,"beforeUpdate",z),a.Events.off(m,"collisionStart",L),y&&y.kill(),m=void 0,t=void 0,project.activeLayer.removeChildren(),window.removeEventListener("mousedown",E),window.removeEventListener("touchstart",E),h=[],_=[],g=[[],[],[],[]],n=0)},O=function(){b.width=window.innerWidth,b.height=window.innerHeight,b.style.height=window.innerHeight+"px",b.style.width=window.innerWidth+"px",view.size.set(window.innerWidth,window.innerHeight),view.viewSize.set(window.innerWidth,window.innerHeight),S=window.innerWidth<=375?d.BODY_COLLISSION_FORCE_SMALL:d.BODY_COLLISSION_FORCE,M(),requestAnimationFrame(function(){k()})},I=function(){g.forEach(function(t){return TweenMax.staggerTo(t,.33,{opacity:1,ease:Sine.easeInOut},.15)})},R=function(){g.forEach(function(t){return TweenMax.staggerTo(t,.33,{opacity:0,ease:Sine.easeInOut},.15)})},B=function(){var t="rgb("+Math.floor(x.r)+", "+Math.floor(x.g)+", "+Math.floor(x.b)+")";c["default"].flattenDeep(g).forEach(function(e){return e.fillColor=t})},E=function(t){var e=t.touches?t.touches[0].clientX:t.clientX,n=t.touches?t.touches[0].clientY:t.clientY;e-=.5*window.innerWidth,n-=.5*window.innerHeight,e>0&&(e*=-1),n>0&&(n*=-1);new l["default"](e,n);_.forEach(function(t){var i=new l["default"](e,n),r=i.distance(new l["default"](t.position.x,t.position.y)),s=(1-r/Math.min(.3*window.innerWidth,.3*window.innerHeight))*d.CLICK_STRENGTH;s=Math.max(s,0);var o=new l["default"](t.position.x-i.x,t.position.y-i.y).norm().multiply(new l["default"](s,s));a.Body.applyForce(t,i,o)})},z=function(){v.forEach(function(t){if("wall"===t.bodyA.label)a.Body.applyForce(t.bodyB,t.bodyB.position.clone().subtract(t.bodyA.hitForce),t.bodyA.hitForce.clone().multiply(new l["default"](S,S)));else if("wall"===t.bodyB.label)a.Body.applyForce(t.bodyA,t.bodyA.position.clone().subtract(t.bodyB.hitForce),t.bodyB.hitForce.clone().multiply(new l["default"](S,S)));else{var e=new l["default"](t.bodyA.position.x-t.bodyB.position.x,t.bodyA.position.y-t.bodyB.position.y).norm().multiply(new l["default"](S,S));a.Body.applyForce(t.bodyA,t.bodyB.position,e);var n=new l["default"](t.bodyB.position.x-t.bodyA.position.x,t.bodyB.position.y-t.bodyA.position.y).norm().multiply(new l["default"](S,S));a.Body.applyForce(t.bodyB,t.bodyA.position,n)}}),v=[]},L=function(t){var e=t.pairs;e.forEach(function(t){v.push(t)})},D=function(){t&&(i=(e-t)/16.666),t=e,e=(new Date).getTime(),n+=i,m.world.gravity.x=Math.cos(.006*n)*d.GRAVITY_STRENGTH,m.world.gravity.y=Math.cos(.01*n)*d.GRAVITY_STRENGTH,_.forEach(function(t,e){t.gravity.x=Math.cos((n+123*e)*t.gravitySpeed.x)*d.OWN_GRAVITY_STRENGTH,t.gravity.y=Math.cos((n+123*e)*t.gravitySpeed.y)*d.OWN_GRAVITY_STRENGTH,a.Body.applyForce(t,t.position,t.gravity),t.velocity.length()>d.MAX_VELOCITY&&a.Body.setVelocity(t,t.velocity.normalize().multiply({x:d.MAX_VELOCITY,y:d.MAX_VELOCITY})),t.angularVelocity>d.MAX_ANGULAR_VELOCITY&&a.Body.setAngularVelocity(t,d.MAX_ANGULAR_VELOCITY);var i=new Point(t.position.x,t.position.y);g[0][e].position=view.center.clone().add(i),g[0][e].rotation=t.angle;var r=new Point(t.position.x*-1,t.position.y);g[1][e].position=view.center.clone().add(r),g[1][e].rotation=t.angle*-1;var s=new Point(t.position.x*-1,t.position.y*-1);g[2][e].position=view.center.clone().add(s),g[2][e].rotation=t.angle;var o=new Point(t.position.x,t.position.y*-1);g[3][e].position=view.center.clone().add(o),g[3][e].rotation=t.angle*-1})};return{init:k,onResize:O,show:I,hide:R}};n["default"]=_},{"./CONSTANTS.js":1,"./lib/colour.js":4,gsap:6,lodash:7,"matter-js":8,paper:9,victor:10}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=(n.lerpRGBColour=function(t,e,n){var i=Math.ceil(e.r+(n.r-e.r)*t),r=Math.ceil(e.g+(n.g-e.g)*t),s=Math.ceil(e.b+(n.b-e.b)*t);return{r:i,g:r,b:s}},n.HSVtoRGB=function(t,e,n,i){var r,s,o,a,u,l,h,c,f;switch(null===i&&(i=!1),t&&void 0===e&&void 0===n&&(e=t.s,n=t.v,t=t.h),a=Math.floor(6*t),s=6*t-a,u=n*(1-e),l=n*(1-s*e),f=n*(1-(1-s)*e),a%6){case 0:h=n,o=f,r=u;break;case 1:h=l,o=n,r=u;break;case 2:h=u,o=n,r=f;break;case 3:h=u,o=l,r=n;break;case 4:h=f,o=u,r=n;break;case 5:h=n,o=u,r=l}return c={r:Math.floor(255*h),g:Math.floor(255*o),b:Math.floor(255*r)},i===!1?c:(h=h.toString(16),o=o.toString(16),r=r.toString(16),1===h.length&&(h="0"+h),1===o.length&&(o="0"+o),1===r.length&&(r="0"+r),"#"+h+o+r)},n.componentToHex=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e});n.rgbToHex=function(t,e,n){return"object"===("undefined"==typeof t?"undefined":i(t))&&(e=t.g,n=t.b,t=t.r),t/=255,e/=255,n/=255,"#"+r(t)+r(e)+r(n)},n.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},{}],5:[function(t,e,n){},{}],6:[function(t,e,n){(function(t){var n="undefined"!=typeof e&&e.exports&&"undefined"!=typeof t?t:this||window;(n._gsQueue||(n._gsQueue=[])).push(function(){"use strict";n._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,n){var i=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},r=function(t,e,n){var i,r,s=t.cycle;for(i in s)r=s[i],t[i]="function"==typeof r?r(n,e[n]):r[n%r.length];delete t.cycle},s=function(t,e,i){n.call(this,t,e,i),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=s.prototype.render},o=1e-10,a=n._internals,u=a.isSelector,l=a.isArray,h=s.prototype=n.to({},.1,{}),c=[];s.version="1.19.1",h.constructor=s,h.kill()._gc=!1,s.killTweensOf=s.killDelayedCallsTo=n.killTweensOf,s.getTweensOf=n.getTweensOf,s.lagSmoothing=n.lagSmoothing,s.ticker=n.ticker,s.render=n.render,h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},h.updateTo=function(t,e){var i,r=this.ratio,s=this.vars.immediateRender||t.immediateRender;e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(i in t)this.vars[i]=t[i];if(this._initted||s)if(e)this._initted=!1,s&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||s)for(var a,u=1/(1-r),l=this._firstPT;l;)a=l.s+l.c,l.c*=u,l.s=a-l.c,l=l._next;return this},h.render=function(t,e,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,r,s,u,l,h,c,f,d=this._dirty?this.totalDuration():this._totalDuration,p=this._time,_=this._totalTime,g=this._cycle,v=this._duration,m=this._rawPrevTime;if(t>=d-1e-7&&t>=0?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(m<0||t<=0&&t>=-1e-7||m===o&&"isPause"!==this.data)&&m!==t&&(n=!0,m>o&&(r="onReverseComplete")),this._rawPrevTime=f=!e||t||m===t?t:o)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==_||0===v&&m>0)&&(r="onReverseComplete",i=this._reversed),t<0&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||n)&&(m>=0&&(n=!0),this._rawPrevTime=f=!e||t||m===t?t:o)),this._initted||(n=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(u=v+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&_<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=v-this._time),this._time>v?this._time=v:this._time<0&&(this._time=0)),this._easeType?(l=this._time/v,h=this._easeType,c=this._easePower,(1===h||3===h&&l>=.5)&&(l=1-l),3===h&&(l*=2),1===c?l*=l:2===c?l*=l*l:3===c?l*=l*l*l:4===c&&(l*=l*l*l*l),1===h?this.ratio=1-l:2===h?this.ratio=l:this._time/v<.5?this.ratio=l/2:this.ratio=1-l/2):this.ratio=this._ease.getRatio(this._time/v)),p===this._time&&!n&&g===this._cycle)return void(_!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=p,this._totalTime=_,this._rawPrevTime=m,this._cycle=g,a.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/v):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==p&&t>=0&&(this._active=!0),0===_&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,e,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==v||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,n),e||(this._totalTime!==_||r)&&this._callback("onUpdate")),this._cycle!==g&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===v&&this._rawPrevTime===o&&f!==o&&(this._rawPrevTime=0)))},s.to=function(t,e,n){return new s(t,e,n)},s.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new s(t,e,n)},s.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new s(t,e,i)},s.staggerTo=s.allTo=function(t,e,o,a,h,f,d){a=a||0;var p,_,g,v,m=0,y=[],x=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),h.apply(d||o.callbackScope||this,f||c)},b=o.cycle,w=o.startAt&&o.startAt.cycle;for(l(t)||("string"==typeof t&&(t=n.selector(t)||t),u(t)&&(t=i(t))),t=t||[],a<0&&(t=i(t),t.reverse(),a*=-1),p=t.length-1,g=0;g<=p;g++){_={};for(v in o)_[v]=o[v];if(b&&(r(_,t,g),null!=_.duration&&(e=_.duration,delete _.duration)),w){w=_.startAt={};for(v in o.startAt)w[v]=o.startAt[v];r(_.startAt,t,g)}_.delay=m+(_.delay||0),g===p&&h&&(_.onComplete=x),y[g]=new s(t[g],e,_),m+=a}return y},s.staggerFrom=s.allFrom=function(t,e,n,i,r,o,a){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,s.staggerTo(t,e,n,i,r,o,a)},s.staggerFromTo=s.allFromTo=function(t,e,n,i,r,o,a,u){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,s.staggerTo(t,e,i,r,o,a,u)},s.delayedCall=function(t,e,n,i,r){return new s(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,useFrames:r,overwrite:0})},s.set=function(t,e){return new s(t,0,e)},s.isTweening=function(t){return n.getTweensOf(t,!0).length>0};var f=function(t,e){for(var i=[],r=0,s=t._first;s;)s instanceof n?i[r++]=s:(e&&(i[r++]=s),i=i.concat(f(s,e)),r=i.length),s=s._next;return i},d=s.getAllTweens=function(e){return f(t._rootTimeline,e).concat(f(t._rootFramesTimeline,e))};s.killAll=function(t,n,i,r){null==n&&(n=!0),null==i&&(i=!0);var s,o,a,u=d(0!=r),l=u.length,h=n&&i&&r;for(a=0;a<l;a++)o=u[a],(h||o instanceof e||(s=o.target===o.vars.onComplete)&&i||n&&!s)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},s.killChildTweensOf=function(t,e){if(null!=t){var r,o,h,c,f,d=a.tweenLookup;if("string"==typeof t&&(t=n.selector(t)||t),u(t)&&(t=i(t)),l(t))for(c=t.length;--c>-1;)s.killChildTweensOf(t[c],e);else{r=[];for(h in d)for(o=d[h].target.parentNode;o;)o===t&&(r=r.concat(d[h].tweens)),o=o.parentNode;for(f=r.length,c=0;c<f;c++)e&&r[c].totalTime(r[c].totalDuration()),r[c]._enabled(!1,!1)}}};var p=function(t,n,i,r){n=n!==!1,i=i!==!1,r=r!==!1;for(var s,o,a=d(r),u=n&&i&&r,l=a.length;--l>-1;)o=a[l],(u||o instanceof e||(s=o.target===o.vars.onComplete)&&i||n&&!s)&&o.paused(t)};return s.pauseAll=function(t,e,n){p(!0,t,e,n)},s.resumeAll=function(t,e,n){p(!1,t,e,n)},s.globalTimeScale=function(e){var i=t._rootTimeline,r=n.ticker.time;return arguments.length?(e=e||o,i._startTime=r-(r-i._startTime)*i._timeScale/e,i=t._rootFramesTimeline,r=n.ticker.frame,i._startTime=r-(r-i._startTime)*i._timeScale/e,i._timeScale=t._rootTimeline._timeScale=e,e):i._timeScale},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?this._repeat===-1?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s},!0),n._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n,i,r=this.vars;for(i in r)n=r[i],l(n)&&n.join("").indexOf("{self}")!==-1&&(r[i]=this._swapSelfInParams(n));l(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},s=1e-10,o=i._internals,a=r._internals={},u=o.isSelector,l=o.isArray,h=o.lazyTweens,c=o.lazyRender,f=n._gsDefine.globals,d=function(t){var e,n={};for(e in t)n[e]=t[e];return n},p=function(t,e,n){var i,r,s=t.cycle;for(i in s)r=s[i],t[i]="function"==typeof r?r(n,e[n]):r[n%r.length];delete t.cycle},_=a.pauseCallback=function(){},g=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},v=r.prototype=new e;return r.version="1.19.1",v.constructor=r,v.kill()._gc=v._forcingPlayhead=v._hasPause=!1,v.to=function(t,e,n,r){var s=n.repeat&&f.TweenMax||i;return e?this.add(new s(t,e,n),r):this.set(t,n,r)},v.from=function(t,e,n,r){return this.add((n.repeat&&f.TweenMax||i).from(t,e,n),r)},v.fromTo=function(t,e,n,r,s){var o=r.repeat&&f.TweenMax||i;return e?this.add(o.fromTo(t,e,n,r),s):this.set(t,r,s)},v.staggerTo=function(t,e,n,s,o,a,l,h){var c,f,_=new r({onComplete:a,onCompleteParams:l,callbackScope:h,smoothChildTiming:this.smoothChildTiming}),v=n.cycle;for("string"==typeof t&&(t=i.selector(t)||t),t=t||[],u(t)&&(t=g(t)),s=s||0,s<0&&(t=g(t),t.reverse(),s*=-1),f=0;f<t.length;f++)c=d(n),c.startAt&&(c.startAt=d(c.startAt),c.startAt.cycle&&p(c.startAt,t,f)),v&&(p(c,t,f),null!=c.duration&&(e=c.duration,delete c.duration)),_.to(t[f],e,c,f*s);return this.add(_,o)},v.staggerFrom=function(t,e,n,i,r,s,o,a){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(t,e,n,i,r,s,o,a)},v.staggerFromTo=function(t,e,n,i,r,s,o,a,u){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,this.staggerTo(t,e,i,r,s,o,a,u)},v.call=function(t,e,n,r){return this.add(i.delayedCall(0,t,e,n),r)},v.set=function(t,e,n){return n=this._parseTimeOrLabel(n,0,!0),null==e.immediateRender&&(e.immediateRender=n===this._time&&!this._paused),this.add(new i(t,0,e),n)},r.exportRoot=function(t,e){t=t||{},null==t.smoothChildTiming&&(t.smoothChildTiming=!0);var n,s,o=new r(t),a=o._timeline;for(null==e&&(e=!0),a._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=a._time,n=a._first;n;)s=n._next,e&&n instanceof i&&n.target===n.vars.onComplete||o.add(n,n._startTime-n._delay),n=s;return a.add(o,0),o},v.add=function(n,s,o,a){var u,h,c,f,d,p;if("number"!=typeof s&&(s=this._parseTimeOrLabel(s,0,!0,n)),!(n instanceof t)){if(n instanceof Array||n&&n.push&&l(n)){for(o=o||"normal",a=a||0,u=s,h=n.length,c=0;c<h;c++)l(f=n[c])&&(f=new r({tweens:f})),this.add(f,u),"string"!=typeof f&&"function"!=typeof f&&("sequence"===o?u=f._startTime+f.totalDuration()/f._timeScale:"start"===o&&(f._startTime-=f.delay())),u+=a;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,s);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(e.prototype.add.call(this,n,s),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=this,p=d.rawTime()>n._startTime;d._timeline;)p&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),d=d._timeline;return this},v.remove=function(e){if(e instanceof t){this._remove(e,!1);var n=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:n._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},v._remove=function(t,n){e.prototype._remove.call(this,t,n);var i=this._last;return i?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},v.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},v.insert=v.insertMultiple=function(t,e,n,i){return this.add(t,e||0,n,i)},v.appendMultiple=function(t,e,n,i){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),n,i)},v.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},v.addPause=function(t,e,n,r){var s=i.delayedCall(0,_,n,r||this);return s.vars.onComplete=s.vars.onReverseComplete=e,s.data="isPause",this._hasPause=!0,this.add(s,t)},v.removeLabel=function(t){return delete this._labels[t],this},v.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},v._parseTimeOrLabel=function(e,n,i,r){var s;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(s=r.length;--s>-1;)r[s]instanceof t&&r[s].timeline===this&&this.remove(r[s]);if("string"==typeof n)return this._parseTimeOrLabel(n,i&&"number"==typeof e&&null==this._labels[n]?e-this.duration():0,i);if(n=n||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(s=e.indexOf("="),s===-1)return null==this._labels[e]?i?this._labels[e]=this.duration()+n:n:this._labels[e]+n;n=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,i):this.duration()}return Number(e)+n},v.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),e!==!1)},v.stop=function(){return this.paused(!0)},v.gotoAndPlay=function(t,e){return this.play(t,e)},v.gotoAndStop=function(t,e){return this.pause(t,e)},v.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,o,a,u,l,f,d=this._dirty?this.totalDuration():this._totalDuration,p=this._time,_=this._startTime,g=this._timeScale,v=this._paused;if(t>=d-1e-7&&t>=0)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",u=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===s)&&this._rawPrevTime!==t&&this._first&&(u=!0,this._rawPrevTime>s&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,t=d+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&this._rawPrevTime!==s&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(a="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(u=r=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(u=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,0===t&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,this._initted||(u=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=p)for(i=this._first;i&&i._startTime<=t&&!l;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(l=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!l;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(l=i),i=i._prev;l&&(this._time=t=l._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==p&&this._first||n||u||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),f=this._time,f>=p)for(i=this._first;i&&(o=i._next,f===this._time&&(!this._paused||v));)(i._active||i._startTime<=f&&!i._paused&&!i._gc)&&(l===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=o;else for(i=this._last;i&&(o=i._prev,f===this._time&&(!this._paused||v));){if(i._active||i._startTime<=p&&!i._paused&&!i._gc){if(l===i){for(l=i._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(t-l._startTime)*l._timeScale:(t-l._startTime)*l._timeScale,e,n),l=l._prev;l=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=o}this._onUpdate&&(e||(h.length&&c(),this._callback("onUpdate"))),a&&(this._gc||_!==this._startTime&&g===this._timeScale||(0===this._time||d>=this.totalDuration())&&(r&&(h.length&&c(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[a]&&this._callback(a)))}},v._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},v.getChildren=function(t,e,n,r){r=r||-9999999999;for(var s=[],o=this._first,a=0;o;)o._startTime<r||(o instanceof i?e!==!1&&(s[a++]=o):(n!==!1&&(s[a++]=o),t!==!1&&(s=s.concat(o.getChildren(!0,e,n)),a=s.length))),o=o._next;return s},v.getTweensOf=function(t,e){var n,r,s=this._gc,o=[],a=0;for(s&&this._enabled(!0,!0),n=i.getTweensOf(t),r=n.length;--r>-1;)(n[r].timeline===this||e&&this._contains(n[r]))&&(o[a++]=n[r]);return s&&this._enabled(!1,!0),o},v.recent=function(){return this._recent},v._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},v.shiftChildren=function(t,e,n){n=n||0;for(var i,r=this._first,s=this._labels;r;)r._startTime>=n&&(r._startTime+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return this._uncache(!0)},v._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var n=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),i=n.length,r=!1;--i>-1;)n[i]._kill(t,e)&&(r=!0);return r},v.clear=function(t){var e=this.getChildren(!1,!0,!0),n=e.length;for(this._time=this._totalTime=0;--n>-1;)e[n]._enabled(!1,!1);return t!==!1&&(this._labels={}),this._uncache(!0)},v.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},v._enabled=function(t,n){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return e.prototype._enabled.call(this,t,n)},v.totalTime=function(e,n,i){this._forcingPlayhead=!0;var r=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},v.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},v.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,n,i=0,r=this._last,s=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>s&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):s=r._startTime,r._startTime<0&&!r._paused&&(i-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),s=0),n=r._startTime+r._totalDuration/r._timeScale,n>i&&(i=n),r=e;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},v.paused=function(e){if(!e)for(var n=this._first,i=this._time;n;)n._startTime===i&&"isPause"===n.data&&(n._rawPrevTime=0),
n=n._next;return t.prototype.paused.apply(this,arguments)},v.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},v.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},r},!0),n._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},s=1e-10,o=e._internals,a=o.lazyTweens,u=o.lazyRender,l=n._gsDefine.globals,h=new i(null,null,1,0),c=r.prototype=new t;return c.constructor=r,c.kill()._gc=!1,r.version="1.19.1",c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},c.addCallback=function(t,n,i,r){return this.add(e.delayedCall(0,t,i,r),n)},c.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var n=this.getTweensOf(t,!1),i=n.length,r=this._parseTimeOrLabel(e);--i>-1;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},c.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},c.tweenTo=function(t,n){n=n||{};var i,r,s,o={ease:h,useFrames:this.usesFrames(),immediateRender:!1},a=n.repeat&&l.TweenMax||e;for(r in n)o[r]=n[r];return o.time=this._parseTimeOrLabel(t),i=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,s=new a(this,i,o),o.onStart=function(){s.target.paused(!0),s.vars.time!==s.target.time()&&i===s.duration()&&s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale),n.onStart&&n.onStart.apply(n.onStartScope||n.callbackScope||s,n.onStartParams||[])},s},c.tweenFromTo=function(t,e,n){n=n||{},t=this._parseTimeOrLabel(t),n.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},n.immediateRender=n.immediateRender!==!1;var i=this.tweenTo(e,n);return i.duration(Math.abs(i.vars.time-t)/this._timeScale||.001)},c.render=function(t,e,n){this._gc&&this._enabled(!0,!1);var i,r,o,l,h,c,f,d,p=this._dirty?this.totalDuration():this._totalDuration,_=this._duration,g=this._time,v=this._totalTime,m=this._startTime,y=this._timeScale,x=this._rawPrevTime,b=this._paused,w=this._cycle;if(t>=p-1e-7&&t>=0)this._locked||(this._totalTime=p,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,l="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||x<0||x===s)&&x!==t&&this._first&&(h=!0,x>s&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:s,this._yoyo&&0!==(1&this._cycle)?this._time=t=0:(this._time=_,t=_+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==g||0===_&&x!==s&&(x>0||t<0&&x>=0)&&!this._locked)&&(l="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=r=!0,l="onReverseComplete"):x>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=_||!e||t||this._rawPrevTime===t?t:s,0===t&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;t=0,this._initted||(h=!0)}else if(0===_&&x<0&&(h=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(c=_+this._repeatDelay,this._cycle=this._totalTime/c>>0,0!==this._cycle&&this._cycle===this._totalTime/c&&v<=t&&this._cycle--,this._time=this._totalTime-this._cycle*c,this._yoyo&&0!==(1&this._cycle)&&(this._time=_-this._time),this._time>_?(this._time=_,t=_+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e&&t<_){if(t=this._time,t>=g||this._repeat&&w!==this._cycle)for(i=this._first;i&&i._startTime<=t&&!f;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(f=i),i=i._next;else for(i=this._last;i&&i._startTime>=t&&!f;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(f=i),i=i._prev;f&&(this._time=t=f._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==w&&!this._locked){var S=this._yoyo&&0!==(1&w),C=S===(this._yoyo&&0!==(1&this._cycle)),T=this._totalTime,P=this._cycle,A=this._rawPrevTime,k=this._time;if(this._totalTime=w*_,this._cycle<w?S=!S:this._totalTime+=_,this._time=g,this._rawPrevTime=0===_?x-1e-4:x,this._cycle=w,this._locked=!0,g=S?0:_,this.render(g,e,0===_),e||this._gc||this.vars.onRepeat&&(this._cycle=P,this._locked=!1,this._callback("onRepeat")),g!==this._time)return;if(C&&(this._cycle=w,this._locked=!0,g=S?_+1e-4:-1e-4,this.render(g,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=k,this._totalTime=T,this._cycle=P,this._rawPrevTime=A}if(!(this._time!==g&&this._first||n||h||f))return void(v!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==v&&t>0&&(this._active=!0),0===v&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),d=this._time,d>=g)for(i=this._first;i&&(o=i._next,d===this._time&&(!this._paused||b));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(f===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)),i=o;else for(i=this._last;i&&(o=i._prev,d===this._time&&(!this._paused||b));){if(i._active||i._startTime<=g&&!i._paused&&!i._gc){if(f===i){for(f=i._prev;f&&f.endTime()>this._time;)f.render(f._reversed?f.totalDuration()-(t-f._startTime)*f._timeScale:(t-f._startTime)*f._timeScale,e,n),f=f._prev;f=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(t-i._startTime)*i._timeScale,e,n):i.render((t-i._startTime)*i._timeScale,e,n)}i=o}this._onUpdate&&(e||(a.length&&u(),this._callback("onUpdate"))),l&&(this._locked||this._gc||m!==this._startTime&&y===this._timeScale||(0===this._time||p>=this.totalDuration())&&(r&&(a.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))},c.getActive=function(t,e,n){null==t&&(t=!0),null==e&&(e=!0),null==n&&(n=!1);var i,r,s=[],o=this.getChildren(t,e,n),a=0,u=o.length;for(i=0;i<u;i++)r=o[i],r.isActive()&&(s[a++]=r);return s},c.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,n=this.getLabelsArray(),i=n.length;for(e=0;e<i;e++)if(n[e].time>t)return n[e].name;return null},c.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),n=e.length;--n>-1;)if(e[n].time<t)return e[n].name;return null},c.getLabelsArray=function(){var t,e=[],n=0;for(t in this._labels)e[n++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},c.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},c.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},c.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},c.totalDuration=function(e){return arguments.length?this._repeat!==-1&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=this._repeat===-1?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},c.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!==(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},c.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},c.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},c.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},c.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r},!0),function(){var t=180/Math.PI,e=[],i=[],r=[],s={},o=n._gsDefine.globals,a=function(t,e,n,i){n===i&&(n=i-(i-e)/1e6),t===e&&(e=t+(n-t)/1e6),this.a=t,this.b=e,this.c=n,this.d=i,this.da=i-t,this.ca=n-t,this.ba=e-t},u=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",l=function(t,e,n,i){var r={a:t},s={},o={},a={c:i},u=(t+e)/2,l=(e+n)/2,h=(n+i)/2,c=(u+l)/2,f=(l+h)/2,d=(f-c)/8;return r.b=u+(t-u)/4,s.b=c+d,r.c=s.a=(r.b+s.b)/2,s.c=o.a=(c+f)/2,o.b=f-d,a.b=h+(i-h)/4,o.c=a.a=(o.b+a.b)/2,[r,s,o,a]},h=function(t,n,s,o,a){var u,h,c,f,d,p,_,g,v,m,y,x,b,w=t.length-1,S=0,C=t[0].a;for(u=0;u<w;u++)d=t[S],h=d.a,c=d.d,f=t[S+1].d,a?(y=e[u],x=i[u],b=(x+y)*n*.25/(o?.5:r[u]||.5),p=c-(c-h)*(o?.5*n:0!==y?b/y:0),_=c+(f-c)*(o?.5*n:0!==x?b/x:0),g=c-(p+((_-p)*(3*y/(y+x)+.5)/4||0))):(p=c-(c-h)*n*.5,_=c+(f-c)*n*.5,g=c-(p+_)/2),p+=g,_+=g,d.c=v=p,0!==u?d.b=C:d.b=C=d.a+.6*(d.c-d.a),d.da=c-h,d.ca=v-h,d.ba=C-h,s?(m=l(h,C,v,c),t.splice(S,1,m[0],m[1],m[2],m[3]),S+=4):S++,C=_;d=t[S],d.b=C,d.c=C+.4*(d.d-C),d.da=d.d-d.a,d.ca=d.c-d.a,d.ba=C-d.a,s&&(m=l(d.a,C,d.c,d.d),t.splice(S,1,m[0],m[1],m[2],m[3]))},c=function(t,n,r,s){var o,u,l,h,c,f,d=[];if(s)for(t=[s].concat(t),u=t.length;--u>-1;)"string"==typeof(f=t[u][n])&&"="===f.charAt(1)&&(t[u][n]=s[n]+Number(f.charAt(0)+f.substr(2)));if(o=t.length-2,o<0)return d[0]=new a(t[0][n],0,0,t[o<-1?0:1][n]),d;for(u=0;u<o;u++)l=t[u][n],h=t[u+1][n],d[u]=new a(l,0,0,h),r&&(c=t[u+2][n],e[u]=(e[u]||0)+(h-l)*(h-l),i[u]=(i[u]||0)+(c-h)*(c-h));return d[u]=new a(t[u][n],0,0,t[u+1][n]),d},f=function(t,n,o,a,l,f){var d,p,_,g,v,m,y,x,b={},w=[],S=f||t[0];l="string"==typeof l?","+l+",":u,null==n&&(n=1);for(p in t[0])w.push(p);if(t.length>1){for(x=t[t.length-1],y=!0,d=w.length;--d>-1;)if(p=w[d],Math.abs(S[p]-x[p])>.05){y=!1;break}y&&(t=t.concat(),f&&t.unshift(f),t.push(t[1]),f=t[t.length-3])}for(e.length=i.length=r.length=0,d=w.length;--d>-1;)p=w[d],s[p]=l.indexOf(","+p+",")!==-1,b[p]=c(t,p,s[p],f);for(d=e.length;--d>-1;)e[d]=Math.sqrt(e[d]),i[d]=Math.sqrt(i[d]);if(!a){for(d=w.length;--d>-1;)if(s[p])for(_=b[w[d]],m=_.length-1,g=0;g<m;g++)v=_[g+1].da/i[g]+_[g].da/e[g]||0,r[g]=(r[g]||0)+v*v;for(d=r.length;--d>-1;)r[d]=Math.sqrt(r[d])}for(d=w.length,g=o?4:1;--d>-1;)p=w[d],_=b[p],h(_,n,o,a,s[p]),y&&(_.splice(0,g),_.splice(_.length-g,g));return b},d=function(t,e,n){e=e||"soft";var i,r,s,o,u,l,h,c,f,d,p,_={},g="cubic"===e?3:2,v="soft"===e,m=[];if(v&&n&&(t=[n].concat(t)),null==t||t.length<g+1)throw"invalid Bezier data";for(f in t[0])m.push(f);for(l=m.length;--l>-1;){for(f=m[l],_[f]=u=[],d=0,c=t.length,h=0;h<c;h++)i=null==n?t[h][f]:"string"==typeof(p=t[h][f])&&"="===p.charAt(1)?n[f]+Number(p.charAt(0)+p.substr(2)):Number(p),v&&h>1&&h<c-1&&(u[d++]=(i+u[d-2])/2),u[d++]=i;for(c=d-g+1,d=0,h=0;h<c;h+=g)i=u[h],r=u[h+1],s=u[h+2],o=2===g?0:u[h+3],u[d++]=p=3===g?new a(i,r,s,o):new a(i,(2*r+i)/3,(2*r+s)/3,s);u.length=d}return _},p=function(t,e,n){for(var i,r,s,o,a,u,l,h,c,f,d,p=1/n,_=t.length;--_>-1;)for(f=t[_],s=f.a,o=f.d-s,a=f.c-s,u=f.b-s,i=r=0,h=1;h<=n;h++)l=p*h,c=1-l,i=r-(r=(l*l*o+3*c*(l*a+c*u))*l),d=_*n+h-1,e[d]=(e[d]||0)+i*i},_=function(t,e){e=e>>0||6;var n,i,r,s,o=[],a=[],u=0,l=0,h=e-1,c=[],f=[];for(n in t)p(t[n],o,e);for(r=o.length,i=0;i<r;i++)u+=Math.sqrt(o[i]),s=i%e,f[s]=u,s===h&&(l+=u,s=i/e>>0,c[s]=f,a[s]=l,u=0,f=[]);return{length:l,lengths:a,segments:c}},g=n._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(t,e,n){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var i,r,s,o,a,u=e.values||[],l={},h=u[0],c=e.autoRotate||n.vars.orientToBezier;this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",c===!0?0:Number(c)||0]]:null;for(i in h)this._props.push(i);for(s=this._props.length;--s>-1;)i=this._props[s],this._overwriteProps.push(i),r=this._func[i]="function"==typeof t[i],l[i]=r?t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(t[i]),a||l[i]!==u[0][i]&&(a=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?f(u,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):d(u,e.type,l),this._segCount=this._beziers[i].length,this._timeRes){var p=_(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(this._initialRotations=[],c[0]instanceof Array||(this._autoRotate=c=[c]),s=c.length;--s>-1;){for(o=0;o<3;o++)i=c[s][o],this._func[i]="function"==typeof t[i]&&t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)];i=c[s][2],this._initialRotations[s]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(e){var n,i,r,s,o,a,u,l,h,c,f=this._segCount,d=this._func,p=this._target,_=e!==this._startRatio;if(this._timeRes){if(h=this._lengths,c=this._curSeg,e*=this._length,r=this._li,e>this._l2&&r<f-1){for(l=f-1;r<l&&(this._l2=h[++r])<=e;);this._l1=h[r-1],this._li=r,this._curSeg=c=this._segments[r],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&r>0){for(;r>0&&(this._l1=h[--r])>=e;);0===r&&e<this._l1?this._l1=0:r++,this._l2=h[r],this._li=r,this._curSeg=c=this._segments[r],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(n=r,e-=this._l1,r=this._si,e>this._s2&&r<c.length-1){for(l=c.length-1;r<l&&(this._s2=c[++r])<=e;);this._s1=c[r-1],this._si=r}else if(e<this._s1&&r>0){for(;r>0&&(this._s1=c[--r])>=e;);0===r&&e<this._s1?this._s1=0:r++,this._s2=c[r],this._si=r}a=(r+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else n=e<0?0:e>=1?f-1:f*e>>0,a=(e-n*(1/f))*f;for(i=1-a,r=this._props.length;--r>-1;)s=this._props[r],o=this._beziers[s][n],u=(a*a*o.da+3*i*(a*o.ca+i*o.ba))*a+o.a,this._mod[s]&&(u=this._mod[s](u,p)),d[s]?p[s](u):p[s]=u;if(this._autoRotate){var g,v,m,y,x,b,w,S=this._autoRotate;for(r=S.length;--r>-1;)s=S[r][2],b=S[r][3]||0,w=S[r][4]===!0?1:t,o=this._beziers[S[r][0]],g=this._beziers[S[r][1]],o&&g&&(o=o[n],g=g[n],v=o.a+(o.b-o.a)*a,y=o.b+(o.c-o.b)*a,v+=(y-v)*a,y+=(o.c+(o.d-o.c)*a-y)*a,m=g.a+(g.b-g.a)*a,x=g.b+(g.c-g.b)*a,m+=(x-m)*a,x+=(g.c+(g.d-g.c)*a-x)*a,u=_?Math.atan2(x-m,y-v)*w+b:this._initialRotations[r],this._mod[s]&&(u=this._mod[s](u,p)),d[s]?p[s](u):p[s]=u)}}}),v=g.prototype;g.bezierThrough=f,g.cubicToQuadratic=l,g._autoCSS=!0,g.quadraticToCubic=function(t,e,n){return new a(t,(2*e+t)/3,(2*e+n)/3,n)},g._cssRegister=function(){var t=o.CSSPlugin;if(t){var e=t._internals,n=e._parseToProxy,i=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,s,o,a,u){e instanceof Array&&(e={values:e}),u=new g;var l,h,c,f=e.values,d=f.length-1,p=[],_={};if(d<0)return a;for(l=0;l<=d;l++)c=n(t,f[l],o,a,u,d!==l),p[l]=c.end;for(h in e)_[h]=e[h];return _.values=p,a=new r(t,"bezier",0,0,c.pt,2),a.data=c,a.plugin=u,a.setRatio=i,0===_.autoRotate&&(_.autoRotate=!0),!_.autoRotate||_.autoRotate instanceof Array||(l=_.autoRotate===!0?0:Number(_.autoRotate),_.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x&&[["x","y","rotation",l,!1]]),_.autoRotate&&(o._transform||o._enableTransforms(!1),c.autoRotate=o._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,o._overwriteProps.push("rotation")),u._onInitTween(c.proxy,_,o._tween),a}})}},v._mod=function(t){for(var e,n=this._overwriteProps,i=n.length;--i>-1;)e=t[n[i]],e&&"function"==typeof e&&(this._mod[n[i]]=e)},v._kill=function(t){var e,n,i=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],n=i.length;--n>-1;)i[n]===e&&i.splice(n,1);if(i=this._autoRotate)for(n=i.length;--n>-1;)t[i[n][2]]&&i.splice(n,1);return this._super._kill.call(this,t)}}(),n._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,r,s,o,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},u=n._gsDefine.globals,l={},h=a.prototype=new t("css");h.constructor=a,a.version="1.19.1",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h,lineHeight:""};var c,f,d,p,_,g,v,m,y=/(?:\-|\.|\b)(\d|\.|e\-)+/g,x=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,b=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,S=/(?:\d|\-|\+|=|#|\.)*/g,C=/opacity *= *([^)]*)/i,T=/opacity:([^;]*)/i,P=/alpha\(opacity *=.+?\)/i,A=/^(rgb|hsl)/,k=/([A-Z])/g,M=/-([a-z])/gi,O=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,I=function(t,e){return e.toUpperCase()},R=/(?:Left|Right|Width)/i,B=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,z=/,(?=[^\)]*(?:\(|$))/gi,L=/[\s,\(]/i,D=Math.PI/180,N=180/Math.PI,F={},j={style:{}},V=n.document||{createElement:function(){return j}},q=function(t,e){return V.createElementNS?V.createElementNS(e||"http://www.w3.org/1999/xhtml",t):V.createElement(t)},W=q("div"),U=q("img"),X=a._internals={_specialProps:l},H=(n.navigator||{}).userAgent||"",Y=function(){var t=H.indexOf("Android"),e=q("a");return d=H.indexOf("Safari")!==-1&&H.indexOf("Chrome")===-1&&(t===-1||parseFloat(H.substr(t+8,2))>3),_=d&&parseFloat(H.substr(H.indexOf("Version/")+8,2))<6,p=H.indexOf("Firefox")!==-1,(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H))&&(g=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),G=function(t){return C.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Z=function(t){n.console&&console.log(t)},$="",J="",K=function(t,e){e=e||W;var n,i,r=e.style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===r[n[i]+t];);return i>=0?(J=3===i?"ms":n[i],$="-"+J.toLowerCase()+"-",J+t):null},Q=V.defaultView?V.defaultView.getComputedStyle:function(){},tt=a.getStyle=function(t,e,n,i,r){var s;return Y||"opacity"!==e?(!i&&t.style[e]?s=t.style[e]:(n=n||Q(t))?s=n[e]||n.getPropertyValue(e)||n.getPropertyValue(e.replace(k,"-$1").toLowerCase()):t.currentStyle&&(s=t.currentStyle[e]),null==r||s&&"none"!==s&&"auto"!==s&&"auto auto"!==s?s:r):G(t)},et=X.convertToPixels=function(t,n,i,r,s){if("px"===r||!r)return i;if("auto"===r||!i)return 0;var o,u,l,h=R.test(n),c=t,f=W.style,d=i<0,p=1===i;if(d&&(i=-i),p&&(i*=100),"%"===r&&n.indexOf("border")!==-1)o=i/100*(h?t.clientWidth:t.clientHeight);else{if(f.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==r&&c.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)f[h?"borderLeftWidth":"borderTopWidth"]=i+r;else{if(c=t.parentNode||V.body,u=c._gsCache,l=e.ticker.frame,u&&h&&u.time===l)return u.width*i/100;f[h?"width":"height"]=i+r}c.appendChild(W),o=parseFloat(W[h?"offsetWidth":"offsetHeight"]),c.removeChild(W),h&&"%"===r&&a.cacheWidths!==!1&&(u=c._gsCache=c._gsCache||{},u.time=l,u.width=o/i*100),0!==o||s||(o=et(t,n,i,r,!0))}return p&&(o/=100),d?-o:o},nt=X.calculateOffset=function(t,e,n){if("absolute"!==tt(t,"position",n))return 0;var i="left"===e?"Left":"Top",r=tt(t,"margin"+i,n);return t["offset"+i]-(et(t,e,parseFloat(r),r.replace(S,""))||0)},it=function(t,e){var n,i,r,s={};if(e=e||Q(t,null))if(n=e.length)for(;--n>-1;)r=e[n],r.indexOf("-transform")!==-1&&Ot!==r||(s[r.replace(M,I)]=e.getPropertyValue(r));else for(n in e)n.indexOf("Transform")!==-1&&Mt!==n||(s[n]=e[n]);else if(e=t.currentStyle||t.style)for(n in e)"string"==typeof n&&void 0===s[n]&&(s[n.replace(M,I)]=e[n]);return Y||(s.opacity=G(t)),i=Ut(t,e,!1),s.rotation=i.rotation,s.skewX=i.skewX,s.scaleX=i.scaleX,s.scaleY=i.scaleY,s.x=i.x,s.y=i.y,Rt&&(s.z=i.z,s.rotationX=i.rotationX,s.rotationY=i.rotationY,s.scaleZ=i.scaleZ),s.filters&&delete s.filters,s},rt=function(t,e,n,i,r){var s,o,a,u={},l=t.style;for(o in n)"cssText"!==o&&"length"!==o&&isNaN(o)&&(e[o]!==(s=n[o])||r&&r[o])&&o.indexOf("Origin")===-1&&("number"!=typeof s&&"string"!=typeof s||(u[o]="auto"!==s||"left"!==o&&"top"!==o?""!==s&&"auto"!==s&&"none"!==s||"string"!=typeof e[o]||""===e[o].replace(w,"")?s:0:nt(t,o),void 0!==l[o]&&(a=new yt(l,o,l[o],a))));if(i)for(o in i)"className"!==o&&(u[o]=i[o]);return{difs:u,firstMPT:a}},st={width:["Left","Right"],height:["Top","Bottom"]},ot=["marginLeft","marginRight","marginTop","marginBottom"],at=function(t,e,n){if("svg"===(t.nodeName+"").toLowerCase())return(n||Q(t))[e]||0;if(t.getCTM&&Vt(t))return t.getBBox()[e]||0;var i=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=st[e],s=r.length;for(n=n||Q(t,null);--s>-1;)i-=parseFloat(tt(t,"padding"+r[s],n,!0))||0,i-=parseFloat(tt(t,"border"+r[s]+"Width",n,!0))||0;return i},ut=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var n,i=t.split(" "),r=t.indexOf("left")!==-1?"0%":t.indexOf("right")!==-1?"100%":i[0],s=t.indexOf("top")!==-1?"0%":t.indexOf("bottom")!==-1?"100%":i[1];if(i.length>3&&!e){for(i=t.split(", ").join(",").split(","),t=[],n=0;n<i.length;n++)t.push(ut(i[n]));return t.join(",")}return null==s?s="center"===r?"50%":"0":"center"===s&&(s="50%"),("center"===r||isNaN(parseFloat(r))&&(r+"").indexOf("=")===-1)&&(r="50%"),t=r+" "+s+(i.length>2?" "+i[2]:""),e&&(e.oxp=r.indexOf("%")!==-1,e.oyp=s.indexOf("%")!==-1,e.oxr="="===r.charAt(1),e.oyr="="===s.charAt(1),e.ox=parseFloat(r.replace(w,"")),e.oy=parseFloat(s.replace(w,"")),e.v=t),e||t},lt=function(t,e){return"function"==typeof t&&(t=t(m,v)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ht=function(t,e){return"function"==typeof t&&(t=t(m,v)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ct=function(t,e,n,i){var r,s,o,a,u,l=1e-6;return"function"==typeof t&&(t=t(m,v)),null==t?a=e:"number"==typeof t?a=t:(r=360,s=t.split("_"),u="="===t.charAt(1),o=(u?parseInt(t.charAt(0)+"1",10)*parseFloat(s[0].substr(2)):parseFloat(s[0]))*(t.indexOf("rad")===-1?1:N)-(u?0:e),s.length&&(i&&(i[n]=e+o),t.indexOf("short")!==-1&&(o%=r,o!==o%(r/2)&&(o=o<0?o+r:o-r)),t.indexOf("_cw")!==-1&&o<0?o=(o+9999999999*r)%r-(o/r|0)*r:t.indexOf("ccw")!==-1&&o>0&&(o=(o-9999999999*r)%r-(o/r|0)*r)),a=e+o),a<l&&a>-l&&(a=0),a},ft={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},dt=function(t,e,n){return t=t<0?t+1:t>1?t-1:t,255*(6*t<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0},pt=a.parseColor=function(t,e){var n,i,r,s,o,a,u,l,h,c,f;if(t)if("number"==typeof t)n=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ft[t])n=ft[t];else if("#"===t.charAt(0))4===t.length&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s),t=parseInt(t.substr(1),16),n=[t>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(n=f=t.match(y),e){if(t.indexOf("=")!==-1)return t.match(x)}else o=Number(n[0])%360/360,a=Number(n[1])/100,u=Number(n[2])/100,r=u<=.5?u*(a+1):u+a-u*a,i=2*u-r,n.length>3&&(n[3]=Number(t[3])),n[0]=dt(o+1/3,i,r),n[1]=dt(o,i,r),n[2]=dt(o-1/3,i,r);else n=t.match(y)||ft.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=ft.black;return e&&!f&&(i=n[0]/255,r=n[1]/255,s=n[2]/255,l=Math.max(i,r,s),h=Math.min(i,r,s),u=(l+h)/2,l===h?o=a=0:(c=l-h,a=u>.5?c/(2-l-h):c/(l+h),o=l===i?(r-s)/c+(r<s?6:0):l===r?(s-i)/c+2:(i-r)/c+4,o*=60),n[0]=o+.5|0,n[1]=100*a+.5|0,n[2]=100*u+.5|0),n},_t=function(t,e){var n,i,r,s=t.match(gt)||[],o=0,a=s.length?"":t;for(n=0;n<s.length;n++)i=s[n],r=t.substr(o,t.indexOf(i,o)-o),o+=r.length+i.length,i=pt(i,e),3===i.length&&i.push(1),a+=r+(e?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return a+t.substr(o)},gt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(h in ft)gt+="|"+h+"\\b";gt=new RegExp(gt+")","gi"),a.colorStringFilter=function(t){var e,n=t[0]+t[1];gt.test(n)&&(e=n.indexOf("hsl(")!==-1||n.indexOf("hsla(")!==-1,t[0]=_t(t[0],e),t[1]=_t(t[1],e)),gt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var vt=function(t,e,n,i){if(null==t)return function(t){return t};var r,s=e?(t.match(gt)||[""])[0]:"",o=t.split(s).join("").match(b)||[],a=t.substr(0,t.indexOf(o[0])),u=")"===t.charAt(t.length-1)?")":"",l=t.indexOf(" ")!==-1?" ":",",h=o.length,c=h>0?o[0].replace(y,""):"";return h?r=e?function(t){var e,f,d,p;if("number"==typeof t)t+=c;else if(i&&z.test(t)){for(p=t.replace(z,"|").split("|"),d=0;d<p.length;d++)p[d]=r(p[d]);return p.join(",")}if(e=(t.match(gt)||[s])[0],f=t.split(e).join("").match(b)||[],d=f.length,h>d--)for(;++d<h;)f[d]=n?f[(d-1)/2|0]:o[d];return a+f.join(l)+l+e+u+(t.indexOf("inset")!==-1?" inset":"")}:function(t){var e,s,f;if("number"==typeof t)t+=c;else if(i&&z.test(t)){for(s=t.replace(z,"|").split("|"),f=0;f<s.length;f++)s[f]=r(s[f]);return s.join(",")}if(e=t.match(b)||[],f=e.length,h>f--)for(;++f<h;)e[f]=n?e[(f-1)/2|0]:o[f];return a+e.join(l)+u}:function(t){return t}},mt=function(t){return t=t.split(","),function(e,n,i,r,s,o,a){var u,l=(n+"").split(" ");for(a={},u=0;u<4;u++)a[t[u]]=l[u]=l[u]||l[(u-1)/2>>0];return r.parse(e,a,s,o)}},yt=(X._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,n,i,r,s,o=this.data,a=o.proxy,u=o.firstMPT,l=1e-6;u;)e=a[u.v],u.r?e=Math.round(e):e<l&&e>-l&&(e=0),u.t[u.p]=e,u=u._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod(a.rotation,this.t):a.rotation),1===t||0===t)for(u=o.firstMPT,s=1===t?"e":"b";u;){if(n=u.t,n.type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[s]=r}}else n[s]=n.s+n.xs0;u=u._next}},function(t,e,n,i,r){this.t=t,this.p=e,this.v=n,this.r=r,i&&(i._prev=this,this._next=i)}),xt=(X._parseToProxy=function(t,e,n,i,r,s){var o,a,u,l,h,c=i,f={},d={},p=n._transform,_=F;for(n._transform=null,F=e,i=h=n.parse(t,e,i,r),F=_,s&&(n._transform=p,c&&(c._prev=null,c._prev&&(c._prev._next=null)));i&&i!==c;){if(i.type<=1&&(a=i.p,d[a]=i.s+i.c,f[a]=i.s,s||(l=new yt(i,"s",a,l,i.r),i.c=0),1===i.type))for(o=i.l;--o>0;)u="xn"+o,a=i.p+"_"+u,d[a]=i.data[u],f[a]=i[u],s||(l=new yt(i,u,a,l,i.rxp[u]));i=i._next}return{proxy:f,end:d,firstMPT:l,pt:h}},X.CSSPropTween=function(t,e,n,r,s,a,u,l,h,c,f){this.t=t,this.p=e,this.s=n,this.c=r,this.n=u||e,t instanceof xt||o.push(this.n),this.r=l,this.type=a||0,h&&(this.pr=h,i=!0),this.b=void 0===c?n:c,this.e=void 0===f?n+r:f,s&&(this._next=s,s._prev=this)}),bt=function(t,e,n,i,r,s){var o=new xt(t,e,n,i-n,r,(-1),s);return o.b=n,o.e=o.xs0=i,o},wt=a.parseComplex=function(t,e,n,i,r,s,o,u,l,h){n=n||s||"","function"==typeof i&&(i=i(m,v)),o=new xt(t,e,0,0,o,h?2:1,null,(!1),u,n,i),i+="",r&&gt.test(i+n)&&(i=[n,i],a.colorStringFilter(i),n=i[0],i=i[1]);var f,d,p,_,g,b,w,S,C,T,P,A,k,M=n.split(", ").join(",").split(" "),O=i.split(", ").join(",").split(" "),I=M.length,R=c!==!1;for(i.indexOf(",")===-1&&n.indexOf(",")===-1||(M=M.join(" ").replace(z,", ").split(" "),O=O.join(" ").replace(z,", ").split(" "),I=M.length),I!==O.length&&(M=(s||"").split(" "),I=M.length),o.plugin=l,o.setRatio=h,gt.lastIndex=0,f=0;f<I;f++)if(_=M[f],g=O[f],S=parseFloat(_),S||0===S)o.appendXtra("",S,lt(g,S),g.replace(x,""),R&&g.indexOf("px")!==-1,!0);else if(r&&gt.test(_))A=g.indexOf(")")+1,A=")"+(A?g.substr(A):""),k=g.indexOf("hsl")!==-1&&Y,_=pt(_,k),g=pt(g,k),C=_.length+g.length>6,C&&!Y&&0===g[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(O[f]).join("transparent")):(Y||(C=!1),k?o.appendXtra(C?"hsla(":"hsl(",_[0],lt(g[0],_[0]),",",!1,!0).appendXtra("",_[1],lt(g[1],_[1]),"%,",!1).appendXtra("",_[2],lt(g[2],_[2]),C?"%,":"%"+A,!1):o.appendXtra(C?"rgba(":"rgb(",_[0],g[0]-_[0],",",!0,!0).appendXtra("",_[1],g[1]-_[1],",",!0).appendXtra("",_[2],g[2]-_[2],C?",":A,!0),C&&(_=_.length<4?1:_[3],o.appendXtra("",_,(g.length<4?1:g[3])-_,A,!1))),gt.lastIndex=0;else if(b=_.match(y)){if(w=g.match(x),!w||w.length!==b.length)return o;for(p=0,d=0;d<b.length;d++)P=b[d],T=_.indexOf(P,p),o.appendXtra(_.substr(p,T-p),Number(P),lt(w[d],P),"",R&&"px"===_.substr(T+P.length,2),0===d),p=T+P.length;o["xs"+o.l]+=_.substr(p)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+g:g;if(i.indexOf("=")!==-1&&o.data){for(A=o.xs0+o.data.s,f=1;f<o.l;f++)A+=o["xs"+f]+o.data["xn"+f];o.e=A+o["xs"+f]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},St=9;for(h=xt.prototype,h.l=h.pr=0;--St>0;)h["xn"+St]=0,h["xs"+St]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,n,i,r,s){var o=this,a=o.l;return o["xs"+a]+=s&&(a||o["xs"+a])?" "+t:t||"",n||0===a||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=i||"",a>0?(o.data["xn"+a]=e+n,o.rxp["xn"+a]=r,o["xn"+a]=e,o.plugin||(o.xfirst=new xt(o,"xn"+a,e,n,o.xfirst||o,0,o.n,r,o.pr),o.xfirst.xs0=0),o):(o.data={s:e+n},o.rxp={},o.s=e,o.c=n,o.r=r,o)):(o["xs"+a]+=e+(i||""),o)};var Ct=function(t,e){e=e||{},this.p=e.prefix?K(t)||t:t,l[t]=l[this.p]=this,this.format=e.formatter||vt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},Tt=X._registerComplexSpecialProp=function(t,e,n){"object"!=typeof e&&(e={parser:n});var i,r,s=t.split(","),o=e.defaultValue;for(n=n||[o],i=0;i<s.length;i++)e.prefix=0===i&&e.prefix,e.defaultValue=n[i]||o,r=new Ct(s[i],e)},Pt=X._registerPluginProp=function(t){if(!l[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";Tt(t,{parser:function(t,n,i,r,s,o,a){var h=u.com.greensock.plugins[e];return h?(h._cssRegister(),l[i].parse(t,n,i,r,s,o,a)):(Z("Error: "+e+" js file not loaded."),s)}})}};h=Ct.prototype,h.parseComplex=function(t,e,n,i,r,s){var o,a,u,l,h,c,f=this.keyword;if(this.multi&&(z.test(n)||z.test(e)?(a=e.replace(z,"|").split("|"),u=n.replace(z,"|").split("|")):f&&(a=[e],u=[n])),u){for(l=u.length>a.length?u.length:a.length,o=0;o<l;o++)e=a[o]=a[o]||this.dflt,n=u[o]=u[o]||this.dflt,f&&(h=e.indexOf(f),c=n.indexOf(f),h!==c&&(c===-1?a[o]=a[o].split(f).join(""):h===-1&&(a[o]+=" "+f)));e=a.join(", "),n=u.join(", ")}return wt(t,this.p,e,n,this.clrs,this.dflt,i,this.pr,r,s)},h.parse=function(t,e,n,i,r,o,a){return this.parseComplex(t.style,this.format(tt(t,this.p,s,!1,this.dflt)),this.format(e),r,o)},a.registerSpecialProp=function(t,e,n){Tt(t,{parser:function(t,i,r,s,o,a,u){var l=new xt(t,r,0,0,o,2,r,(!1),n);return l.plugin=a,l.setRatio=e(t,i,s._tween,r),l},priority:n})},a.useSVGTransformAttr=!0;var At,kt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Mt=K("transform"),Ot=$+"transform",It=K("transformOrigin"),Rt=null!==K("perspective"),Bt=X.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(a.defaultForce3D===!1||!Rt)&&(a.defaultForce3D||"auto")},Et=n.SVGElement,zt=function(t,e,n){var i,r=V.createElementNS("http://www.w3.org/2000/svg",t),s=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(s,"$1-$2").toLowerCase(),n[i]);return e.appendChild(r),r},Lt=V.documentElement||{},Dt=function(){var t,e,i,r=g||/Android/i.test(H)&&!n.chrome;
return V.createElementNS&&!r&&(t=zt("svg",Lt),e=zt("rect",t,{width:100,height:50,x:100}),i=e.getBoundingClientRect().width,e.style[It]="50% 50%",e.style[Mt]="scaleX(0.5)",r=i===e.getBoundingClientRect().width&&!(p&&Rt),Lt.removeChild(t)),r}(),Nt=function(t,e,n,i,r,s){var o,u,l,h,c,f,d,p,_,g,v,m,y,x,b=t._gsTransform,w=Wt(t,!0);b&&(y=b.xOrigin,x=b.yOrigin),(!i||(o=i.split(" ")).length<2)&&(d=t.getBBox(),0===d.x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),e=ut(e).split(" "),o=[(e[0].indexOf("%")!==-1?parseFloat(e[0])/100*d.width:parseFloat(e[0]))+d.x,(e[1].indexOf("%")!==-1?parseFloat(e[1])/100*d.height:parseFloat(e[1]))+d.y]),n.xOrigin=h=parseFloat(o[0]),n.yOrigin=c=parseFloat(o[1]),i&&w!==qt&&(f=w[0],d=w[1],p=w[2],_=w[3],g=w[4],v=w[5],m=f*_-d*p,m&&(u=h*(_/m)+c*(-p/m)+(p*v-_*g)/m,l=h*(-d/m)+c*(f/m)-(f*v-d*g)/m,h=n.xOrigin=o[0]=u,c=n.yOrigin=o[1]=l)),b&&(s&&(n.xOffset=b.xOffset,n.yOffset=b.yOffset,b=n),r||r!==!1&&a.defaultSmoothOrigin!==!1?(u=h-y,l=c-x,b.xOffset+=u*w[0]+l*w[2]-u,b.yOffset+=u*w[1]+l*w[3]-l):b.xOffset=b.yOffset=0),s||t.setAttribute("data-svg-origin",o.join(" "))},Ft=function(t){var e,n=q("svg",this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Lt.appendChild(n),n.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Ft}catch(o){}else this._originalGetBBox&&(e=this._originalGetBBox());return r?i.insertBefore(this,r):i.appendChild(this),Lt.removeChild(n),this.style.cssText=s,e},jt=function(t){try{return t.getBBox()}catch(e){return Ft.call(t,!0)}},Vt=function(t){return!(!(Et&&t.getCTM&&jt(t))||t.parentNode&&!t.ownerSVGElement)},qt=[1,0,0,1,0,0],Wt=function(t,e){var n,i,r,s,o,a,u=t._gsTransform||new Bt,l=1e5,h=t.style;if(Mt?i=tt(t,Ot,null,!0):t.currentStyle&&(i=t.currentStyle.filter.match(B),i=i&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),u.x||0,u.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,n&&Mt&&((a="none"===Q(t).display)||!t.parentNode)&&(a&&(s=h.display,h.display="block"),t.parentNode||(o=1,Lt.appendChild(t)),i=tt(t,Ot,null,!0),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,s?h.display=s:a&&Gt(h,"display"),o&&Lt.removeChild(t)),(u.svg||t.getCTM&&Vt(t))&&(n&&(h[Mt]+"").indexOf("matrix")!==-1&&(i=h[Mt],n=0),r=t.getAttribute("transform"),n&&r&&(r.indexOf("matrix")!==-1?(i=r,n=0):r.indexOf("translate")!==-1&&(i="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",n=0))),n)return qt;for(r=(i||"").match(y)||[],St=r.length;--St>-1;)s=Number(r[St]),r[St]=(o=s-(s|=0))?(o*l+(o<0?-.5:.5)|0)/l+s:s;return e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},Ut=X.getTransform=function(t,n,i,r){if(t._gsTransform&&i&&!r)return t._gsTransform;var s,o,u,l,h,c,f=i?t._gsTransform||new Bt:new Bt,d=f.scaleX<0,p=2e-5,_=1e5,g=Rt?parseFloat(tt(t,It,n,!1,"0 0 0").split(" ")[2])||f.zOrigin||0:0,v=parseFloat(a.defaultTransformPerspective)||0;if(f.svg=!(!t.getCTM||!Vt(t)),f.svg&&(Nt(t,tt(t,It,n,!1,"50% 50%")+"",f,t.getAttribute("data-svg-origin")),At=a.useSVGTransformAttr||Dt),s=Wt(t),s!==qt){if(16===s.length){var m,y,x,b,w,S=s[0],C=s[1],T=s[2],P=s[3],A=s[4],k=s[5],M=s[6],O=s[7],I=s[8],R=s[9],B=s[10],E=s[12],z=s[13],L=s[14],D=s[11],F=Math.atan2(M,B);f.zOrigin&&(L=-f.zOrigin,E=I*L-s[12],z=R*L-s[13],L=B*L+f.zOrigin-s[14]),f.rotationX=F*N,F&&(b=Math.cos(-F),w=Math.sin(-F),m=A*b+I*w,y=k*b+R*w,x=M*b+B*w,I=A*-w+I*b,R=k*-w+R*b,B=M*-w+B*b,D=O*-w+D*b,A=m,k=y,M=x),F=Math.atan2(-T,B),f.rotationY=F*N,F&&(b=Math.cos(-F),w=Math.sin(-F),m=S*b-I*w,y=C*b-R*w,x=T*b-B*w,R=C*w+R*b,B=T*w+B*b,D=P*w+D*b,S=m,C=y,T=x),F=Math.atan2(C,S),f.rotation=F*N,F&&(b=Math.cos(-F),w=Math.sin(-F),S=S*b+A*w,y=C*b+k*w,k=C*-w+k*b,M=T*-w+M*b,C=y),f.rotationX&&Math.abs(f.rotationX)+Math.abs(f.rotation)>359.9&&(f.rotationX=f.rotation=0,f.rotationY=180-f.rotationY),f.scaleX=(Math.sqrt(S*S+C*C)*_+.5|0)/_,f.scaleY=(Math.sqrt(k*k+R*R)*_+.5|0)/_,f.scaleZ=(Math.sqrt(M*M+B*B)*_+.5|0)/_,f.rotationX||f.rotationY?f.skewX=0:(f.skewX=A||k?Math.atan2(A,k)*N+f.rotation:f.skewX||0,Math.abs(f.skewX)>90&&Math.abs(f.skewX)<270&&(d?(f.scaleX*=-1,f.skewX+=f.rotation<=0?180:-180,f.rotation+=f.rotation<=0?180:-180):(f.scaleY*=-1,f.skewX+=f.skewX<=0?180:-180))),f.perspective=D?1/(D<0?-D:D):0,f.x=E,f.y=z,f.z=L,f.svg&&(f.x-=f.xOrigin-(f.xOrigin*S-f.yOrigin*A),f.y-=f.yOrigin-(f.yOrigin*C-f.xOrigin*k))}else if(!Rt||r||!s.length||f.x!==s[4]||f.y!==s[5]||!f.rotationX&&!f.rotationY){var j=s.length>=6,V=j?s[0]:1,q=s[1]||0,W=s[2]||0,U=j?s[3]:1;f.x=s[4]||0,f.y=s[5]||0,u=Math.sqrt(V*V+q*q),l=Math.sqrt(U*U+W*W),h=V||q?Math.atan2(q,V)*N:f.rotation||0,c=W||U?Math.atan2(W,U)*N+h:f.skewX||0,Math.abs(c)>90&&Math.abs(c)<270&&(d?(u*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(l*=-1,c+=c<=0?180:-180)),f.scaleX=u,f.scaleY=l,f.rotation=h,f.skewX=c,Rt&&(f.rotationX=f.rotationY=f.z=0,f.perspective=v,f.scaleZ=1),f.svg&&(f.x-=f.xOrigin-(f.xOrigin*V+f.yOrigin*W),f.y-=f.yOrigin-(f.xOrigin*q+f.yOrigin*U))}f.zOrigin=g;for(o in f)f[o]<p&&f[o]>-p&&(f[o]=0)}return i&&(t._gsTransform=f,f.svg&&(At&&t.style[Mt]?e.delayedCall(.001,function(){Gt(t.style,Mt)}):!At&&t.getAttribute("transform")&&e.delayedCall(.001,function(){t.removeAttribute("transform")}))),f},Xt=function(t){var e,n,i=this.data,r=-i.rotation*D,s=r+i.skewX*D,o=1e5,a=(Math.cos(r)*i.scaleX*o|0)/o,u=(Math.sin(r)*i.scaleX*o|0)/o,l=(Math.sin(s)*-i.scaleY*o|0)/o,h=(Math.cos(s)*i.scaleY*o|0)/o,c=this.t.style,f=this.t.currentStyle;if(f){n=u,u=-l,l=-n,e=f.filter,c.filter="";var d,p,_=this.t.offsetWidth,v=this.t.offsetHeight,m="absolute"!==f.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+u+", M21="+l+", M22="+h,x=i.x+_*i.xPercent/100,b=i.y+v*i.yPercent/100;if(null!=i.ox&&(d=(i.oxp?_*i.ox*.01:i.ox)-_/2,p=(i.oyp?v*i.oy*.01:i.oy)-v/2,x+=d-(d*a+p*u),b+=p-(d*l+p*h)),m?(d=_/2,p=v/2,y+=", Dx="+(d-(d*a+p*u)+x)+", Dy="+(p-(d*l+p*h)+b)+")"):y+=", sizingMethod='auto expand')",e.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1?c.filter=e.replace(E,y):c.filter=y+" "+e,0!==t&&1!==t||1===a&&0===u&&0===l&&1===h&&(m&&y.indexOf("Dx=0, Dy=0")===-1||C.test(e)&&100!==parseFloat(RegExp.$1)||e.indexOf(e.indexOf("Alpha"))===-1&&c.removeAttribute("filter")),!m){var w,T,P,A=g<8?1:-1;for(d=i.ieOffsetX||0,p=i.ieOffsetY||0,i.ieOffsetX=Math.round((_-((a<0?-a:a)*_+(u<0?-u:u)*v))/2+x),i.ieOffsetY=Math.round((v-((h<0?-h:h)*v+(l<0?-l:l)*_))/2+b),St=0;St<4;St++)T=ot[St],w=f[T],n=w.indexOf("px")!==-1?parseFloat(w):et(this.t,T,parseFloat(w),w.replace(S,""))||0,P=n!==i[T]?St<2?-i.ieOffsetX:-i.ieOffsetY:St<2?d-i.ieOffsetX:p-i.ieOffsetY,c[T]=(i[T]=Math.round(n-P*(0===St||2===St?1:A)))+"px"}}},Ht=X.set3DTransformRatio=X.setTransformRatio=function(t){var e,n,i,r,s,o,a,u,l,h,c,f,d,_,g,v,m,y,x,b,w,S,C,T=this.data,P=this.t.style,A=T.rotation,k=T.rotationX,M=T.rotationY,O=T.scaleX,I=T.scaleY,R=T.scaleZ,B=T.x,E=T.y,z=T.z,L=T.svg,N=T.perspective,F=T.force3D,j=T.skewY,V=T.skewX;if(j&&(V+=j,A+=j),((1===t||0===t)&&"auto"===F&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!F)&&!z&&!N&&!M&&!k&&1===R||At&&L||!Rt)return void(A||V||L?(A*=D,S=V*D,C=1e5,n=Math.cos(A)*O,s=Math.sin(A)*O,i=Math.sin(A-S)*-I,o=Math.cos(A-S)*I,S&&"simple"===T.skewType&&(e=Math.tan(S-j*D),e=Math.sqrt(1+e*e),i*=e,o*=e,j&&(e=Math.tan(j*D),e=Math.sqrt(1+e*e),n*=e,s*=e)),L&&(B+=T.xOrigin-(T.xOrigin*n+T.yOrigin*i)+T.xOffset,E+=T.yOrigin-(T.xOrigin*s+T.yOrigin*o)+T.yOffset,At&&(T.xPercent||T.yPercent)&&(g=this.t.getBBox(),B+=.01*T.xPercent*g.width,E+=.01*T.yPercent*g.height),g=1e-6,B<g&&B>-g&&(B=0),E<g&&E>-g&&(E=0)),x=(n*C|0)/C+","+(s*C|0)/C+","+(i*C|0)/C+","+(o*C|0)/C+","+B+","+E+")",L&&At?this.t.setAttribute("transform","matrix("+x):P[Mt]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+x):P[Mt]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+O+",0,0,"+I+","+B+","+E+")");if(p&&(g=1e-4,O<g&&O>-g&&(O=R=2e-5),I<g&&I>-g&&(I=R=2e-5),!N||T.z||T.rotationX||T.rotationY||(N=0)),A||V)A*=D,v=n=Math.cos(A),m=s=Math.sin(A),V&&(A-=V*D,v=Math.cos(A),m=Math.sin(A),"simple"===T.skewType&&(e=Math.tan((V-j)*D),e=Math.sqrt(1+e*e),v*=e,m*=e,T.skewY&&(e=Math.tan(j*D),e=Math.sqrt(1+e*e),n*=e,s*=e))),i=-m,o=v;else{if(!(M||k||1!==R||N||L))return void(P[Mt]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) translate3d(":"translate3d(")+B+"px,"+E+"px,"+z+"px)"+(1!==O||1!==I?" scale("+O+","+I+")":""));n=o=1,i=s=0}h=1,r=a=u=l=c=f=0,d=N?-1/N:0,_=T.zOrigin,g=1e-6,b=",",w="0",A=M*D,A&&(v=Math.cos(A),m=Math.sin(A),u=-m,c=d*-m,r=n*m,a=s*m,h=v,d*=v,n*=v,s*=v),A=k*D,A&&(v=Math.cos(A),m=Math.sin(A),e=i*v+r*m,y=o*v+a*m,l=h*m,f=d*m,r=i*-m+r*v,a=o*-m+a*v,h*=v,d*=v,i=e,o=y),1!==R&&(r*=R,a*=R,h*=R,d*=R),1!==I&&(i*=I,o*=I,l*=I,f*=I),1!==O&&(n*=O,s*=O,u*=O,c*=O),(_||L)&&(_&&(B+=r*-_,E+=a*-_,z+=h*-_+_),L&&(B+=T.xOrigin-(T.xOrigin*n+T.yOrigin*i)+T.xOffset,E+=T.yOrigin-(T.xOrigin*s+T.yOrigin*o)+T.yOffset),B<g&&B>-g&&(B=w),E<g&&E>-g&&(E=w),z<g&&z>-g&&(z=0)),x=T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix3d(":"matrix3d(",x+=(n<g&&n>-g?w:n)+b+(s<g&&s>-g?w:s)+b+(u<g&&u>-g?w:u),x+=b+(c<g&&c>-g?w:c)+b+(i<g&&i>-g?w:i)+b+(o<g&&o>-g?w:o),k||M||1!==R?(x+=b+(l<g&&l>-g?w:l)+b+(f<g&&f>-g?w:f)+b+(r<g&&r>-g?w:r),x+=b+(a<g&&a>-g?w:a)+b+(h<g&&h>-g?w:h)+b+(d<g&&d>-g?w:d)+b):x+=",0,0,0,0,1,0,",x+=B+b+E+b+z+b+(N?1+-z/N:1)+")",P[Mt]=x};h=Bt.prototype,h.x=h.y=h.z=h.skewX=h.skewY=h.rotation=h.rotationX=h.rotationY=h.zOrigin=h.xPercent=h.yPercent=h.xOffset=h.yOffset=0,h.scaleX=h.scaleY=h.scaleZ=1,Tt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,n,i,r,o,u){if(i._lastParsedTransform===u)return r;i._lastParsedTransform=u;var l,h=u.scale&&"function"==typeof u.scale?u.scale:0;"function"==typeof u[n]&&(l=u[n],u[n]=e),h&&(u.scale=h(m,t));var c,f,d,p,_,g,y,x,b,w=t._gsTransform,S=t.style,C=1e-6,T=kt.length,P=u,A={},k="transformOrigin",M=Ut(t,s,!0,P.parseTransform),O=P.transform&&("function"==typeof P.transform?P.transform(m,v):P.transform);if(i._transform=M,O&&"string"==typeof O&&Mt)f=W.style,f[Mt]=O,f.display="block",f.position="absolute",V.body.appendChild(W),c=Ut(W,null,!1),M.svg&&(g=M.xOrigin,y=M.yOrigin,c.x-=M.xOffset,c.y-=M.yOffset,(P.transformOrigin||P.svgOrigin)&&(O={},Nt(t,ut(P.transformOrigin),O,P.svgOrigin,P.smoothOrigin,!0),g=O.xOrigin,y=O.yOrigin,c.x-=O.xOffset-M.xOffset,c.y-=O.yOffset-M.yOffset),(g||y)&&(x=Wt(W,!0),c.x-=g-(g*x[0]+y*x[2]),c.y-=y-(g*x[1]+y*x[3]))),V.body.removeChild(W),c.perspective||(c.perspective=M.perspective),null!=P.xPercent&&(c.xPercent=ht(P.xPercent,M.xPercent)),null!=P.yPercent&&(c.yPercent=ht(P.yPercent,M.yPercent));else if("object"==typeof P){if(c={scaleX:ht(null!=P.scaleX?P.scaleX:P.scale,M.scaleX),scaleY:ht(null!=P.scaleY?P.scaleY:P.scale,M.scaleY),scaleZ:ht(P.scaleZ,M.scaleZ),x:ht(P.x,M.x),y:ht(P.y,M.y),z:ht(P.z,M.z),xPercent:ht(P.xPercent,M.xPercent),yPercent:ht(P.yPercent,M.yPercent),perspective:ht(P.transformPerspective,M.perspective)},_=P.directionalRotation,null!=_)if("object"==typeof _)for(f in _)P[f]=_[f];else P.rotation=_;"string"==typeof P.x&&P.x.indexOf("%")!==-1&&(c.x=0,c.xPercent=ht(P.x,M.xPercent)),"string"==typeof P.y&&P.y.indexOf("%")!==-1&&(c.y=0,c.yPercent=ht(P.y,M.yPercent)),c.rotation=ct("rotation"in P?P.rotation:"shortRotation"in P?P.shortRotation+"_short":"rotationZ"in P?P.rotationZ:M.rotation,M.rotation,"rotation",A),Rt&&(c.rotationX=ct("rotationX"in P?P.rotationX:"shortRotationX"in P?P.shortRotationX+"_short":M.rotationX||0,M.rotationX,"rotationX",A),c.rotationY=ct("rotationY"in P?P.rotationY:"shortRotationY"in P?P.shortRotationY+"_short":M.rotationY||0,M.rotationY,"rotationY",A)),c.skewX=ct(P.skewX,M.skewX),c.skewY=ct(P.skewY,M.skewY)}for(Rt&&null!=P.force3D&&(M.force3D=P.force3D,p=!0),M.skewType=P.skewType||M.skewType||a.defaultSkewType,d=M.force3D||M.z||M.rotationX||M.rotationY||c.z||c.rotationX||c.rotationY||c.perspective,d||null==P.scale||(c.scaleZ=1);--T>-1;)b=kt[T],O=c[b]-M[b],(O>C||O<-C||null!=P[b]||null!=F[b])&&(p=!0,r=new xt(M,b,M[b],O,r),b in A&&(r.e=A[b]),r.xs0=0,r.plugin=o,i._overwriteProps.push(r.n));return O=P.transformOrigin,M.svg&&(O||P.svgOrigin)&&(g=M.xOffset,y=M.yOffset,Nt(t,ut(O),c,P.svgOrigin,P.smoothOrigin),r=bt(M,"xOrigin",(w?M:c).xOrigin,c.xOrigin,r,k),r=bt(M,"yOrigin",(w?M:c).yOrigin,c.yOrigin,r,k),g===M.xOffset&&y===M.yOffset||(r=bt(M,"xOffset",w?g:M.xOffset,M.xOffset,r,k),r=bt(M,"yOffset",w?y:M.yOffset,M.yOffset,r,k)),O="0px 0px"),(O||Rt&&d&&M.zOrigin)&&(Mt?(p=!0,b=It,O=(O||tt(t,b,s,!1,"50% 50%"))+"",r=new xt(S,b,0,0,r,(-1),k),r.b=S[b],r.plugin=o,Rt?(f=M.zOrigin,O=O.split(" "),M.zOrigin=(O.length>2&&(0===f||"0px"!==O[2])?parseFloat(O[2]):f)||0,r.xs0=r.e=O[0]+" "+(O[1]||"50%")+" 0px",r=new xt(M,"zOrigin",0,0,r,(-1),r.n),r.b=f,r.xs0=r.e=M.zOrigin):r.xs0=r.e=O):ut(O+"",M)),p&&(i._transformType=M.svg&&At||!d&&3!==this._transformType?2:3),l&&(u[n]=l),h&&(u.scale=h),r},prefix:!0}),Tt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Tt("borderRadius",{defaultValue:"0px",parser:function(t,e,n,i,o,a){e=this.format(e);var u,l,h,c,f,d,p,_,g,v,m,y,x,b,w,S,C=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],T=t.style;for(g=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),u=e.split(" "),l=0;l<C.length;l++)this.p.indexOf("border")&&(C[l]=K(C[l])),f=c=tt(t,C[l],s,!1,"0px"),f.indexOf(" ")!==-1&&(c=f.split(" "),f=c[0],c=c[1]),d=h=u[l],p=parseFloat(f),y=f.substr((p+"").length),x="="===d.charAt(1),x?(_=parseInt(d.charAt(0)+"1",10),d=d.substr(2),_*=parseFloat(d),m=d.substr((_+"").length-(_<0?1:0))||""):(_=parseFloat(d),m=d.substr((_+"").length)),""===m&&(m=r[n]||y),m!==y&&(b=et(t,"borderLeft",p,y),w=et(t,"borderTop",p,y),"%"===m?(f=b/g*100+"%",c=w/v*100+"%"):"em"===m?(S=et(t,"borderLeft",1,"em"),f=b/S+"em",c=w/S+"em"):(f=b+"px",c=w+"px"),x&&(d=parseFloat(f)+_+m,h=parseFloat(c)+_+m)),o=wt(T,C[l],f+" "+c,d+" "+h,!1,"0px",o);return o},prefix:!0,formatter:vt("0px 0px 0px 0px",!1,!0)}),Tt("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,n,i,r,o){return wt(t.style,n,this.format(tt(t,n,s,!1,"0px 0px")),this.format(e),!1,"0px",r)},prefix:!0,formatter:vt("0px 0px",!1,!0)}),Tt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,n,i,r,o){var a,u,l,h,c,f,d="background-position",p=s||Q(t,null),_=this.format((p?g?p.getPropertyValue(d+"-x")+" "+p.getPropertyValue(d+"-y"):p.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(_.indexOf("%")!==-1!=(v.indexOf("%")!==-1)&&v.split(",").length<2&&(f=tt(t,"backgroundImage").replace(O,""),f&&"none"!==f)){for(a=_.split(" "),u=v.split(" "),U.setAttribute("src",f),l=2;--l>-1;)_=a[l],h=_.indexOf("%")!==-1,h!==(u[l].indexOf("%")!==-1)&&(c=0===l?t.offsetWidth-U.width:t.offsetHeight-U.height,a[l]=h?parseFloat(_)/100*c+"px":parseFloat(_)/c*100+"%");_=a.join(" ")}return this.parseComplex(t.style,_,v,r,o)},formatter:ut}),Tt("backgroundSize",{defaultValue:"0 0",formatter:function(t){return t+="",ut(t.indexOf(" ")===-1?t+" "+t:t)}}),Tt("perspective",{defaultValue:"0px",prefix:!0}),Tt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Tt("transformStyle",{prefix:!0}),Tt("backfaceVisibility",{prefix:!0}),Tt("userSelect",{prefix:!0}),Tt("margin",{parser:mt("marginTop,marginRight,marginBottom,marginLeft")}),Tt("padding",{parser:mt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Tt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,n,i,r,o){var a,u,l;return g<9?(u=t.currentStyle,l=g<8?" ":",",a="rect("+u.clipTop+l+u.clipRight+l+u.clipBottom+l+u.clipLeft+")",e=this.format(e).split(",").join(l)):(a=this.format(tt(t,this.p,s,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,r,o)}}),Tt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Tt("autoRound,strictUnits",{parser:function(t,e,n,i,r){return r}}),Tt("border",{defaultValue:"0px solid #000",parser:function(t,e,n,i,r,o){var a=tt(t,"borderTopWidth",s,!1,"0px"),u=this.format(e).split(" "),l=u[0].replace(S,"");return"px"!==l&&(a=parseFloat(a)/et(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(a+" "+tt(t,"borderTopStyle",s,!1,"solid")+" "+tt(t,"borderTopColor",s,!1,"#000")),u.join(" "),r,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(gt)||["#000"])[0]}}),Tt("borderWidth",{parser:mt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Tt("float,cssFloat,styleFloat",{parser:function(t,e,n,i,r,s){var o=t.style,a="cssFloat"in o?"cssFloat":"styleFloat";return new xt(o,a,0,0,r,(-1),n,(!1),0,o[a],e)}});var Yt=function(t){var e,n=this.t,i=n.filter||tt(this.data,"filter")||"",r=this.s+this.c*t|0;100===r&&(i.indexOf("atrix(")===-1&&i.indexOf("radient(")===-1&&i.indexOf("oader(")===-1?(n.removeAttribute("filter"),e=!tt(this.data,"filter")):(n.filter=i.replace(P,""),e=!0)),e||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),i.indexOf("pacity")===-1?0===r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(C,"opacity="+r))};Tt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,n,i,r,o){var a=parseFloat(tt(t,"opacity",s,!1,"1")),u=t.style,l="autoAlpha"===n;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),l&&1===a&&"hidden"===tt(t,"visibility",s)&&0!==e&&(a=0),Y?r=new xt(u,"opacity",a,e-a,r):(r=new xt(u,"opacity",100*a,100*(e-a),r),r.xn1=l?1:0,u.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=o,r.setRatio=Yt),l&&(r=new xt(u,"visibility",0,0,r,(-1),null,(!1),0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit"),r.xs0="inherit",i._overwriteProps.push(r.n),i._overwriteProps.push(n)),r}});var Gt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(k,"-$1").toLowerCase())):t.removeAttribute(e))},Zt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,n=this.t.style;e;)e.v?n[e.p]=e.v:Gt(n,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Tt("className",{parser:function(t,e,n,r,o,a,u){var l,h,c,f,d,p=t.getAttribute("class")||"",_=t.style.cssText;if(o=r._classNamePT=new xt(t,n,0,0,o,2),o.setRatio=Zt,o.pr=-11,i=!0,o.b=p,h=it(t,s),c=t._gsClassPT){for(f={},d=c.data;d;)f[d.p]=1,d=d._next;c.setRatio(1)}return t._gsClassPT=o,o.e="="!==e.charAt(1)?e:p.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",o.e),l=rt(t,h,it(t),u,f),t.setAttribute("class",p),o.data=l.firstMPT,t.style.cssText=_,o=o.xfirst=r.parse(t,l.difs,o,a)}});var $t=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,n,i,r,s,o=this.t.style,a=l.transform.parse;if("all"===this.e)o.cssText="",r=!0;else for(e=this.e.split(" ").join("").split(","),i=e.length;--i>-1;)n=e[i],l[n]&&(l[n].parse===a?r=!0:n="transformOrigin"===n?It:l[n].p),Gt(o,n);r&&(Gt(o,Mt),s=this.t._gsTransform,s&&(s.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Tt("clearProps",{parser:function(t,e,n,r,s){return s=new xt(t,n,0,0,s,2),s.setRatio=$t,s.e=e,s.pr=-10,s.data=r._tween,i=!0,s}}),h="bezier,throwProps,physicsProps,physics2D".split(","),St=h.length;St--;)Pt(h[St]);h=a.prototype,h._firstPT=h._lastParsedTransform=h._transform=null,h._onInitTween=function(t,e,n,u){if(!t.nodeType)return!1;this._target=v=t,this._tween=n,this._vars=e,m=u,c=e.autoRound,i=!1,r=e.suffixMap||a.suffixMap,s=Q(t,""),o=this._overwriteProps;var h,p,g,y,x,b,w,S,C,P=t.style;if(f&&""===P.zIndex&&(h=tt(t,"zIndex",s),"auto"!==h&&""!==h||this._addLazySet(P,"zIndex",0)),"string"==typeof e&&(y=P.cssText,h=it(t,s),P.cssText=y+";"+e,h=rt(t,h,it(t)).difs,!Y&&T.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,P.cssText=y),e.className?this._firstPT=p=l.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=p=this.parse(t,e,null),this._transformType){for(C=3===this._transformType,Mt?d&&(f=!0,""===P.zIndex&&(w=tt(t,"zIndex",s),"auto"!==w&&""!==w||this._addLazySet(P,"zIndex",0)),_&&this._addLazySet(P,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(C?"visible":"hidden"))):P.zoom=1,g=p;g&&g._next;)g=g._next;S=new xt(t,"transform",0,0,null,2),this._linkCSSP(S,null,g),S.setRatio=Mt?Ht:Xt,S.data=this._transform||Ut(t,s,!0),S.tween=n,S.pr=-1,o.pop()}if(i){for(;p;){for(b=p._next,g=y;g&&g.pr>p.pr;)g=g._next;(p._prev=g?g._prev:x)?p._prev._next=p:y=p,(p._next=g)?g._prev=p:x=p,p=b}this._firstPT=y}return!0},h.parse=function(t,e,n,i){var o,a,u,h,f,d,p,_,g,y,x=t.style;for(o in e)d=e[o],"function"==typeof d&&(d=d(m,v)),a=l[o],a?n=a.parse(t,d,o,this,n,i,e):(f=tt(t,o,s)+"",g="string"==typeof d,"color"===o||"fill"===o||"stroke"===o||o.indexOf("Color")!==-1||g&&A.test(d)?(g||(d=pt(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),n=wt(x,o,f,d,!0,"transparent",n,0,i)):g&&L.test(d)?n=wt(x,o,f,d,!0,null,n,0,i):(u=parseFloat(f),p=u||0===u?f.substr((u+"").length):"",""!==f&&"auto"!==f||("width"===o||"height"===o?(u=at(t,o,s),p="px"):"left"===o||"top"===o?(u=nt(t,o,s),p="px"):(u="opacity"!==o?0:1,p="")),y=g&&"="===d.charAt(1),y?(h=parseInt(d.charAt(0)+"1",10),d=d.substr(2),h*=parseFloat(d),_=d.replace(S,"")):(h=parseFloat(d),_=g?d.replace(S,""):""),""===_&&(_=o in r?r[o]:p),d=h||0===h?(y?h+u:h)+_:e[o],p!==_&&""!==_&&(h||0===h)&&u&&(u=et(t,o,u,p),"%"===_?(u/=et(t,o,100,"%")/100,e.strictUnits!==!0&&(f=u+"%")):"em"===_||"rem"===_||"vw"===_||"vh"===_?u/=et(t,o,1,_):"px"!==_&&(h=et(t,o,h,_),_="px"),y&&(h||0===h)&&(d=h+u+_)),y&&(h+=u),!u&&0!==u||!h&&0!==h?void 0!==x[o]&&(d||d+""!="NaN"&&null!=d)?(n=new xt(x,o,h||u||0,0,n,(-1),o,(!1),0,f,d),n.xs0="none"!==d||"display"!==o&&o.indexOf("Style")===-1?d:f):Z("invalid "+o+" tween value: "+e[o]):(n=new xt(x,o,u,h-u,n,0,o,c!==!1&&("px"===_||"zIndex"===o),0,f,d),n.xs0=_))),i&&n&&!n.plugin&&(n.plugin=i);return n},h.setRatio=function(t){var e,n,i,r=this._firstPT,s=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):e<s&&e>-s&&(e=0),r.type)if(1===r.type)if(i=r.l,2===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else r.type===-1?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&r.type!==-1)if(e=Math.round(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+e+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=e+r.xs0;else r.t[r.p]=r.e;else r.setRatio(t);r=r._next}},h._enableTransforms=function(t){this._transform=this._transform||Ut(this._target,s,!0),this._transformType=this._transform.svg&&At||!t&&3!==this._transformType?2:3};var Jt=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};h._addLazySet=function(t,e,n){var i=this._firstPT=new xt(t,e,0,0,this._firstPT,2);i.e=n,i.setRatio=Jt,i.data=this},h._linkCSSP=function(t,e,n,i){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,i=!0),n?n._next=t:i||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=n),t},h._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},h._kill=function(e){var n,i,r,s=e;if(e.autoAlpha||e.alpha){s={};for(i in e)s[i]=e[i];s.opacity=1,s.autoAlpha&&(s.visibility=1)}for(e.className&&(n=this._classNamePT)&&(r=n.xfirst,r&&r._prev?this._linkCSSP(r._prev,n._next,r._prev._prev):r===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,r._prev),this._classNamePT=null),n=this._firstPT;n;)n.plugin&&n.plugin!==i&&n.plugin._kill&&(n.plugin._kill(e),i=n.plugin),n=n._next;return t.prototype._kill.call(this,s)};var Kt=function(t,e,n){var i,r,s,o;if(t.slice)for(r=t.length;--r>-1;)Kt(t[r],e,n);else for(i=t.childNodes,r=i.length;--r>-1;)s=i[r],o=s.type,s.style&&(e.push(it(s)),n&&n.push(s)),1!==o&&9!==o&&11!==o||!s.childNodes.length||Kt(s,e,n)};return a.cascadeTo=function(t,n,i){var r,s,o,a,u=e.to(t,n,i),l=[u],h=[],c=[],f=[],d=e._internals.reservedProps;for(t=u._targets||u.target,Kt(t,h,f),u.render(n,!0,!0),Kt(t,c),u.render(0,!0,!0),u._enabled(!0),r=f.length;--r>-1;)if(s=rt(f[r],h[r],c[r]),s.firstMPT){s=s.difs;for(o in i)d[o]&&(s[o]=i[o]);a={};for(o in s)a[o]=h[r][o];l.push(e.fromTo(f[r],n,a,s))}return l},t.activate([a]),a},!0),function(){var t=n._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,n){return this._tween=n,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},i=t.prototype;i._onInitAllProps=function(){for(var t,n,i,r=this._tween,s=r.vars.roundProps.join?r.vars.roundProps:r.vars.roundProps.split(","),o=s.length,a={},u=r._propLookup.roundProps;--o>-1;)a[s[o]]=Math.round;for(o=s.length;--o>-1;)for(t=s[o],n=r._firstPT;n;)i=n._next,n.pg?n.t._mod(a):n.n===t&&(2===n.f&&n.t?e(n.t._firstPT):(this._add(n.t,t,n.s,n.c),i&&(i._prev=n._prev),n._prev?n._prev._next=i:r._firstPT===n&&(r._firstPT=i),n._next=n._prev=null,r._propLookup[t]=u)),n=i;return!1},i._add=function(t,e,n,i){this._addTween(t,e,n,n+i,e,Math.round),this._overwriteProps.push(e)}}(),function(){n._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(t,e,n,i){var r,s;if("function"!=typeof t.setAttribute)return!1;for(r in e)s=e[r],"function"==typeof s&&(s=s(i,t)),this._addTween(t,"setAttribute",t.getAttribute(r)+"",s+"",r,!1,r),this._overwriteProps.push(r);return!0}})}(),n._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(t,e,n,i){"object"!=typeof e&&(e={rotation:e}),this.finals={};var r,s,o,a,u,l,h=e.useRadians===!0?2*Math.PI:360,c=1e-6;for(r in e)"useRadians"!==r&&(a=e[r],"function"==typeof a&&(a=a(i,t)),l=(a+"").split("_"),s=l[0],o=parseFloat("function"!=typeof t[r]?t[r]:t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]()),a=this.finals[r]="string"==typeof s&&"="===s.charAt(1)?o+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0,u=a-o,l.length&&(s=l.join("_"),s.indexOf("short")!==-1&&(u%=h,u!==u%(h/2)&&(u=u<0?u+h:u-h)),s.indexOf("_cw")!==-1&&u<0?u=(u+9999999999*h)%h-(u/h|0)*h:s.indexOf("ccw")!==-1&&u>0&&(u=(u-9999999999*h)%h-(u/h|0)*h)),(u>c||u<-c)&&(this._addTween(t,r,o,o+u,r),this._overwriteProps.push(r)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,n._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,r,s=n.GreenSockGlobals||n,o=s.com.greensock,a=2*Math.PI,u=Math.PI/2,l=o._class,h=function(e,n){var i=l("easing."+e,function(){},!0),r=i.prototype=new t;return r.constructor=i,r.getRatio=n,i},c=t.register||function(){},f=function(t,e,n,i,r){var s=l("easing."+t,{easeOut:new e,easeIn:new n,easeInOut:new i},!0);return c(s,t),s},d=function(t,e,n){this.t=t,this.v=e,n&&(this.next=n,n.prev=this,this.c=n.v-e,this.gap=n.t-t)},p=function(e,n){var i=l("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=i.prototype=new t;return r.constructor=i,r.getRatio=n,r.config=function(t){return new i(t)},i},_=f("Back",p("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),p("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),p("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),g=l("easing.SlowMo",function(t,e,n){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=n===!0},!0),v=g.prototype=new t;return v.constructor=g,v.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},g.ease=new g(.7,.7),v.config=g.config=function(t,e,n){return new g(t,e,n)},e=l("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0),v=e.prototype=new t,v.constructor=e,v.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},v.config=e.config=function(t){return new e(t)},i=l("easing.RoughEase",function(e){e=e||{};for(var n,i,r,s,o,a,u=e.taper||"none",l=[],h=0,c=0|(e.points||20),f=c,p=e.randomize!==!1,_=e.clamp===!0,g=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--f>-1;)n=p?Math.random():1/c*f,i=g?g.getRatio(n):n,"none"===u?r=v:"out"===u?(s=1-n,r=s*s*v):"in"===u?r=n*n*v:n<.5?(s=2*n,r=s*s*.5*v):(s=2*(1-n),r=s*s*.5*v),p?i+=Math.random()*r-.5*r:f%2?i+=.5*r:i-=.5*r,_&&(i>1?i=1:i<0&&(i=0)),l[h++]={x:n,y:i};for(l.sort(function(t,e){return t.x-e.x}),a=new d(1,1,null),f=c;--f>-1;)o=l[f],a=new d(o.x,o.y,a);this._prev=new d(0,0,0!==a.t?a:a.next)},!0),v=i.prototype=new t,v.constructor=i,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new i(t)},i.ease=new i,f("Bounce",h("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),h("BounceIn",function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),h("BounceInOut",function(t){var e=t<.5;return t=e?1-2*t:2*t-1,t=t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),f("Circ",h("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),h("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),h("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),r=function(e,n,i){var r=l("easing."+e,function(t,e){this._p1=t>=1?t:1,this._p2=(e||i)/(t<1?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2},!0),s=r.prototype=new t;return s.constructor=r,s.getRatio=n,s.config=function(t,e){return new r(t,e)},r},f("Elastic",r("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1},.3),r("ElasticIn",function(t){return-(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2))},.3),r("ElasticInOut",function(t){return(t*=2)<1?-.5*(this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)):this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1},.45)),f("Expo",h("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),h("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),h("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),f("Sine",h("SineOut",function(t){
return Math.sin(t*u)}),h("SineIn",function(t){return-Math.cos(t*u)+1}),h("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),l("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(s.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),_},!0)}),n._gsDefine&&n._gsQueue.pop()(),function(t,n){"use strict";var i={},r=t.document,s=t.GreenSockGlobals=t.GreenSockGlobals||t;if(!s.TweenLite){var o,a,u,l,h,c=function(t){var e,n=t.split("."),i=s;for(e=0;e<n.length;e++)i[n[e]]=i=i[n[e]]||{};return i},f=c("com.greensock"),d=1e-10,p=function(t){var e,n=[],i=t.length;for(e=0;e!==i;n.push(t[e++]));return n},_=function(){},g=function(){var t=Object.prototype.toString,e=t.call([]);return function(n){return null!=n&&(n instanceof Array||"object"==typeof n&&!!n.push&&t.call(n)===e)}}(),v={},m=function(r,o,a,u){this.sc=v[r]?v[r].sc:[],v[r]=this,this.gsClass=null,this.func=a;var l=[];this.check=function(h){for(var f,d,p,_,g,y=o.length,x=y;--y>-1;)(f=v[o[y]]||new m(o[y],[])).gsClass?(l[y]=f.gsClass,x--):h&&f.sc.push(this);if(0===x&&a){if(d=("com.greensock."+r).split("."),p=d.pop(),_=c(d.join("."))[p]=this.gsClass=a.apply(a,l),u)if(s[p]=i[p]=_,g="undefined"!=typeof e&&e.exports,!g&&"function"==typeof define&&define.amd)define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+r.split(".").pop(),[],function(){return _});else if(g)if(r===n){e.exports=i[n]=_;for(y in i)_[y]=i[y]}else i[n]&&(i[n][p]=_);for(y=0;y<this.sc.length;y++)this.sc[y].check()}},this.check(!0)},y=t._gsDefine=function(t,e,n,i){return new m(t,e,n,i)},x=f._class=function(t,e,n){return e=e||function(){},y(t,[],function(){return e},n),e};y.globals=s;var b=[0,0,1,1],w=x("easing.Ease",function(t,e,n,i){this._func=t,this._type=n||0,this._power=i||0,this._params=e?b.concat(e):b},!0),S=w.map={},C=w.register=function(t,e,n,i){for(var r,s,o,a,u=e.split(","),l=u.length,h=(n||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(s=u[l],r=i?x("easing."+s,null,!0):f.easing[s]||{},o=h.length;--o>-1;)a=h[o],S[s+"."+a]=S[a+s]=r[a]=t.getRatio?t:t[a]||new t};for(u=w.prototype,u._calcEnd=!1,u.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,n=this._power,i=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===e?1-i:2===e?i:t<.5?i/2:1-i/2},o=["Linear","Quad","Cubic","Quart","Quint,Strong"],a=o.length;--a>-1;)u=o[a]+",Power"+a,C(new w(null,null,1,a),u,"easeOut",!0),C(new w(null,null,2,a),u,"easeIn"+(0===a?",easeNone":"")),C(new w(null,null,3,a),u,"easeInOut");S.linear=f.easing.Linear.easeIn,S.swing=f.easing.Quad.easeInOut;var T=x("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});u=T.prototype,u.addEventListener=function(t,e,n,i,r){r=r||0;var s,o,a=this._listeners[t],u=0;for(this!==l||h||l.wake(),null==a&&(this._listeners[t]=a=[]),o=a.length;--o>-1;)s=a[o],s.c===e&&s.s===n?a.splice(o,1):0===u&&s.pr<r&&(u=o+1);a.splice(u,0,{c:e,s:n,up:i,pr:r})},u.removeEventListener=function(t,e){var n,i=this._listeners[t];if(i)for(n=i.length;--n>-1;)if(i[n].c===e)return void i.splice(n,1)},u.dispatchEvent=function(t){var e,n,i,r=this._listeners[t];if(r)for(e=r.length,e>1&&(r=r.slice(0)),n=this._eventTarget;--e>-1;)i=r[e],i&&(i.up?i.c.call(i.s||n,{type:t,target:n}):i.c.call(i.s||n))};var P=t.requestAnimationFrame,A=t.cancelAnimationFrame,k=Date.now||function(){return(new Date).getTime()},M=k();for(o=["ms","moz","webkit","o"],a=o.length;--a>-1&&!P;)P=t[o[a]+"RequestAnimationFrame"],A=t[o[a]+"CancelAnimationFrame"]||t[o[a]+"CancelRequestAnimationFrame"];x("Ticker",function(t,e){var n,i,s,o,a,u=this,c=k(),f=!(e===!1||!P)&&"auto",p=500,g=33,v="tick",m=function(t){var e,r,l=k()-M;l>p&&(c+=l-g),M+=l,u.time=(M-c)/1e3,e=u.time-a,(!n||e>0||t===!0)&&(u.frame++,a+=e+(e>=o?.004:o-e),r=!0),t!==!0&&(s=i(m)),r&&u.dispatchEvent(v)};T.call(u),u.time=u.frame=0,u.tick=function(){m(!0)},u.lagSmoothing=function(t,e){p=t||1/d,g=Math.min(e,p,0)},u.sleep=function(){null!=s&&(f&&A?A(s):clearTimeout(s),i=_,s=null,u===l&&(h=!1))},u.wake=function(t){null!==s?u.sleep():t?c+=-M+(M=k()):u.frame>10&&(M=k()-p+5),i=0===n?_:f&&P?P:function(t){return setTimeout(t,1e3*(a-u.time)+1|0)},u===l&&(h=!0),m(2)},u.fps=function(t){return arguments.length?(n=t,o=1/(n||60),a=this.time+o,void u.wake()):n},u.useRAF=function(t){return arguments.length?(u.sleep(),f=t,void u.fps(n)):f},u.fps(t),setTimeout(function(){"auto"===f&&u.frame<5&&"hidden"!==r.visibilityState&&u.useRAF(!1)},1500)}),u=f.Ticker.prototype=new f.events.EventDispatcher,u.constructor=f.Ticker;var O=x("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=e.immediateRender===!0,this.data=e.data,this._reversed=e.reversed===!0,Z){h||l.wake();var n=this.vars.useFrames?G:Z;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});l=O.ticker=new f.Ticker,u=O.prototype,u._dirty=u._gc=u._initted=u._paused=!1,u._totalTime=u._time=0,u._rawPrevTime=-1,u._next=u._last=u._onUpdate=u._timeline=u.timeline=null,u._paused=!1;var I=function(){h&&k()-M>2e3&&l.wake(),setTimeout(I,2e3)};I(),u.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},u.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},u.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},u.seek=function(t,e){return this.totalTime(Number(t),e!==!1)},u.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,e!==!1,!0)},u.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},u.render=function(t,e,n){},u.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},u.isActive=function(){var t,e=this._timeline,n=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<n+this.totalDuration()/this._timeScale},u._enabled=function(t,e){return h||l.wake(),this._gc=!t,this._active=this.isActive(),e!==!0&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},u._kill=function(t,e){return this._enabled(!1,!1)},u.kill=function(t,e){return this._kill(t,e),this},u._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},u._swapSelfInParams=function(t){for(var e=t.length,n=t.concat();--e>-1;)"{self}"===t[e]&&(n[e]=this);return n},u._callback=function(t){var e=this.vars,n=e[t],i=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this,s=i?i.length:0;switch(s){case 0:n.call(r);break;case 1:n.call(r,i[0]);break;case 2:n.call(r,i[0],i[1]);break;default:n.apply(r,i)}},u.eventCallback=function(t,e,n,i){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=g(n)&&n.join("").indexOf("{self}")!==-1?this._swapSelfInParams(n):n,r[t+"Scope"]=i),"onUpdate"===t&&(this._onUpdate=e)}return this},u.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},u.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},u.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},u.totalTime=function(t,e,n){if(h||l.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!n&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(t>i&&!n&&(t=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(L.length&&J(),this.render(t,e,!1),L.length&&J())}return this},u.progress=u.totalProgress=function(t,e){var n=this.duration();return arguments.length?this.totalTime(n*t,e):n?this._time/n:this.ratio},u.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},u.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},u.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||d,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,n=e||0===e?e:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},u.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},u.paused=function(t){if(!arguments.length)return this._paused;var e,n,i=this._timeline;return t!=this._paused&&i&&(h||t||l.wake(),e=i.rawTime(),n=e-this._pauseTime,!t&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&(e=i.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var R=x("core.SimpleTimeline",function(t){O.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});u=R.prototype=new O,u.constructor=R,u.kill()._gc=!1,u._first=u._last=u._recent=null,u._sortChildren=!1,u.add=u.insert=function(t,e,n,i){var r,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(s=t._startTime;r&&r._startTime>s;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},u._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},u.render=function(t,e,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)i=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,n):r.render((t-r._startTime)*r._timeScale,e,n)),r=i},u.rawTime=function(){return h||l.wake(),this._totalTime};var B=x("TweenLite",function(e,n,i){if(O.call(this,n,i),this.render=B.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:B.selector(e)||e;var r,s,o,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),u=this.vars.overwrite;if(this._overwrite=u=null==u?Y[B.defaultOverwrite]:"number"==typeof u?u>>0:Y[u],(a||e instanceof Array||e.push&&g(e))&&"number"!=typeof e[0])for(this._targets=o=p(e),this._propLookup=[],this._siblings=[],r=0;r<o.length;r++)s=o[r],s?"string"!=typeof s?s.length&&s!==t&&s[0]&&(s[0]===t||s[0].nodeType&&s[0].style&&!s.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(p(s))):(this._siblings[r]=K(s,this,!1),1===u&&this._siblings[r].length>1&&tt(s,this,null,1,this._siblings[r])):(s=o[r--]=B.selector(s),"string"==typeof s&&o.splice(r+1,1)):o.splice(r--,1);else this._propLookup={},this._siblings=K(e,this,!1),1===u&&this._siblings.length>1&&tt(e,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-d,this.render(Math.min(0,-this._delay)))},!0),E=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)},z=function(t,e){var n,i={};for(n in t)H[n]||n in e&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!W[n]||W[n]&&W[n]._autoCSS)||(i[n]=t[n],delete t[n]);t.css=i};u=B.prototype=new O,u.constructor=B,u.kill()._gc=!1,u.ratio=0,u._firstPT=u._targets=u._overwrittenProps=u._startAt=null,u._notifyPluginsOfEnabled=u._lazy=!1,B.version="1.19.1",B.defaultEase=u._ease=new w(null,null,1,1),B.defaultOverwrite="auto",B.ticker=l,B.autoSleep=120,B.lagSmoothing=function(t,e){l.lagSmoothing(t,e)},B.selector=t.$||t.jQuery||function(e){var n=t.$||t.jQuery;return n?(B.selector=n,n(e)):"undefined"==typeof r?e:r.querySelectorAll?r.querySelectorAll(e):r.getElementById("#"===e.charAt(0)?e.substr(1):e)};var L=[],D={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,F=function(t){for(var e,n=this._firstPT,i=1e-6;n;)e=n.blob?1===t?this.end:t?this.join(""):this.start:n.c*t+n.s,n.m?e=n.m(e,this._target||n.t):e<i&&e>-i&&!n.blob&&(e=0),n.f?n.fp?n.t[n.p](n.fp,e):n.t[n.p](e):n.t[n.p]=e,n=n._next},j=function(t,e,n,i){var r,s,o,a,u,l,h,c=[],f=0,d="",p=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",n&&(n(c),t=c[0],e=c[1]),c.length=0,r=t.match(N)||[],s=e.match(N)||[],i&&(i._next=null,i.blob=1,c._firstPT=c._applyPT=i),u=s.length,a=0;a<u;a++)h=s[a],l=e.substr(f,e.indexOf(h,f)-f),d+=l||!a?l:",",f+=l.length,p?p=(p+1)%5:"rgba("===l.substr(-5)&&(p=1),h===r[a]||r.length<=a?d+=h:(d&&(c.push(d),d=""),o=parseFloat(r[a]),c.push(o),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:o,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-o)||0,f:0,m:p&&p<4?Math.round:0}),f+=h.length;return d+=e.substr(f),d&&c.push(d),c.setRatio=F,c},V=function(t,e,n,i,r,s,o,a,u){"function"==typeof i&&(i=i(u||0,t));var l,h=typeof t[e],c="function"!==h?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),f="get"!==n?n:c?o?t[c](o):t[c]():t[e],d="string"==typeof i&&"="===i.charAt(1),p={t:t,p:e,s:f,f:"function"===h,pg:0,n:r||e,m:s?"function"==typeof s?s:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-f||0};if(("number"!=typeof f||"number"!=typeof i&&!d)&&(o||isNaN(f)||!d&&isNaN(i)||"boolean"==typeof f||"boolean"==typeof i?(p.fp=o,l=j(f,d?p.s+p.c:i,a||B.defaultStringFilter,p),p={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(p.s=parseFloat(f),d||(p.c=parseFloat(i)-p.s||0))),p.c)return(p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p},q=B._internals={isArray:g,isSelector:E,lazyTweens:L,blobDif:j},W=B._plugins={},U=q.tweenLookup={},X=0,H=q.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},Y={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},G=O._rootFramesTimeline=new R,Z=O._rootTimeline=new R,$=30,J=q.lazyRender=function(){var t,e=L.length;for(D={};--e>-1;)t=L[e],t&&t._lazy!==!1&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);L.length=0};Z._startTime=l.time,G._startTime=l.frame,Z._active=G._active=!0,setTimeout(J,1),O._updateRoot=B.render=function(){var t,e,n;if(L.length&&J(),Z.render((l.time-Z._startTime)*Z._timeScale,!1,!1),G.render((l.frame-G._startTime)*G._timeScale,!1,!1),L.length&&J(),l.frame>=$){$=l.frame+(parseInt(B.autoSleep,10)||120);for(n in U){for(e=U[n].tweens,t=e.length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete U[n]}if(n=Z._first,(!n||n._paused)&&B.autoSleep&&!G._first&&1===l._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||l.sleep()}}},l.addEventListener("tick",O._updateRoot);var K=function(t,e,n){var i,r,s=t._gsTweenID;if(U[s||(t._gsTweenID=s="t"+X++)]||(U[s]={target:t,tweens:[]}),e&&(i=U[s].tweens,i[r=i.length]=e,n))for(;--r>-1;)i[r]===e&&i.splice(r,1);return U[s].tweens},Q=function(t,e,n,i){var r,s,o=t.vars.onOverwrite;return o&&(r=o(t,e,n,i)),o=B.onOverwrite,o&&(s=o(t,e,n,i)),r!==!1&&s!==!1},tt=function(t,e,n,i,r){var s,o,a,u;if(1===i||i>=4){for(u=r.length,s=0;s<u;s++)if((a=r[s])!==e)a._gc||a._kill(null,t,e)&&(o=!0);else if(5===i)break;return o}var l,h=e._startTime+d,c=[],f=0,p=0===e._duration;for(s=r.length;--s>-1;)(a=r[s])===e||a._gc||a._paused||(a._timeline!==e._timeline?(l=l||et(e,0,p),0===et(a,l,p)&&(c[f++]=a)):a._startTime<=h&&a._startTime+a.totalDuration()/a._timeScale>h&&((p||!a._initted)&&h-a._startTime<=2e-10||(c[f++]=a)));for(s=f;--s>-1;)if(a=c[s],2===i&&a._kill(n,t,e)&&(o=!0),2!==i||!a._firstPT&&a._initted){if(2!==i&&!Q(a,e))continue;a._enabled(!1,!1)&&(o=!0)}return o},et=function(t,e,n){for(var i=t._timeline,r=i._timeScale,s=t._startTime;i._timeline;){if(s+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return s/=r,s>e?s-e:n&&s===e||!t._initted&&s-e<2*d?d:(s+=t.totalDuration()/t._timeScale/r)>e+d?0:s-e-d};u._init=function(){var t,e,n,i,r,s,o=this.vars,a=this._overwrittenProps,u=this._duration,l=!!o.immediateRender,h=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(i in o.startAt)r[i]=o.startAt[i];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&o.lazy!==!1,r.startAt=r.delay=null,this._startAt=B.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==u)return}else if(o.runBackwards&&0!==u)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),n={};for(i in o)H[i]&&"autoCSS"!==i||(n[i]=o[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=l&&o.lazy!==!1,n.immediateRender=l,this._startAt=B.to(this.target,0,n),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof w?h:"function"==typeof h?new w(h,o.easeParams):S[h]||B.defaultEase:B.defaultEase,o.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(s=this._targets.length,t=0;t<s;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&B._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=o.onUpdate,this._initted=!0},u._initProps=function(e,n,i,r,s){var o,a,u,l,h,c;if(null==e)return!1;D[e._gsTweenID]&&J(),this.vars.css||e.style&&e!==t&&e.nodeType&&W.css&&this.vars.autoCSS!==!1&&z(this.vars,e);for(o in this.vars)if(c=this.vars[o],H[o])c&&(c instanceof Array||c.push&&g(c))&&c.join("").indexOf("{self}")!==-1&&(this.vars[o]=c=this._swapSelfInParams(c,this));else if(W[o]&&(l=new W[o])._onInitTween(e,this.vars[o],this,s)){for(this._firstPT=h={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:l._priority,m:0},a=l._overwriteProps.length;--a>-1;)n[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(u=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),h._next&&(h._next._prev=h)}else n[o]=V.call(this,e,o,"get",c,o,0,null,this.vars.stringFilter,s);return r&&this._kill(r,e)?this._initProps(e,n,i,r,s):this._overwrite>1&&this._firstPT&&i.length>1&&tt(e,this,n,this._overwrite,i)?(this._kill(n,e),this._initProps(e,n,i,r,s)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(D[e._gsTweenID]=!0),u)},u.render=function(t,e,n){var i,r,s,o,a=this._time,u=this._duration,l=this._rawPrevTime;if(t>=u-1e-7&&t>=0)this._totalTime=this._time=u,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===u&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(t=0),(l<0||t<=0&&t>=-1e-7||l===d&&"isPause"!==this.data)&&l!==t&&(n=!0,l>d&&(r="onReverseComplete")),this._rawPrevTime=o=!e||t||l===t?t:d);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===u&&l>0)&&(r="onReverseComplete",i=this._reversed),t<0&&(this._active=!1,0===u&&(this._initted||!this.vars.lazy||n)&&(l>=0&&(l!==d||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=o=!e||t||l===t?t:d)),this._initted||(n=!0);else if(this._totalTime=this._time=t,this._easeType){var h=t/u,c=this._easeType,f=this._easePower;(1===c||3===c&&h>=.5)&&(h=1-h),3===c&&(h*=2),1===f?h*=h:2===f?h*=h*h:3===f?h*=h*h*h:4===f&&(h*=h*h*h*h),1===c?this.ratio=1-h:2===c?this.ratio=h:t/u<.5?this.ratio=h/2:this.ratio=1-h/2}else this.ratio=this._ease.getRatio(t/u);if(this._time!==a||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=l,L.push(this),void(this._lazy=[t,e]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/u):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==u||e||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(t<0&&this._startAt&&t!==-1e-4&&this._startAt.render(t,e,n),e||(this._time!==a||i||n)&&this._callback("onUpdate")),r&&(this._gc&&!n||(t<0&&this._startAt&&!this._onUpdate&&t!==-1e-4&&this._startAt.render(t,e,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===u&&this._rawPrevTime===d&&o!==d&&(this._rawPrevTime=0)))}},u._kill=function(t,e,n){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:B.selector(e)||e;var i,r,s,o,a,u,l,h,c,f=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((g(e)||E(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i],n)&&(u=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(l=t||a,h=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),n&&(B.onOverwrite||this.vars.onOverwrite)){for(s in l)a[s]&&(c||(c=[]),c.push(s));if((c||!t)&&!Q(this,n,e,c))return!1}for(s in l)(o=a[s])&&(f&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,u=!0),o.pg&&o.t._kill(l)&&(u=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete a[s]),h&&(r[s]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return u},u.invalidate=function(){return this._notifyPluginsOfEnabled&&B._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],O.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-d,this.render(Math.min(0,-this._delay))),this},u._enabled=function(t,e){if(h||l.wake(),t&&this._gc){var n,i=this._targets;if(i)for(n=i.length;--n>-1;)this._siblings[n]=K(i[n],this,!0);else this._siblings=K(this.target,this,!0)}return O.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&B._onPluginEvent(t?"_onEnable":"_onDisable",this)},B.to=function(t,e,n){return new B(t,e,n)},B.from=function(t,e,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new B(t,e,n)},B.fromTo=function(t,e,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new B(t,e,i)},B.delayedCall=function(t,e,n,i,r){return new B(e,0,{delay:t,onComplete:e,onCompleteParams:n,callbackScope:i,onReverseComplete:e,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},B.set=function(t,e){return new B(t,0,e)},B.getTweensOf=function(t,e){if(null==t)return[];t="string"!=typeof t?t:B.selector(t)||t;var n,i,r,s;if((g(t)||E(t))&&"number"!=typeof t[0]){for(n=t.length,i=[];--n>-1;)i=i.concat(B.getTweensOf(t[n],e));for(n=i.length;--n>-1;)for(s=i[n],r=n;--r>-1;)s===i[r]&&i.splice(n,1)}else for(i=K(t).concat(),n=i.length;--n>-1;)(i[n]._gc||e&&!i[n].isActive())&&i.splice(n,1);return i},B.killTweensOf=B.killDelayedCallsTo=function(t,e,n){"object"==typeof e&&(n=e,e=!1);for(var i=B.getTweensOf(t,e),r=i.length;--r>-1;)i[r]._kill(n,t)};var nt=x("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=nt.prototype},!0);if(u=nt.prototype,nt.version="1.19.0",nt.API=2,u._firstPT=null,u._addTween=V,u.setRatio=F,u._kill=function(t){var e,n=this._overwriteProps,i=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=n.length;--e>-1;)null!=t[n[e]]&&n.splice(e,1);for(;i;)null!=t[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},u._mod=u._roundProps=function(t){for(var e,n=this._firstPT;n;)e=t[this._propName]||null!=n.n&&t[n.n.split(this._propName+"_").join("")],e&&"function"==typeof e&&(2===n.f?n.t._applyPT.m=e:n.m=e),n=n._next},B._onPluginEvent=function(t,e){var n,i,r,s,o,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(o=a._next,i=r;i&&i.pr>a.pr;)i=i._next;(a._prev=i?i._prev:s)?a._prev._next=a:r=a,(a._next=i)?i._prev=a:s=a,a=o}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(n=!0),a=a._next;return n},nt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===nt.API&&(W[(new t[e])._propName]=t[e]);return!0},y.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,n=t.propName,i=t.priority||0,r=t.overwriteProps,s={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=x("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){nt.call(this,n,i),this._overwriteProps=r||[]},t.global===!0),a=o.prototype=new nt(n);a.constructor=o,o.API=t.API;for(e in s)"function"==typeof t[e]&&(a[s[e]]=t[e]);return o.version=t.version,nt.activate([o]),o},o=t._gsQueue){for(a=0;a<o.length;a++)o[a]();for(u in v)v[u].func||t.console.log("GSAP encountered missing dependency: "+u)}h=!1}}("undefined"!=typeof e&&e.exports&&"undefined"!=typeof t?t:this||window,"TweenMax")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){(function(t){(function(){function i(t,e){return t.set(e[0],e[1]),t}function r(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function o(t,e,n,i){for(var r=-1,s=null==t?0:t.length;++r<s;){var o=t[r];e(i,o,n(o),t)}return i}function a(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function u(t,e){for(var n=null==t?0:t.length;n--&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function h(t,e){for(var n=-1,i=null==t?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}function c(t,e){var n=null==t?0:t.length;return!!n&&w(t,e,0)>-1}function f(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function d(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function p(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function _(t,e,n,i){var r=-1,s=null==t?0:t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function g(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function v(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function m(t){return t.split("")}function y(t){return t.match(Ve)||[]}function x(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function b(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function w(t,e,n){return e===e?Z(t,e,n):b(t,C,n)}function S(t,e,n,i){for(var r=n-1,s=t.length;++r<s;)if(i(t[r],e))return r;return-1}function C(t){return t!==t}function T(t,e){var n=null==t?0:t.length;return n?O(t,e)/n:zt}function P(t){return function(e){return null==e?nt:e[t]}}function A(t){return function(e){return null==t?nt:t[e]}}function k(t,e,n,i,r){return r(t,function(t,r,s){n=i?(i=!1,t):e(n,t,r,s)}),n}function M(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function O(t,e){for(var n,i=-1,r=t.length;++i<r;){var s=e(t[i]);s!==nt&&(n=n===nt?s:n+s)}return n}function I(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function R(t,e){return d(e,function(e){return[e,t[e]]})}function B(t){return function(e){return t(e)}}function E(t,e){return d(e,function(e){return t[e]})}function z(t,e){return t.has(e)}function L(t,e){for(var n=-1,i=t.length;++n<i&&w(e,t[n],0)>-1;);return n}function D(t,e){for(var n=t.length;n--&&w(e,t[n],0)>-1;);return n}function N(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}function F(t){return"\\"+ti[t]}function j(t,e){return null==t?nt:t[e]}function V(t){return Xn.test(t)}function q(t){return Hn.test(t)}function W(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function U(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function X(t,e){return function(n){return t(e(n))}}function H(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var o=t[n];o!==e&&o!==lt||(t[n]=lt,s[r++]=n)}return s}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Z(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function $(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}function J(t){return V(t)?Q(t):vi(t)}function K(t){return V(t)?tt(t):m(t)}function Q(t){for(var e=Wn.lastIndex=0;Wn.test(t);)++e;return e}function tt(t){return t.match(Wn)||[]}function et(t){return t.match(Un)||[]}var nt,it="4.17.4",rt=200,st="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ot="Expected a function",at="__lodash_hash_undefined__",ut=500,lt="__lodash_placeholder__",ht=1,ct=2,ft=4,dt=1,pt=2,_t=1,gt=2,vt=4,mt=8,yt=16,xt=32,bt=64,wt=128,St=256,Ct=512,Tt=30,Pt="...",At=800,kt=16,Mt=1,Ot=2,It=3,Rt=1/0,Bt=9007199254740991,Et=1.7976931348623157e308,zt=NaN,Lt=4294967295,Dt=Lt-1,Nt=Lt>>>1,Ft=[["ary",wt],["bind",_t],["bindKey",gt],["curry",mt],["curryRight",yt],["flip",Ct],["partial",xt],["partialRight",bt],["rearg",St]],jt="[object Arguments]",Vt="[object Array]",qt="[object AsyncFunction]",Wt="[object Boolean]",Ut="[object Date]",Xt="[object DOMException]",Ht="[object Error]",Yt="[object Function]",Gt="[object GeneratorFunction]",Zt="[object Map]",$t="[object Number]",Jt="[object Null]",Kt="[object Object]",Qt="[object Promise]",te="[object Proxy]",ee="[object RegExp]",ne="[object Set]",ie="[object String]",re="[object Symbol]",se="[object Undefined]",oe="[object WeakMap]",ae="[object WeakSet]",ue="[object ArrayBuffer]",le="[object DataView]",he="[object Float32Array]",ce="[object Float64Array]",fe="[object Int8Array]",de="[object Int16Array]",pe="[object Int32Array]",_e="[object Uint8Array]",ge="[object Uint8ClampedArray]",ve="[object Uint16Array]",me="[object Uint32Array]",ye=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,be=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,Se=/[&<>"']/g,Ce=RegExp(we.source),Te=RegExp(Se.source),Pe=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,ke=/<%=([\s\S]+?)%>/g,Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Oe=/^\w*$/,Ie=/^\./,Re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Be=/[\\^$.*+?()[\]{}|]/g,Ee=RegExp(Be.source),ze=/^\s+|\s+$/g,Le=/^\s+/,De=/\s+$/,Ne=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,Ve=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qe=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ue=/\w*$/,Xe=/^[-+]0x[0-9a-f]+$/i,He=/^0b[01]+$/i,Ye=/^\[object .+?Constructor\]$/,Ge=/^0o[0-7]+$/i,Ze=/^(?:0|[1-9]\d*)$/,$e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,Ke=/['\n\r\u2028\u2029\\]/g,Qe="\\ud800-\\udfff",tn="\\u0300-\\u036f",en="\\ufe20-\\ufe2f",nn="\\u20d0-\\u20ff",rn=tn+en+nn,sn="\\u2700-\\u27bf",on="a-z\\xdf-\\xf6\\xf8-\\xff",an="\\xac\\xb1\\xd7\\xf7",un="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ln="\\u2000-\\u206f",hn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cn="A-Z\\xc0-\\xd6\\xd8-\\xde",fn="\\ufe0e\\ufe0f",dn=an+un+ln+hn,pn="[']",_n="["+Qe+"]",gn="["+dn+"]",vn="["+rn+"]",mn="\\d+",yn="["+sn+"]",xn="["+on+"]",bn="[^"+Qe+dn+mn+sn+on+cn+"]",wn="\\ud83c[\\udffb-\\udfff]",Sn="(?:"+vn+"|"+wn+")",Cn="[^"+Qe+"]",Tn="(?:\\ud83c[\\udde6-\\uddff]){2}",Pn="[\\ud800-\\udbff][\\udc00-\\udfff]",An="["+cn+"]",kn="\\u200d",Mn="(?:"+xn+"|"+bn+")",On="(?:"+An+"|"+bn+")",In="(?:"+pn+"(?:d|ll|m|re|s|t|ve))?",Rn="(?:"+pn+"(?:D|LL|M|RE|S|T|VE))?",Bn=Sn+"?",En="["+fn+"]?",zn="(?:"+kn+"(?:"+[Cn,Tn,Pn].join("|")+")"+En+Bn+")*",Ln="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Dn="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Nn=En+Bn+zn,Fn="(?:"+[yn,Tn,Pn].join("|")+")"+Nn,jn="(?:"+[Cn+vn+"?",vn,Tn,Pn,_n].join("|")+")",Vn=RegExp(pn,"g"),qn=RegExp(vn,"g"),Wn=RegExp(wn+"(?="+wn+")|"+jn+Nn,"g"),Un=RegExp([An+"?"+xn+"+"+In+"(?="+[gn,An,"$"].join("|")+")",On+"+"+Rn+"(?="+[gn,An+Mn,"$"].join("|")+")",An+"?"+Mn+"+"+In,An+"+"+Rn,Dn,Ln,mn,Fn].join("|"),"g"),Xn=RegExp("["+kn+Qe+rn+fn+"]"),Hn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gn=-1,Zn={};
Zn[he]=Zn[ce]=Zn[fe]=Zn[de]=Zn[pe]=Zn[_e]=Zn[ge]=Zn[ve]=Zn[me]=!0,Zn[jt]=Zn[Vt]=Zn[ue]=Zn[Wt]=Zn[le]=Zn[Ut]=Zn[Ht]=Zn[Yt]=Zn[Zt]=Zn[$t]=Zn[Kt]=Zn[ee]=Zn[ne]=Zn[ie]=Zn[oe]=!1;var $n={};$n[jt]=$n[Vt]=$n[ue]=$n[le]=$n[Wt]=$n[Ut]=$n[he]=$n[ce]=$n[fe]=$n[de]=$n[pe]=$n[Zt]=$n[$t]=$n[Kt]=$n[ee]=$n[ne]=$n[ie]=$n[re]=$n[_e]=$n[ge]=$n[ve]=$n[me]=!0,$n[Ht]=$n[Yt]=$n[oe]=!1;var Jn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Kn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ti={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ei=parseFloat,ni=parseInt,ii="object"==typeof t&&t&&t.Object===Object&&t,ri="object"==typeof self&&self&&self.Object===Object&&self,si=ii||ri||Function("return this")(),oi="object"==typeof n&&n&&!n.nodeType&&n,ai=oi&&"object"==typeof e&&e&&!e.nodeType&&e,ui=ai&&ai.exports===oi,li=ui&&ii.process,hi=function(){try{return li&&li.binding&&li.binding("util")}catch(t){}}(),ci=hi&&hi.isArrayBuffer,fi=hi&&hi.isDate,di=hi&&hi.isMap,pi=hi&&hi.isRegExp,_i=hi&&hi.isSet,gi=hi&&hi.isTypedArray,vi=P("length"),mi=A(Jn),yi=A(Kn),xi=A(Qn),bi=function Si(t){function e(t){if(lu(t)&&!bf(t)&&!(t instanceof A)){if(t instanceof m)return t;if(xh.call(t,"__wrapped__"))return so(t)}return new m(t)}function n(){}function m(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=nt}function A(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lt,this.__views__=[]}function Z(){var t=new A(this.__wrapped__);return t.__actions__=jr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=jr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=jr(this.__views__),t}function Q(){if(this.__filtered__){var t=new A(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function tt(){var t=this.__wrapped__.value(),e=this.__dir__,n=bf(t),i=e<0,r=n?t.length:0,s=Ms(0,r,this.__views__),o=s.start,a=s.end,u=a-o,l=i?a:o-1,h=this.__iteratees__,c=h.length,f=0,d=$h(u,this.__takeCount__);if(!n||!i&&r==u&&d==u)return br(t,this.__actions__);var p=[];t:for(;u--&&f<d;){l+=e;for(var _=-1,g=t[l];++_<c;){var v=h[_],m=v.iteratee,y=v.type,x=m(g);if(y==Ot)g=x;else if(!x){if(y==Mt)continue t;break t}}p[f++]=g}return p}function Ve(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Qe(){this.__data__=oc?oc(null):{},this.size=0}function tn(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function en(t){var e=this.__data__;if(oc){var n=e[t];return n===at?nt:n}return xh.call(e,t)?e[t]:nt}function nn(t){var e=this.__data__;return oc?e[t]!==nt:xh.call(e,t)}function rn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=oc&&e===nt?at:e,this}function sn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function on(){this.__data__=[],this.size=0}function an(t){var e=this.__data__,n=Rn(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():Eh.call(e,n,1),--this.size,!0}function un(t){var e=this.__data__,n=Rn(e,t);return n<0?nt:e[n][1]}function ln(t){return Rn(this.__data__,t)>-1}function hn(t,e){var n=this.__data__,i=Rn(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function cn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function fn(){this.size=0,this.__data__={hash:new Ve,map:new(nc||sn),string:new Ve}}function dn(t){var e=Ts(this,t)["delete"](t);return this.size-=e?1:0,e}function pn(t){return Ts(this,t).get(t)}function _n(t){return Ts(this,t).has(t)}function gn(t,e){var n=Ts(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new cn;++e<n;)this.add(t[e])}function mn(t){return this.__data__.set(t,at),this}function yn(t){return this.__data__.has(t)}function xn(t){var e=this.__data__=new sn(t);this.size=e.size}function bn(){this.__data__=new sn,this.size=0}function wn(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}function Sn(t){return this.__data__.get(t)}function Cn(t){return this.__data__.has(t)}function Tn(t,e){var n=this.__data__;if(n instanceof sn){var i=n.__data__;if(!nc||i.length<rt-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new cn(i)}return n.set(t,e),this.size=n.size,this}function Pn(t,e){var n=bf(t),i=!n&&xf(t),r=!n&&!i&&Sf(t),s=!n&&!i&&!r&&kf(t),o=n||i||r||s,a=o?I(t.length,dh):[],u=a.length;for(var l in t)!e&&!xh.call(t,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ds(l,u))||a.push(l);return a}function An(t){var e=t.length;return e?t[nr(0,e-1)]:nt}function kn(t,e){return eo(jr(t),Nn(e,0,t.length))}function Mn(t){return eo(jr(t))}function On(t,e,n){(n===nt||Za(t[e],n))&&(n!==nt||e in t)||Ln(t,e,n)}function In(t,e,n){var i=t[e];xh.call(t,e)&&Za(i,n)&&(n!==nt||e in t)||Ln(t,e,n)}function Rn(t,e){for(var n=t.length;n--;)if(Za(t[n][0],e))return n;return-1}function Bn(t,e,n,i){return mc(t,function(t,r,s){e(i,t,n(t),s)}),i}function En(t,e){return t&&Vr(e,Uu(e),t)}function zn(t,e){return t&&Vr(e,Xu(e),t)}function Ln(t,e,n){"__proto__"==e&&Nh?Nh(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Dn(t,e){for(var n=-1,i=e.length,r=oh(i),s=null==t;++n<i;)r[n]=s?nt:Vu(t,e[n]);return r}function Nn(t,e,n){return t===t&&(n!==nt&&(t=t<=n?t:n),e!==nt&&(t=t>=e?t:e)),t}function Fn(t,e,n,i,r,s){var o,u=e&ht,l=e&ct,h=e&ft;if(n&&(o=r?n(t,i,r,s):n(t)),o!==nt)return o;if(!uu(t))return t;var c=bf(t);if(c){if(o=Rs(t),!u)return jr(t,o)}else{var f=Oc(t),d=f==Yt||f==Gt;if(Sf(t))return kr(t,u);if(f==Kt||f==jt||d&&!r){if(o=l||d?{}:Bs(t),!u)return l?Wr(t,zn(o,t)):qr(t,En(o,t))}else{if(!$n[f])return r?t:{};o=Es(t,f,Fn,u)}}s||(s=new xn);var p=s.get(t);if(p)return p;s.set(t,o);var _=h?l?bs:xs:l?Xu:Uu,g=c?nt:_(t);return a(g||t,function(i,r){g&&(r=i,i=t[r]),In(o,r,Fn(i,e,n,r,t,s))}),o}function jn(t){var e=Uu(t);return function(n){return Wn(n,t,e)}}function Wn(t,e,n){var i=n.length;if(null==t)return!i;for(t=ch(t);i--;){var r=n[i],s=e[r],o=t[r];if(o===nt&&!(r in t)||!s(o))return!1}return!0}function Un(t,e,n){if("function"!=typeof t)throw new ph(ot);return Bc(function(){t.apply(nt,n)},e)}function Xn(t,e,n,i){var r=-1,s=c,o=!0,a=t.length,u=[],l=e.length;if(!a)return u;n&&(e=d(e,B(n))),i?(s=f,o=!1):e.length>=rt&&(s=z,o=!1,e=new vn(e));t:for(;++r<a;){var h=t[r],p=null==n?h:n(h);if(h=i||0!==h?h:0,o&&p===p){for(var _=l;_--;)if(e[_]===p)continue t;u.push(h)}else s(e,p,i)||u.push(h)}return u}function Hn(t,e){var n=!0;return mc(t,function(t,i,r){return n=!!e(t,i,r)}),n}function Jn(t,e,n){for(var i=-1,r=t.length;++i<r;){var s=t[i],o=e(s);if(null!=o&&(a===nt?o===o&&!xu(o):n(o,a)))var a=o,u=s}return u}function Kn(t,e,n,i){var r=t.length;for(n=Pu(n),n<0&&(n=-n>r?0:r+n),i=i===nt||i>r?r:Pu(i),i<0&&(i+=r),i=n>i?0:Au(i);n<i;)t[n++]=e;return t}function Qn(t,e){var n=[];return mc(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function ti(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=Ls),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?ti(a,e-1,n,i,r):p(r,a):i||(r[r.length]=a)}return r}function ii(t,e){return t&&xc(t,e,Uu)}function ri(t,e){return t&&bc(t,e,Uu)}function oi(t,e){return h(e,function(e){return su(t[e])})}function ai(t,e){e=Pr(e,t);for(var n=0,i=e.length;null!=t&&n<i;)t=t[no(e[n++])];return n&&n==i?t:nt}function li(t,e,n){var i=e(t);return bf(t)?i:p(i,n(t))}function hi(t){return null==t?t===nt?se:Jt:Dh&&Dh in ch(t)?ks(t):Zs(t)}function vi(t,e){return t>e}function bi(t,e){return null!=t&&xh.call(t,e)}function Ci(t,e){return null!=t&&e in ch(t)}function Ti(t,e,n){return t>=$h(e,n)&&t<Zh(e,n)}function Pi(t,e,n){for(var i=n?f:c,r=t[0].length,s=t.length,o=s,a=oh(s),u=1/0,l=[];o--;){var h=t[o];o&&e&&(h=d(h,B(e))),u=$h(h.length,u),a[o]=!n&&(e||r>=120&&h.length>=120)?new vn(o&&h):nt}h=t[0];var p=-1,_=a[0];t:for(;++p<r&&l.length<u;){var g=h[p],v=e?e(g):g;if(g=n||0!==g?g:0,!(_?z(_,v):i(l,v,n))){for(o=s;--o;){var m=a[o];if(!(m?z(m,v):i(t[o],v,n)))continue t}_&&_.push(v),l.push(g)}}return l}function Ai(t,e,n,i){return ii(t,function(t,r,s){e(i,n(t),r,s)}),i}function ki(t,e,n){e=Pr(e,t),t=Js(t,e);var i=null==t?t:t[no(To(e))];return null==i?nt:s(i,t,n)}function Mi(t){return lu(t)&&hi(t)==jt}function Oi(t){return lu(t)&&hi(t)==ue}function Ii(t){return lu(t)&&hi(t)==Ut}function Ri(t,e,n,i,r){return t===e||(null==t||null==e||!lu(t)&&!lu(e)?t!==t&&e!==e:Bi(t,e,n,i,Ri,r))}function Bi(t,e,n,i,r,s){var o=bf(t),a=bf(e),u=o?Vt:Oc(t),l=a?Vt:Oc(e);u=u==jt?Kt:u,l=l==jt?Kt:l;var h=u==Kt,c=l==Kt,f=u==l;if(f&&Sf(t)){if(!Sf(e))return!1;o=!0,h=!1}if(f&&!h)return s||(s=new xn),o||kf(t)?gs(t,e,n,i,r,s):vs(t,e,u,n,i,r,s);if(!(n&dt)){var d=h&&xh.call(t,"__wrapped__"),p=c&&xh.call(e,"__wrapped__");if(d||p){var _=d?t.value():t,g=p?e.value():e;return s||(s=new xn),r(_,g,n,i,s)}}return!!f&&(s||(s=new xn),ms(t,e,n,i,r,s))}function Ei(t){return lu(t)&&Oc(t)==Zt}function zi(t,e,n,i){var r=n.length,s=r,o=!i;if(null==t)return!s;for(t=ch(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){a=n[r];var u=a[0],l=t[u],h=a[1];if(o&&a[2]){if(l===nt&&!(u in t))return!1}else{var c=new xn;if(i)var f=i(l,h,u,t,e,c);if(!(f===nt?Ri(h,l,dt|pt,i,c):f))return!1}}return!0}function Li(t){if(!uu(t)||qs(t))return!1;var e=su(t)?Ph:Ye;return e.test(io(t))}function Di(t){return lu(t)&&hi(t)==ee}function Ni(t){return lu(t)&&Oc(t)==ne}function Fi(t){return lu(t)&&au(t.length)&&!!Zn[hi(t)]}function ji(t){return"function"==typeof t?t:null==t?El:"object"==typeof t?bf(t)?Hi(t[0],t[1]):Xi(t):ql(t)}function Vi(t){if(!Ws(t))return Gh(t);var e=[];for(var n in ch(t))xh.call(t,n)&&"constructor"!=n&&e.push(n);return e}function qi(t){if(!uu(t))return Gs(t);var e=Ws(t),n=[];for(var i in t)("constructor"!=i||!e&&xh.call(t,i))&&n.push(i);return n}function Wi(t,e){return t<e}function Ui(t,e){var n=-1,i=$a(t)?oh(t.length):[];return mc(t,function(t,r,s){i[++n]=e(t,r,s)}),i}function Xi(t){var e=Ps(t);return 1==e.length&&e[0][2]?Xs(e[0][0],e[0][1]):function(n){return n===t||zi(n,t,e)}}function Hi(t,e){return Fs(t)&&Us(e)?Xs(no(t),e):function(n){var i=Vu(n,t);return i===nt&&i===e?Wu(n,t):Ri(e,i,dt|pt)}}function Yi(t,e,n,i,r){t!==e&&xc(e,function(s,o){if(uu(s))r||(r=new xn),Gi(t,e,o,n,Yi,i,r);else{var a=i?i(t[o],s,o+"",t,e,r):nt;a===nt&&(a=s),On(t,o,a)}},Xu)}function Gi(t,e,n,i,r,s,o){var a=t[n],u=e[n],l=o.get(u);if(l)return void On(t,n,l);var h=s?s(a,u,n+"",t,e,o):nt,c=h===nt;if(c){var f=bf(u),d=!f&&Sf(u),p=!f&&!d&&kf(u);h=u,f||d||p?bf(a)?h=a:Ja(a)?h=jr(a):d?(c=!1,h=kr(u,!0)):p?(c=!1,h=zr(u,!0)):h=[]:vu(u)||xf(u)?(h=a,xf(a)?h=Mu(a):(!uu(a)||i&&su(a))&&(h=Bs(u))):c=!1}c&&(o.set(u,h),r(h,u,i,s,o),o["delete"](u)),On(t,n,h)}function Zi(t,e){var n=t.length;if(n)return e+=e<0?n:0,Ds(e,n)?t[e]:nt}function $i(t,e,n){var i=-1;e=d(e.length?e:[El],B(Cs()));var r=Ui(t,function(t,n,r){var s=d(e,function(e){return e(t)});return{criteria:s,index:++i,value:t}});return M(r,function(t,e){return Dr(t,e,n)})}function Ji(t,e){return Ki(t,e,function(e,n){return Wu(t,n)})}function Ki(t,e,n){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=ai(t,o);n(a,o)&&ur(s,Pr(o,t),a)}return s}function Qi(t){return function(e){return ai(e,t)}}function tr(t,e,n,i){var r=i?S:w,s=-1,o=e.length,a=t;for(t===e&&(e=jr(e)),n&&(a=d(t,B(n)));++s<o;)for(var u=0,l=e[s],h=n?n(l):l;(u=r(a,h,u,i))>-1;)a!==t&&Eh.call(a,u,1),Eh.call(t,u,1);return t}function er(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==s){var s=r;Ds(r)?Eh.call(t,r,1):mr(t,r)}}return t}function nr(t,e){return t+Wh(Qh()*(e-t+1))}function ir(t,e,n,i){for(var r=-1,s=Zh(qh((e-t)/(n||1)),0),o=oh(s);s--;)o[i?s:++r]=t,t+=n;return o}function rr(t,e){var n="";if(!t||e<1||e>Bt)return n;do e%2&&(n+=t),e=Wh(e/2),e&&(t+=t);while(e);return n}function sr(t,e){return Ec($s(t,e,El),t+"")}function or(t){return An(il(t))}function ar(t,e){var n=il(t);return eo(n,Nn(e,0,n.length))}function ur(t,e,n,i){if(!uu(t))return t;e=Pr(e,t);for(var r=-1,s=e.length,o=s-1,a=t;null!=a&&++r<s;){var u=no(e[r]),l=n;if(r!=o){var h=a[u];l=i?i(h,u,a):nt,l===nt&&(l=uu(h)?h:Ds(e[r+1])?[]:{})}In(a,u,l),a=a[u]}return t}function lr(t){return eo(il(t))}function hr(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=oh(r);++i<r;)s[i]=t[i+e];return s}function cr(t,e){var n;return mc(t,function(t,i,r){return n=e(t,i,r),!n}),!!n}function fr(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e===e&&r<=Nt){for(;i<r;){var s=i+r>>>1,o=t[s];null!==o&&!xu(o)&&(n?o<=e:o<e)?i=s+1:r=s}return r}return dr(t,e,El,n)}function dr(t,e,n,i){e=n(e);for(var r=0,s=null==t?0:t.length,o=e!==e,a=null===e,u=xu(e),l=e===nt;r<s;){var h=Wh((r+s)/2),c=n(t[h]),f=c!==nt,d=null===c,p=c===c,_=xu(c);if(o)var g=i||p;else g=l?p&&(i||f):a?p&&f&&(i||!d):u?p&&f&&!d&&(i||!_):!d&&!_&&(i?c<=e:c<e);g?r=h+1:s=h}return $h(s,Dt)}function pr(t,e){for(var n=-1,i=t.length,r=0,s=[];++n<i;){var o=t[n],a=e?e(o):o;if(!n||!Za(a,u)){var u=a;s[r++]=0===o?0:o}}return s}function _r(t){return"number"==typeof t?t:xu(t)?zt:+t}function gr(t){if("string"==typeof t)return t;if(bf(t))return d(t,gr)+"";if(xu(t))return gc?gc.call(t):"";var e=t+"";return"0"==e&&1/t==-Rt?"-0":e}function vr(t,e,n){var i=-1,r=c,s=t.length,o=!0,a=[],u=a;if(n)o=!1,r=f;else if(s>=rt){var l=e?null:Pc(t);if(l)return Y(l);o=!1,r=z,u=new vn}else u=e?[]:a;t:for(;++i<s;){var h=t[i],d=e?e(h):h;if(h=n||0!==h?h:0,o&&d===d){for(var p=u.length;p--;)if(u[p]===d)continue t;e&&u.push(d),a.push(h)}else r(u,d,n)||(u!==a&&u.push(d),a.push(h))}return a}function mr(t,e){return e=Pr(e,t),t=Js(t,e),null==t||delete t[no(To(e))]}function yr(t,e,n,i){return ur(t,e,n(ai(t,e)),i)}function xr(t,e,n,i){for(var r=t.length,s=i?r:-1;(i?s--:++s<r)&&e(t[s],s,t););return n?hr(t,i?0:s,i?s+1:r):hr(t,i?s+1:0,i?r:s)}function br(t,e){var n=t;return n instanceof A&&(n=n.value()),_(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function wr(t,e,n){var i=t.length;if(i<2)return i?vr(t[0]):[];for(var r=-1,s=oh(i);++r<i;)for(var o=t[r],a=-1;++a<i;)a!=r&&(s[r]=Xn(s[r]||o,t[a],e,n));return vr(ti(s,1),e,n)}function Sr(t,e,n){for(var i=-1,r=t.length,s=e.length,o={};++i<r;){var a=i<s?e[i]:nt;n(o,t[i],a)}return o}function Cr(t){return Ja(t)?t:[]}function Tr(t){return"function"==typeof t?t:El}function Pr(t,e){return bf(t)?t:Fs(t,e)?[t]:zc(Iu(t))}function Ar(t,e,n){var i=t.length;return n=n===nt?i:n,!e&&n>=i?t:hr(t,e,n)}function kr(t,e){if(e)return t.slice();var n=t.length,i=Oh?Oh(n):new t.constructor(n);return t.copy(i),i}function Mr(t){var e=new t.constructor(t.byteLength);return new Mh(e).set(new Mh(t)),e}function Or(t,e){var n=e?Mr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ir(t,e,n){var r=e?n(U(t),ht):U(t);return _(r,i,new t.constructor)}function Rr(t){var e=new t.constructor(t.source,Ue.exec(t));return e.lastIndex=t.lastIndex,e}function Br(t,e,n){var i=e?n(Y(t),ht):Y(t);return _(i,r,new t.constructor)}function Er(t){return _c?ch(_c.call(t)):{}}function zr(t,e){var n=e?Mr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Lr(t,e){if(t!==e){var n=t!==nt,i=null===t,r=t===t,s=xu(t),o=e!==nt,a=null===e,u=e===e,l=xu(e);if(!a&&!l&&!s&&t>e||s&&o&&u&&!a&&!l||i&&o&&u||!n&&u||!r)return 1;if(!i&&!s&&!l&&t<e||l&&n&&r&&!i&&!s||a&&n&&r||!o&&r||!u)return-1}return 0}function Dr(t,e,n){for(var i=-1,r=t.criteria,s=e.criteria,o=r.length,a=n.length;++i<o;){var u=Lr(r[i],s[i]);if(u){if(i>=a)return u;var l=n[i];return u*("desc"==l?-1:1)}}return t.index-e.index}function Nr(t,e,n,i){for(var r=-1,s=t.length,o=n.length,a=-1,u=e.length,l=Zh(s-o,0),h=oh(u+l),c=!i;++a<u;)h[a]=e[a];for(;++r<o;)(c||r<s)&&(h[n[r]]=t[r]);for(;l--;)h[a++]=t[r++];return h}function Fr(t,e,n,i){for(var r=-1,s=t.length,o=-1,a=n.length,u=-1,l=e.length,h=Zh(s-a,0),c=oh(h+l),f=!i;++r<h;)c[r]=t[r];for(var d=r;++u<l;)c[d+u]=e[u];for(;++o<a;)(f||r<s)&&(c[d+n[o]]=t[r++]);return c}function jr(t,e){var n=-1,i=t.length;for(e||(e=oh(i));++n<i;)e[n]=t[n];return e}function Vr(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],u=i?i(n[a],t[a],a,n,t):nt;u===nt&&(u=t[a]),r?Ln(n,a,u):In(n,a,u)}return n}function qr(t,e){return Vr(t,kc(t),e)}function Wr(t,e){return Vr(t,Mc(t),e)}function Ur(t,e){return function(n,i){var r=bf(n)?o:Bn,s=e?e():{};return r(n,t,Cs(i,2),s)}}function Xr(t){return sr(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:nt,o=r>2?n[2]:nt;for(s=t.length>3&&"function"==typeof s?(r--,s):nt,o&&Ns(n[0],n[1],o)&&(s=r<3?nt:s,r=1),e=ch(e);++i<r;){var a=n[i];a&&t(e,a,i,s)}return e})}function Hr(t,e){return function(n,i){if(null==n)return n;if(!$a(n))return t(n,i);for(var r=n.length,s=e?r:-1,o=ch(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}function Yr(t){return function(e,n,i){for(var r=-1,s=ch(e),o=i(e),a=o.length;a--;){var u=o[t?a:++r];if(n(s[u],u,s)===!1)break}return e}}function Gr(t,e,n){function i(){var e=this&&this!==si&&this instanceof i?s:t;return e.apply(r?n:this,arguments)}var r=e&_t,s=Jr(t);return i}function Zr(t){return function(e){e=Iu(e);var n=V(e)?K(e):nt,i=n?n[0]:e.charAt(0),r=n?Ar(n,1).join(""):e.slice(1);return i[t]()+r}}function $r(t){return function(e){return _(Ml(ll(e).replace(Vn,"")),t,"")}}function Jr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=vc(t.prototype),i=t.apply(n,e);return uu(i)?i:n}}function Kr(t,e,n){function i(){for(var o=arguments.length,a=oh(o),u=o,l=Ss(i);u--;)a[u]=arguments[u];var h=o<3&&a[0]!==l&&a[o-1]!==l?[]:H(a,l);if(o-=h.length,o<n)return ls(t,e,es,i.placeholder,nt,a,h,nt,nt,n-o);var c=this&&this!==si&&this instanceof i?r:t;return s(c,this,a)}var r=Jr(t);return i}function Qr(t){return function(e,n,i){var r=ch(e);if(!$a(e)){var s=Cs(n,3);e=Uu(e),n=function(t){return s(r[t],t,r)}}var o=t(e,n,i);return o>-1?r[s?e[o]:o]:nt}}function ts(t){return ys(function(e){var n=e.length,i=n,r=m.prototype.thru;for(t&&e.reverse();i--;){var s=e[i];if("function"!=typeof s)throw new ph(ot);if(r&&!o&&"wrapper"==ws(s))var o=new m([],(!0))}for(i=o?i:n;++i<n;){s=e[i];var a=ws(s),u="wrapper"==a?Ac(s):nt;o=u&&Vs(u[0])&&u[1]==(wt|mt|xt|St)&&!u[4].length&&1==u[9]?o[ws(u[0])].apply(o,u[3]):1==s.length&&Vs(s)?o[a]():o.thru(s)}return function(){var t=arguments,i=t[0];if(o&&1==t.length&&bf(i))return o.plant(i).value();for(var r=0,s=n?e[r].apply(this,t):i;++r<n;)s=e[r].call(this,s);return s}})}function es(t,e,n,i,r,s,o,a,u,l){function h(){for(var v=arguments.length,m=oh(v),y=v;y--;)m[y]=arguments[y];if(p)var x=Ss(h),b=N(m,x);if(i&&(m=Nr(m,i,r,p)),s&&(m=Fr(m,s,o,p)),v-=b,p&&v<l){var w=H(m,x);return ls(t,e,es,h.placeholder,n,m,w,a,u,l-v)}var S=f?n:this,C=d?S[t]:t;return v=m.length,a?m=Ks(m,a):_&&v>1&&m.reverse(),c&&u<v&&(m.length=u),this&&this!==si&&this instanceof h&&(C=g||Jr(C)),C.apply(S,m)}var c=e&wt,f=e&_t,d=e&gt,p=e&(mt|yt),_=e&Ct,g=d?nt:Jr(t);return h}function ns(t,e){return function(n,i){return Ai(n,t,e(i),{})}}function is(t,e){return function(n,i){var r;if(n===nt&&i===nt)return e;if(n!==nt&&(r=n),i!==nt){if(r===nt)return i;"string"==typeof n||"string"==typeof i?(n=gr(n),i=gr(i)):(n=_r(n),i=_r(i)),r=t(n,i)}return r}}function rs(t){return ys(function(e){return e=d(e,B(Cs())),sr(function(n){var i=this;return t(e,function(t){return s(t,i,n)})})})}function ss(t,e){e=e===nt?" ":gr(e);var n=e.length;if(n<2)return n?rr(e,t):e;var i=rr(e,qh(t/J(e)));return V(e)?Ar(K(i),0,t).join(""):i.slice(0,t)}function os(t,e,n,i){function r(){for(var e=-1,u=arguments.length,l=-1,h=i.length,c=oh(h+u),f=this&&this!==si&&this instanceof r?a:t;++l<h;)c[l]=i[l];for(;u--;)c[l++]=arguments[++e];return s(f,o?n:this,c)}var o=e&_t,a=Jr(t);return r}function as(t){return function(e,n,i){return i&&"number"!=typeof i&&Ns(e,n,i)&&(n=i=nt),e=Tu(e),n===nt?(n=e,e=0):n=Tu(n),i=i===nt?e<n?1:-1:Tu(i),ir(e,n,i,t)}}function us(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ku(e),n=ku(n)),t(e,n)}}function ls(t,e,n,i,r,s,o,a,u,l){var h=e&mt,c=h?o:nt,f=h?nt:o,d=h?s:nt,p=h?nt:s;e|=h?xt:bt,e&=~(h?bt:xt),e&vt||(e&=~(_t|gt));var _=[t,e,r,d,c,p,f,a,u,l],g=n.apply(nt,_);return Vs(t)&&Rc(g,_),g.placeholder=i,Qs(g,t,e)}function hs(t){var e=hh[t];return function(t,n){if(t=ku(t),n=null==n?0:$h(Pu(n),292)){var i=(Iu(t)+"e").split("e"),r=e(i[0]+"e"+(+i[1]+n));return i=(Iu(r)+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return e(t)}}function cs(t){return function(e){var n=Oc(e);return n==Zt?U(e):n==ne?G(e):R(e,t(e))}}function fs(t,e,n,i,r,s,o,a){var u=e&gt;if(!u&&"function"!=typeof t)throw new ph(ot);var l=i?i.length:0;if(l||(e&=~(xt|bt),i=r=nt),o=o===nt?o:Zh(Pu(o),0),a=a===nt?a:Pu(a),l-=r?r.length:0,e&bt){var h=i,c=r;i=r=nt}var f=u?nt:Ac(t),d=[t,e,n,i,r,h,c,s,o,a];if(f&&Ys(d,f),t=d[0],e=d[1],n=d[2],i=d[3],r=d[4],a=d[9]=d[9]===nt?u?0:t.length:Zh(d[9]-l,0),!a&&e&(mt|yt)&&(e&=~(mt|yt)),e&&e!=_t)p=e==mt||e==yt?Kr(t,e,a):e!=xt&&e!=(_t|xt)||r.length?es.apply(nt,d):os(t,e,n,i);else var p=Gr(t,e,n);var _=f?wc:Rc;return Qs(_(p,d),t,e)}function ds(t,e,n,i){return t===nt||Za(t,vh[n])&&!xh.call(i,n)?e:t}function ps(t,e,n,i,r,s){return uu(t)&&uu(e)&&(s.set(e,t),Yi(t,e,nt,ps,s),s["delete"](e)),t}function _s(t){return vu(t)?nt:t}function gs(t,e,n,i,r,s){var o=n&dt,a=t.length,u=e.length;if(a!=u&&!(o&&u>a))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var h=-1,c=!0,f=n&pt?new vn:nt;for(s.set(t,e),s.set(e,t);++h<a;){var d=t[h],p=e[h];if(i)var _=o?i(p,d,h,e,t,s):i(d,p,h,t,e,s);if(_!==nt){if(_)continue;c=!1;break}if(f){if(!v(e,function(t,e){if(!z(f,e)&&(d===t||r(d,t,n,i,s)))return f.push(e)})){c=!1;break}}else if(d!==p&&!r(d,p,n,i,s)){c=!1;break}}return s["delete"](t),s["delete"](e),c}function vs(t,e,n,i,r,s,o){switch(n){case le:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!s(new Mh(t),new Mh(e)));case Wt:case Ut:case $t:return Za(+t,+e);case Ht:return t.name==e.name&&t.message==e.message;case ee:case ie:return t==e+"";case Zt:var a=U;case ne:var u=i&dt;if(a||(a=Y),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;i|=pt,o.set(t,e);var h=gs(a(t),a(e),i,r,s,o);return o["delete"](t),h;case re:if(_c)return _c.call(t)==_c.call(e)}return!1}function ms(t,e,n,i,r,s){var o=n&dt,a=xs(t),u=a.length,l=xs(e),h=l.length;if(u!=h&&!o)return!1;for(var c=u;c--;){var f=a[c];if(!(o?f in e:xh.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var _=o;++c<u;){f=a[c];var g=t[f],v=e[f];if(i)var m=o?i(v,g,f,e,t,s):i(g,v,f,t,e,s);if(!(m===nt?g===v||r(g,v,n,i,s):m)){p=!1;break}_||(_="constructor"==f)}if(p&&!_){var y=t.constructor,x=e.constructor;y!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x)&&(p=!1)}return s["delete"](t),s["delete"](e),p}function ys(t){return Ec($s(t,nt,vo),t+"")}function xs(t){return li(t,Uu,kc)}function bs(t){return li(t,Xu,Mc)}function ws(t){for(var e=t.name+"",n=uc[e],i=xh.call(uc,e)?n.length:0;i--;){var r=n[i],s=r.func;if(null==s||s==t)return r.name}return e}function Ss(t){var n=xh.call(e,"placeholder")?e:t;return n.placeholder}function Cs(){var t=e.iteratee||zl;return t=t===zl?ji:t,arguments.length?t(arguments[0],arguments[1]):t}function Ts(t,e){var n=t.__data__;return js(e)?n["string"==typeof e?"string":"hash"]:n.map}function Ps(t){for(var e=Uu(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Us(r)]}return e}function As(t,e){var n=j(t,e);return Li(n)?n:nt}function ks(t){var e=xh.call(t,Dh),n=t[Dh];try{t[Dh]=nt;var i=!0}catch(r){}var s=Sh.call(t);return i&&(e?t[Dh]=n:delete t[Dh]),s}function Ms(t,e,n){for(var i=-1,r=n.length;++i<r;){var s=n[i],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=$h(e,t+o);break;case"takeRight":t=Zh(t,e-o)}}return{start:t,end:e}}function Os(t){var e=t.match(Fe);return e?e[1].split(je):[]}function Is(t,e,n){e=Pr(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=no(e[i]);if(!(s=null!=t&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=null==t?0:t.length,!!r&&au(r)&&Ds(o,r)&&(bf(t)||xf(t)))}function Rs(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&xh.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Bs(t){return"function"!=typeof t.constructor||Ws(t)?{}:vc(Ih(t))}function Es(t,e,n,i){var r=t.constructor;switch(e){case ue:return Mr(t);case Wt:case Ut:return new r((+t));case le:return Or(t,i);case he:case ce:case fe:case de:case pe:case _e:case ge:case ve:case me:return zr(t,i);case Zt:return Ir(t,i,n);case $t:case ie:return new r(t);case ee:return Rr(t);case ne:return Br(t,i,n);case re:return Er(t)}}function zs(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(Ne,"{\n/* [wrapped with "+e+"] */\n")}function Ls(t){return bf(t)||xf(t)||!!(zh&&t&&t[zh])}function Ds(t,e){return e=null==e?Bt:e,!!e&&("number"==typeof t||Ze.test(t))&&t>-1&&t%1==0&&t<e}function Ns(t,e,n){if(!uu(n))return!1;var i=typeof e;return!!("number"==i?$a(n)&&Ds(e,n.length):"string"==i&&e in n)&&Za(n[e],t)}function Fs(t,e){if(bf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!xu(t))||(Oe.test(t)||!Me.test(t)||null!=e&&t in ch(e))}function js(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Vs(t){var n=ws(t),i=e[n];if("function"!=typeof i||!(n in A.prototype))return!1;if(t===i)return!0;var r=Ac(i);return!!r&&t===r[0]}function qs(t){return!!wh&&wh in t}function Ws(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||vh;return t===n}function Us(t){return t===t&&!uu(t)}function Xs(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==nt||t in ch(n)))}}function Hs(t){var e=za(t,function(t){return n.size===ut&&n.clear(),t}),n=e.cache;return e}function Ys(t,e){var n=t[1],i=e[1],r=n|i,s=r<(_t|gt|wt),o=i==wt&&n==mt||i==wt&&n==St&&t[7].length<=e[8]||i==(wt|St)&&e[7].length<=e[8]&&n==mt;if(!s&&!o)return t;i&_t&&(t[2]=e[2],r|=n&_t?0:vt);var a=e[3];if(a){var u=t[3];t[3]=u?Nr(u,a,e[4]):a,t[4]=u?H(t[3],lt):e[4]}return a=e[5],a&&(u=t[5],t[5]=u?Fr(u,a,e[6]):a,t[6]=u?H(t[5],lt):e[6]),a=e[7],a&&(t[7]=a),i&wt&&(t[8]=null==t[8]?e[8]:$h(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r,t}function Gs(t){var e=[];if(null!=t)for(var n in ch(t))e.push(n);return e}function Zs(t){return Sh.call(t)}function $s(t,e,n){return e=Zh(e===nt?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=Zh(i.length-e,0),a=oh(o);++r<o;)a[r]=i[e+r];r=-1;for(var u=oh(e+1);++r<e;)u[r]=i[r];return u[e]=n(a),s(t,this,u)}}function Js(t,e){return e.length<2?t:ai(t,hr(e,0,-1))}function Ks(t,e){for(var n=t.length,i=$h(e.length,n),r=jr(t);i--;){var s=e[i];t[i]=Ds(s,n)?r[s]:nt}return t}function Qs(t,e,n){var i=e+"";return Ec(t,zs(i,ro(Os(i),n)))}function to(t){var e=0,n=0;return function(){var i=Jh(),r=kt-(i-n);if(n=i,r>0){if(++e>=At)return arguments[0]}else e=0;return t.apply(nt,arguments)}}function eo(t,e){var n=-1,i=t.length,r=i-1;for(e=e===nt?i:e;++n<e;){var s=nr(n,r),o=t[s];t[s]=t[n],t[n]=o}return t.length=e,t}function no(t){if("string"==typeof t||xu(t))return t;var e=t+"";return"0"==e&&1/t==-Rt?"-0":e}function io(t){if(null!=t){try{return yh.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ro(t,e){return a(Ft,function(n){var i="_."+n[0];e&n[1]&&!c(t,i)&&t.push(i)}),t.sort()}function so(t){if(t instanceof A)return t.clone();var e=new m(t.__wrapped__,t.__chain__);return e.__actions__=jr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function oo(t,e,n){e=(n?Ns(t,e,n):e===nt)?1:Zh(Pu(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,s=0,o=oh(qh(i/e));r<i;)o[s++]=hr(t,r,r+=e);return o}function ao(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var s=t[e];s&&(r[i++]=s)}return r}function uo(){var t=arguments.length;if(!t)return[];for(var e=oh(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return p(bf(n)?jr(n):[n],ti(e,1))}function lo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===nt?1:Pu(e),hr(t,e<0?0:e,i)):[]}function ho(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===nt?1:Pu(e),e=i-e,hr(t,0,e<0?0:e)):[]}function co(t,e){return t&&t.length?xr(t,Cs(e,3),!0,!0):[]}function fo(t,e){return t&&t.length?xr(t,Cs(e,3),!0):[]}function po(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ns(t,e,n)&&(n=0,i=r),Kn(t,e,n,i)):[]}function _o(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Pu(n);return r<0&&(r=Zh(i+r,0)),b(t,Cs(e,3),r)}function go(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==nt&&(r=Pu(n),r=n<0?Zh(i+r,0):$h(r,i-1)),b(t,Cs(e,3),r,!0)}function vo(t){var e=null==t?0:t.length;return e?ti(t,1):[]}function mo(t){var e=null==t?0:t.length;return e?ti(t,Rt):[]}function yo(t,e){var n=null==t?0:t.length;return n?(e=e===nt?1:Pu(e),ti(t,e)):[]}function xo(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i}function bo(t){return t&&t.length?t[0]:nt}function wo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:Pu(n);return r<0&&(r=Zh(i+r,0)),w(t,e,r)}function So(t){var e=null==t?0:t.length;return e?hr(t,0,-1):[]}function Co(t,e){return null==t?"":Yh.call(t,e)}function To(t){var e=null==t?0:t.length;return e?t[e-1]:nt}function Po(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==nt&&(r=Pu(n),r=r<0?Zh(i+r,0):$h(r,i-1)),e===e?$(t,e,r):b(t,C,r,!0)}function Ao(t,e){return t&&t.length?Zi(t,Pu(e)):nt}function ko(t,e){return t&&t.length&&e&&e.length?tr(t,e):t}function Mo(t,e,n){return t&&t.length&&e&&e.length?tr(t,e,Cs(n,2)):t}function Oo(t,e,n){return t&&t.length&&e&&e.length?tr(t,e,nt,n):t}function Io(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],s=t.length;for(e=Cs(e,3);++i<s;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return er(t,r),n}function Ro(t){return null==t?t:tc.call(t)}function Bo(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Ns(t,e,n)?(e=0,n=i):(e=null==e?0:Pu(e),n=n===nt?i:Pu(n)),hr(t,e,n)):[]}function Eo(t,e){return fr(t,e)}function zo(t,e,n){return dr(t,e,Cs(n,2))}function Lo(t,e){var n=null==t?0:t.length;if(n){var i=fr(t,e);if(i<n&&Za(t[i],e))return i}return-1}function Do(t,e){return fr(t,e,!0)}function No(t,e,n){return dr(t,e,Cs(n,2),!0)}function Fo(t,e){var n=null==t?0:t.length;
if(n){var i=fr(t,e,!0)-1;if(Za(t[i],e))return i}return-1}function jo(t){return t&&t.length?pr(t):[]}function Vo(t,e){return t&&t.length?pr(t,Cs(e,2)):[]}function qo(t){var e=null==t?0:t.length;return e?hr(t,1,e):[]}function Wo(t,e,n){return t&&t.length?(e=n||e===nt?1:Pu(e),hr(t,0,e<0?0:e)):[]}function Uo(t,e,n){var i=null==t?0:t.length;return i?(e=n||e===nt?1:Pu(e),e=i-e,hr(t,e<0?0:e,i)):[]}function Xo(t,e){return t&&t.length?xr(t,Cs(e,3),!1,!0):[]}function Ho(t,e){return t&&t.length?xr(t,Cs(e,3)):[]}function Yo(t){return t&&t.length?vr(t):[]}function Go(t,e){return t&&t.length?vr(t,Cs(e,2)):[]}function Zo(t,e){return e="function"==typeof e?e:nt,t&&t.length?vr(t,nt,e):[]}function $o(t){if(!t||!t.length)return[];var e=0;return t=h(t,function(t){if(Ja(t))return e=Zh(t.length,e),!0}),I(e,function(e){return d(t,P(e))})}function Jo(t,e){if(!t||!t.length)return[];var n=$o(t);return null==e?n:d(n,function(t){return s(e,nt,t)})}function Ko(t,e){return Sr(t||[],e||[],In)}function Qo(t,e){return Sr(t||[],e||[],ur)}function ta(t){var n=e(t);return n.__chain__=!0,n}function ea(t,e){return e(t),t}function na(t,e){return e(t)}function ia(){return ta(this)}function ra(){return new m(this.value(),this.__chain__)}function sa(){this.__values__===nt&&(this.__values__=Cu(this.value()));var t=this.__index__>=this.__values__.length,e=t?nt:this.__values__[this.__index__++];return{done:t,value:e}}function oa(){return this}function aa(t){for(var e,i=this;i instanceof n;){var r=so(i);r.__index__=0,r.__values__=nt,e?s.__wrapped__=r:e=r;var s=r;i=i.__wrapped__}return s.__wrapped__=t,e}function ua(){var t=this.__wrapped__;if(t instanceof A){var e=t;return this.__actions__.length&&(e=new A(this)),e=e.reverse(),e.__actions__.push({func:na,args:[Ro],thisArg:nt}),new m(e,this.__chain__)}return this.thru(Ro)}function la(){return br(this.__wrapped__,this.__actions__)}function ha(t,e,n){var i=bf(t)?l:Hn;return n&&Ns(t,e,n)&&(e=nt),i(t,Cs(e,3))}function ca(t,e){var n=bf(t)?h:Qn;return n(t,Cs(e,3))}function fa(t,e){return ti(ma(t,e),1)}function da(t,e){return ti(ma(t,e),Rt)}function pa(t,e,n){return n=n===nt?1:Pu(n),ti(ma(t,e),n)}function _a(t,e){var n=bf(t)?a:mc;return n(t,Cs(e,3))}function ga(t,e){var n=bf(t)?u:yc;return n(t,Cs(e,3))}function va(t,e,n,i){t=$a(t)?t:il(t),n=n&&!i?Pu(n):0;var r=t.length;return n<0&&(n=Zh(r+n,0)),yu(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&w(t,e,n)>-1}function ma(t,e){var n=bf(t)?d:Ui;return n(t,Cs(e,3))}function ya(t,e,n,i){return null==t?[]:(bf(e)||(e=null==e?[]:[e]),n=i?nt:n,bf(n)||(n=null==n?[]:[n]),$i(t,e,n))}function xa(t,e,n){var i=bf(t)?_:k,r=arguments.length<3;return i(t,Cs(e,4),n,r,mc)}function ba(t,e,n){var i=bf(t)?g:k,r=arguments.length<3;return i(t,Cs(e,4),n,r,yc)}function wa(t,e){var n=bf(t)?h:Qn;return n(t,La(Cs(e,3)))}function Sa(t){var e=bf(t)?An:or;return e(t)}function Ca(t,e,n){e=(n?Ns(t,e,n):e===nt)?1:Pu(e);var i=bf(t)?kn:ar;return i(t,e)}function Ta(t){var e=bf(t)?Mn:lr;return e(t)}function Pa(t){if(null==t)return 0;if($a(t))return yu(t)?J(t):t.length;var e=Oc(t);return e==Zt||e==ne?t.size:Vi(t).length}function Aa(t,e,n){var i=bf(t)?v:cr;return n&&Ns(t,e,n)&&(e=nt),i(t,Cs(e,3))}function ka(t,e){if("function"!=typeof e)throw new ph(ot);return t=Pu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Ma(t,e,n){return e=n?nt:e,e=t&&null==e?t.length:e,fs(t,wt,nt,nt,nt,nt,e)}function Oa(t,e){var n;if("function"!=typeof e)throw new ph(ot);return t=Pu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=nt),n}}function Ia(t,e,n){e=n?nt:e;var i=fs(t,mt,nt,nt,nt,nt,nt,e);return i.placeholder=Ia.placeholder,i}function Ra(t,e,n){e=n?nt:e;var i=fs(t,yt,nt,nt,nt,nt,nt,e);return i.placeholder=Ra.placeholder,i}function Ba(t,e,n){function i(e){var n=f,i=d;return f=d=nt,m=e,_=t.apply(i,n)}function r(t){return m=t,g=Bc(a,e),y?i(t):_}function s(t){var n=t-v,i=t-m,r=e-n;return x?$h(r,p-i):r}function o(t){var n=t-v,i=t-m;return v===nt||n>=e||n<0||x&&i>=p}function a(){var t=lf();return o(t)?u(t):void(g=Bc(a,s(t)))}function u(t){return g=nt,b&&f?i(t):(f=d=nt,_)}function l(){g!==nt&&Tc(g),m=0,f=v=d=g=nt}function h(){return g===nt?_:u(lf())}function c(){var t=lf(),n=o(t);if(f=arguments,d=this,v=t,n){if(g===nt)return r(v);if(x)return g=Bc(a,e),i(v)}return g===nt&&(g=Bc(a,e)),_}var f,d,p,_,g,v,m=0,y=!1,x=!1,b=!0;if("function"!=typeof t)throw new ph(ot);return e=ku(e)||0,uu(n)&&(y=!!n.leading,x="maxWait"in n,p=x?Zh(ku(n.maxWait)||0,e):p,b="trailing"in n?!!n.trailing:b),c.cancel=l,c.flush=h,c}function Ea(t){return fs(t,Ct)}function za(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ph(ot);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(za.Cache||cn),n}function La(t){if("function"!=typeof t)throw new ph(ot);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Da(t){return Oa(2,t)}function Na(t,e){if("function"!=typeof t)throw new ph(ot);return e=e===nt?e:Pu(e),sr(t,e)}function Fa(t,e){if("function"!=typeof t)throw new ph(ot);return e=null==e?0:Zh(Pu(e),0),sr(function(n){var i=n[e],r=Ar(n,0,e);return i&&p(r,i),s(t,this,r)})}function ja(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new ph(ot);return uu(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Ba(t,e,{leading:i,maxWait:e,trailing:r})}function Va(t){return Ma(t,1)}function qa(t,e){return _f(Tr(e),t)}function Wa(){if(!arguments.length)return[];var t=arguments[0];return bf(t)?t:[t]}function Ua(t){return Fn(t,ft)}function Xa(t,e){return e="function"==typeof e?e:nt,Fn(t,ft,e)}function Ha(t){return Fn(t,ht|ft)}function Ya(t,e){return e="function"==typeof e?e:nt,Fn(t,ht|ft,e)}function Ga(t,e){return null==e||Wn(t,e,Uu(e))}function Za(t,e){return t===e||t!==t&&e!==e}function $a(t){return null!=t&&au(t.length)&&!su(t)}function Ja(t){return lu(t)&&$a(t)}function Ka(t){return t===!0||t===!1||lu(t)&&hi(t)==Wt}function Qa(t){return lu(t)&&1===t.nodeType&&!vu(t)}function tu(t){if(null==t)return!0;if($a(t)&&(bf(t)||"string"==typeof t||"function"==typeof t.splice||Sf(t)||kf(t)||xf(t)))return!t.length;var e=Oc(t);if(e==Zt||e==ne)return!t.size;if(Ws(t))return!Vi(t).length;for(var n in t)if(xh.call(t,n))return!1;return!0}function eu(t,e){return Ri(t,e)}function nu(t,e,n){n="function"==typeof n?n:nt;var i=n?n(t,e):nt;return i===nt?Ri(t,e,nt,n):!!i}function iu(t){if(!lu(t))return!1;var e=hi(t);return e==Ht||e==Xt||"string"==typeof t.message&&"string"==typeof t.name&&!vu(t)}function ru(t){return"number"==typeof t&&Hh(t)}function su(t){if(!uu(t))return!1;var e=hi(t);return e==Yt||e==Gt||e==qt||e==te}function ou(t){return"number"==typeof t&&t==Pu(t)}function au(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Bt}function uu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function lu(t){return null!=t&&"object"==typeof t}function hu(t,e){return t===e||zi(t,e,Ps(e))}function cu(t,e,n){return n="function"==typeof n?n:nt,zi(t,e,Ps(e),n)}function fu(t){return gu(t)&&t!=+t}function du(t){if(Ic(t))throw new uh(st);return Li(t)}function pu(t){return null===t}function _u(t){return null==t}function gu(t){return"number"==typeof t||lu(t)&&hi(t)==$t}function vu(t){if(!lu(t)||hi(t)!=Kt)return!1;var e=Ih(t);if(null===e)return!0;var n=xh.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&yh.call(n)==Ch}function mu(t){return ou(t)&&t>=-Bt&&t<=Bt}function yu(t){return"string"==typeof t||!bf(t)&&lu(t)&&hi(t)==ie}function xu(t){return"symbol"==typeof t||lu(t)&&hi(t)==re}function bu(t){return t===nt}function wu(t){return lu(t)&&Oc(t)==oe}function Su(t){return lu(t)&&hi(t)==ae}function Cu(t){if(!t)return[];if($a(t))return yu(t)?K(t):jr(t);if(Lh&&t[Lh])return W(t[Lh]());var e=Oc(t),n=e==Zt?U:e==ne?Y:il;return n(t)}function Tu(t){if(!t)return 0===t?t:0;if(t=ku(t),t===Rt||t===-Rt){var e=t<0?-1:1;return e*Et}return t===t?t:0}function Pu(t){var e=Tu(t),n=e%1;return e===e?n?e-n:e:0}function Au(t){return t?Nn(Pu(t),0,Lt):0}function ku(t){if("number"==typeof t)return t;if(xu(t))return zt;if(uu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=uu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(ze,"");var n=He.test(t);return n||Ge.test(t)?ni(t.slice(2),n?2:8):Xe.test(t)?zt:+t}function Mu(t){return Vr(t,Xu(t))}function Ou(t){return t?Nn(Pu(t),-Bt,Bt):0===t?t:0}function Iu(t){return null==t?"":gr(t)}function Ru(t,e){var n=vc(t);return null==e?n:En(n,e)}function Bu(t,e){return x(t,Cs(e,3),ii)}function Eu(t,e){return x(t,Cs(e,3),ri)}function zu(t,e){return null==t?t:xc(t,Cs(e,3),Xu)}function Lu(t,e){return null==t?t:bc(t,Cs(e,3),Xu)}function Du(t,e){return t&&ii(t,Cs(e,3))}function Nu(t,e){return t&&ri(t,Cs(e,3))}function Fu(t){return null==t?[]:oi(t,Uu(t))}function ju(t){return null==t?[]:oi(t,Xu(t))}function Vu(t,e,n){var i=null==t?nt:ai(t,e);return i===nt?n:i}function qu(t,e){return null!=t&&Is(t,e,bi)}function Wu(t,e){return null!=t&&Is(t,e,Ci)}function Uu(t){return $a(t)?Pn(t):Vi(t)}function Xu(t){return $a(t)?Pn(t,!0):qi(t)}function Hu(t,e){var n={};return e=Cs(e,3),ii(t,function(t,i,r){Ln(n,e(t,i,r),t)}),n}function Yu(t,e){var n={};return e=Cs(e,3),ii(t,function(t,i,r){Ln(n,i,e(t,i,r))}),n}function Gu(t,e){return Zu(t,La(Cs(e)))}function Zu(t,e){if(null==t)return{};var n=d(bs(t),function(t){return[t]});return e=Cs(e),Ki(t,n,function(t,n){return e(t,n[0])})}function $u(t,e,n){e=Pr(e,t);var i=-1,r=e.length;for(r||(r=1,t=nt);++i<r;){var s=null==t?nt:t[no(e[i])];s===nt&&(i=r,s=n),t=su(s)?s.call(t):s}return t}function Ju(t,e,n){return null==t?t:ur(t,e,n)}function Ku(t,e,n,i){return i="function"==typeof i?i:nt,null==t?t:ur(t,e,n,i)}function Qu(t,e,n){var i=bf(t),r=i||Sf(t)||kf(t);if(e=Cs(e,4),null==n){var s=t&&t.constructor;n=r?i?new s:[]:uu(t)&&su(s)?vc(Ih(t)):{}}return(r?a:ii)(t,function(t,i,r){return e(n,t,i,r)}),n}function tl(t,e){return null==t||mr(t,e)}function el(t,e,n){return null==t?t:yr(t,e,Tr(n))}function nl(t,e,n,i){return i="function"==typeof i?i:nt,null==t?t:yr(t,e,Tr(n),i)}function il(t){return null==t?[]:E(t,Uu(t))}function rl(t){return null==t?[]:E(t,Xu(t))}function sl(t,e,n){return n===nt&&(n=e,e=nt),n!==nt&&(n=ku(n),n=n===n?n:0),e!==nt&&(e=ku(e),e=e===e?e:0),Nn(ku(t),e,n)}function ol(t,e,n){return e=Tu(e),n===nt?(n=e,e=0):n=Tu(n),t=ku(t),Ti(t,e,n)}function al(t,e,n){if(n&&"boolean"!=typeof n&&Ns(t,e,n)&&(e=n=nt),n===nt&&("boolean"==typeof e?(n=e,e=nt):"boolean"==typeof t&&(n=t,t=nt)),t===nt&&e===nt?(t=0,e=1):(t=Tu(t),e===nt?(e=t,t=0):e=Tu(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Qh();return $h(t+r*(e-t+ei("1e-"+((r+"").length-1))),e)}return nr(t,e)}function ul(t){return td(Iu(t).toLowerCase())}function ll(t){return t=Iu(t),t&&t.replace($e,mi).replace(qn,"")}function hl(t,e,n){t=Iu(t),e=gr(e);var i=t.length;n=n===nt?i:Nn(Pu(n),0,i);var r=n;return n-=e.length,n>=0&&t.slice(n,r)==e}function cl(t){return t=Iu(t),t&&Te.test(t)?t.replace(Se,yi):t}function fl(t){return t=Iu(t),t&&Ee.test(t)?t.replace(Be,"\\$&"):t}function dl(t,e,n){t=Iu(t),e=Pu(e);var i=e?J(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return ss(Wh(r),n)+t+ss(qh(r),n)}function pl(t,e,n){t=Iu(t),e=Pu(e);var i=e?J(t):0;return e&&i<e?t+ss(e-i,n):t}function _l(t,e,n){t=Iu(t),e=Pu(e);var i=e?J(t):0;return e&&i<e?ss(e-i,n)+t:t}function gl(t,e,n){return n||null==e?e=0:e&&(e=+e),Kh(Iu(t).replace(Le,""),e||0)}function vl(t,e,n){return e=(n?Ns(t,e,n):e===nt)?1:Pu(e),rr(Iu(t),e)}function ml(){var t=arguments,e=Iu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function yl(t,e,n){return n&&"number"!=typeof n&&Ns(t,e,n)&&(e=n=nt),(n=n===nt?Lt:n>>>0)?(t=Iu(t),t&&("string"==typeof e||null!=e&&!Pf(e))&&(e=gr(e),!e&&V(t))?Ar(K(t),0,n):t.split(e,n)):[]}function xl(t,e,n){return t=Iu(t),n=null==n?0:Nn(Pu(n),0,t.length),e=gr(e),t.slice(n,n+e.length)==e}function bl(t,n,i){var r=e.templateSettings;i&&Ns(t,n,i)&&(n=nt),t=Iu(t),n=Bf({},n,r,ds);var s,o,a=Bf({},n.imports,r.imports,ds),u=Uu(a),l=E(a,u),h=0,c=n.interpolate||Je,f="__p += '",d=fh((n.escape||Je).source+"|"+c.source+"|"+(c===ke?We:Je).source+"|"+(n.evaluate||Je).source+"|$","g"),p="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Gn+"]")+"\n";t.replace(d,function(e,n,i,r,a,u){return i||(i=r),f+=t.slice(h,u).replace(Ke,F),n&&(s=!0,f+="' +\n__e("+n+") +\n'"),a&&(o=!0,f+="';\n"+a+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),f+="';\n";var _=n.variable;_||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(ye,""):f).replace(xe,"$1").replace(be,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=ed(function(){return lh(u,p+"return "+f).apply(nt,l)});if(g.source=f,iu(g))throw g;return g}function wl(t){return Iu(t).toLowerCase()}function Sl(t){return Iu(t).toUpperCase()}function Cl(t,e,n){if(t=Iu(t),t&&(n||e===nt))return t.replace(ze,"");if(!t||!(e=gr(e)))return t;var i=K(t),r=K(e),s=L(i,r),o=D(i,r)+1;return Ar(i,s,o).join("")}function Tl(t,e,n){if(t=Iu(t),t&&(n||e===nt))return t.replace(De,"");if(!t||!(e=gr(e)))return t;var i=K(t),r=D(i,K(e))+1;return Ar(i,0,r).join("")}function Pl(t,e,n){if(t=Iu(t),t&&(n||e===nt))return t.replace(Le,"");if(!t||!(e=gr(e)))return t;var i=K(t),r=L(i,K(e));return Ar(i,r).join("")}function Al(t,e){var n=Tt,i=Pt;if(uu(e)){var r="separator"in e?e.separator:r;n="length"in e?Pu(e.length):n,i="omission"in e?gr(e.omission):i}t=Iu(t);var s=t.length;if(V(t)){var o=K(t);s=o.length}if(n>=s)return t;var a=n-J(i);if(a<1)return i;var u=o?Ar(o,0,a).join(""):t.slice(0,a);if(r===nt)return u+i;if(o&&(a+=u.length-a),Pf(r)){if(t.slice(a).search(r)){var l,h=u;for(r.global||(r=fh(r.source,Iu(Ue.exec(r))+"g")),r.lastIndex=0;l=r.exec(h);)var c=l.index;u=u.slice(0,c===nt?a:c)}}else if(t.indexOf(gr(r),a)!=a){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i}function kl(t){return t=Iu(t),t&&Ce.test(t)?t.replace(we,xi):t}function Ml(t,e,n){return t=Iu(t),e=n?nt:e,e===nt?q(t)?et(t):y(t):t.match(e)||[]}function Ol(t){var e=null==t?0:t.length,n=Cs();return t=e?d(t,function(t){if("function"!=typeof t[1])throw new ph(ot);return[n(t[0]),t[1]]}):[],sr(function(n){for(var i=-1;++i<e;){var r=t[i];if(s(r[0],this,n))return s(r[1],this,n)}})}function Il(t){return jn(Fn(t,ht))}function Rl(t){return function(){return t}}function Bl(t,e){return null==t||t!==t?e:t}function El(t){return t}function zl(t){return ji("function"==typeof t?t:Fn(t,ht))}function Ll(t){return Xi(Fn(t,ht))}function Dl(t,e){return Hi(t,Fn(e,ht))}function Nl(t,e,n){var i=Uu(e),r=oi(e,i);null!=n||uu(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=oi(e,Uu(e)));var s=!(uu(n)&&"chain"in n&&!n.chain),o=su(t);return a(r,function(n){var i=e[n];t[n]=i,o&&(t.prototype[n]=function(){var e=this.__chain__;if(s||e){var n=t(this.__wrapped__),r=n.__actions__=jr(this.__actions__);return r.push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,p([this.value()],arguments))})}),t}function Fl(){return si._===this&&(si._=Th),this}function jl(){}function Vl(t){return t=Pu(t),sr(function(e){return Zi(e,t)})}function ql(t){return Fs(t)?P(no(t)):Qi(t)}function Wl(t){return function(e){return null==t?nt:ai(t,e)}}function Ul(){return[]}function Xl(){return!1}function Hl(){return{}}function Yl(){return""}function Gl(){return!0}function Zl(t,e){if(t=Pu(t),t<1||t>Bt)return[];var n=Lt,i=$h(t,Lt);e=Cs(e),t-=Lt;for(var r=I(i,e);++n<t;)e(n);return r}function $l(t){return bf(t)?d(t,no):xu(t)?[t]:jr(zc(Iu(t)))}function Jl(t){var e=++bh;return Iu(t)+e}function Kl(t){return t&&t.length?Jn(t,El,vi):nt}function Ql(t,e){return t&&t.length?Jn(t,Cs(e,2),vi):nt}function th(t){return T(t,El)}function eh(t,e){return T(t,Cs(e,2))}function nh(t){return t&&t.length?Jn(t,El,Wi):nt}function ih(t,e){return t&&t.length?Jn(t,Cs(e,2),Wi):nt}function rh(t){return t&&t.length?O(t,El):0}function sh(t,e){return t&&t.length?O(t,Cs(e,2)):0}t=null==t?si:wi.defaults(si.Object(),t,wi.pick(si,Yn));var oh=t.Array,ah=t.Date,uh=t.Error,lh=t.Function,hh=t.Math,ch=t.Object,fh=t.RegExp,dh=t.String,ph=t.TypeError,_h=oh.prototype,gh=lh.prototype,vh=ch.prototype,mh=t["__core-js_shared__"],yh=gh.toString,xh=vh.hasOwnProperty,bh=0,wh=function(){var t=/[^.]+$/.exec(mh&&mh.keys&&mh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Sh=vh.toString,Ch=yh.call(ch),Th=si._,Ph=fh("^"+yh.call(xh).replace(Be,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ah=ui?t.Buffer:nt,kh=t.Symbol,Mh=t.Uint8Array,Oh=Ah?Ah.allocUnsafe:nt,Ih=X(ch.getPrototypeOf,ch),Rh=ch.create,Bh=vh.propertyIsEnumerable,Eh=_h.splice,zh=kh?kh.isConcatSpreadable:nt,Lh=kh?kh.iterator:nt,Dh=kh?kh.toStringTag:nt,Nh=function(){try{var t=As(ch,"defineProperty");return t({},"",{}),t}catch(e){}}(),Fh=t.clearTimeout!==si.clearTimeout&&t.clearTimeout,jh=ah&&ah.now!==si.Date.now&&ah.now,Vh=t.setTimeout!==si.setTimeout&&t.setTimeout,qh=hh.ceil,Wh=hh.floor,Uh=ch.getOwnPropertySymbols,Xh=Ah?Ah.isBuffer:nt,Hh=t.isFinite,Yh=_h.join,Gh=X(ch.keys,ch),Zh=hh.max,$h=hh.min,Jh=ah.now,Kh=t.parseInt,Qh=hh.random,tc=_h.reverse,ec=As(t,"DataView"),nc=As(t,"Map"),ic=As(t,"Promise"),rc=As(t,"Set"),sc=As(t,"WeakMap"),oc=As(ch,"create"),ac=sc&&new sc,uc={},lc=io(ec),hc=io(nc),cc=io(ic),fc=io(rc),dc=io(sc),pc=kh?kh.prototype:nt,_c=pc?pc.valueOf:nt,gc=pc?pc.toString:nt,vc=function(){function t(){}return function(e){if(!uu(e))return{};if(Rh)return Rh(e);t.prototype=e;var n=new t;return t.prototype=nt,n}}();e.templateSettings={escape:Pe,evaluate:Ae,interpolate:ke,variable:"",imports:{_:e}},e.prototype=n.prototype,e.prototype.constructor=e,m.prototype=vc(n.prototype),m.prototype.constructor=m,A.prototype=vc(n.prototype),A.prototype.constructor=A,Ve.prototype.clear=Qe,Ve.prototype["delete"]=tn,Ve.prototype.get=en,Ve.prototype.has=nn,Ve.prototype.set=rn,sn.prototype.clear=on,sn.prototype["delete"]=an,sn.prototype.get=un,sn.prototype.has=ln,sn.prototype.set=hn,cn.prototype.clear=fn,cn.prototype["delete"]=dn,cn.prototype.get=pn,cn.prototype.has=_n,cn.prototype.set=gn,vn.prototype.add=vn.prototype.push=mn,vn.prototype.has=yn,xn.prototype.clear=bn,xn.prototype["delete"]=wn,xn.prototype.get=Sn,xn.prototype.has=Cn,xn.prototype.set=Tn;var mc=Hr(ii),yc=Hr(ri,!0),xc=Yr(),bc=Yr(!0),wc=ac?function(t,e){return ac.set(t,e),t}:El,Sc=Nh?function(t,e){return Nh(t,"toString",{configurable:!0,enumerable:!1,value:Rl(e),writable:!0})}:El,Cc=sr,Tc=Fh||function(t){return si.clearTimeout(t)},Pc=rc&&1/Y(new rc([,-0]))[1]==Rt?function(t){return new rc(t)}:jl,Ac=ac?function(t){return ac.get(t)}:jl,kc=Uh?function(t){return null==t?[]:(t=ch(t),h(Uh(t),function(e){return Bh.call(t,e)}))}:Ul,Mc=Uh?function(t){for(var e=[];t;)p(e,kc(t)),t=Ih(t);return e}:Ul,Oc=hi;(ec&&Oc(new ec(new ArrayBuffer(1)))!=le||nc&&Oc(new nc)!=Zt||ic&&Oc(ic.resolve())!=Qt||rc&&Oc(new rc)!=ne||sc&&Oc(new sc)!=oe)&&(Oc=function(t){var e=hi(t),n=e==Kt?t.constructor:nt,i=n?io(n):"";if(i)switch(i){case lc:return le;case hc:return Zt;case cc:return Qt;case fc:return ne;case dc:return oe}return e});var Ic=mh?su:Xl,Rc=to(wc),Bc=Vh||function(t,e){return si.setTimeout(t,e)},Ec=to(Sc),zc=Hs(function(t){var e=[];return Ie.test(t)&&e.push(""),t.replace(Re,function(t,n,i,r){e.push(i?r.replace(qe,"$1"):n||t)}),e}),Lc=sr(function(t,e){return Ja(t)?Xn(t,ti(e,1,Ja,!0)):[]}),Dc=sr(function(t,e){var n=To(e);return Ja(n)&&(n=nt),Ja(t)?Xn(t,ti(e,1,Ja,!0),Cs(n,2)):[]}),Nc=sr(function(t,e){var n=To(e);return Ja(n)&&(n=nt),Ja(t)?Xn(t,ti(e,1,Ja,!0),nt,n):[]}),Fc=sr(function(t){var e=d(t,Cr);return e.length&&e[0]===t[0]?Pi(e):[]}),jc=sr(function(t){var e=To(t),n=d(t,Cr);return e===To(n)?e=nt:n.pop(),n.length&&n[0]===t[0]?Pi(n,Cs(e,2)):[]}),Vc=sr(function(t){var e=To(t),n=d(t,Cr);return e="function"==typeof e?e:nt,e&&n.pop(),n.length&&n[0]===t[0]?Pi(n,nt,e):[]}),qc=sr(ko),Wc=ys(function(t,e){var n=null==t?0:t.length,i=Dn(t,e);return er(t,d(e,function(t){return Ds(t,n)?+t:t}).sort(Lr)),i}),Uc=sr(function(t){return vr(ti(t,1,Ja,!0))}),Xc=sr(function(t){var e=To(t);return Ja(e)&&(e=nt),vr(ti(t,1,Ja,!0),Cs(e,2))}),Hc=sr(function(t){var e=To(t);return e="function"==typeof e?e:nt,vr(ti(t,1,Ja,!0),nt,e)}),Yc=sr(function(t,e){return Ja(t)?Xn(t,e):[]}),Gc=sr(function(t){return wr(h(t,Ja))}),Zc=sr(function(t){var e=To(t);return Ja(e)&&(e=nt),wr(h(t,Ja),Cs(e,2))}),$c=sr(function(t){var e=To(t);return e="function"==typeof e?e:nt,wr(h(t,Ja),nt,e)}),Jc=sr($o),Kc=sr(function(t){var e=t.length,n=e>1?t[e-1]:nt;return n="function"==typeof n?(t.pop(),n):nt,Jo(t,n)}),Qc=ys(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Dn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof A&&Ds(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:na,args:[r],thisArg:nt}),new m(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(nt),t})):this.thru(r)}),tf=Ur(function(t,e,n){xh.call(t,n)?++t[n]:Ln(t,n,1)}),ef=Qr(_o),nf=Qr(go),rf=Ur(function(t,e,n){xh.call(t,n)?t[n].push(e):Ln(t,n,[e])}),sf=sr(function(t,e,n){var i=-1,r="function"==typeof e,o=$a(t)?oh(t.length):[];return mc(t,function(t){o[++i]=r?s(e,t,n):ki(t,e,n)}),o}),of=Ur(function(t,e,n){Ln(t,n,e)}),af=Ur(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),uf=sr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ns(t,e[0],e[1])?e=[]:n>2&&Ns(e[0],e[1],e[2])&&(e=[e[0]]),$i(t,ti(e,1),[])}),lf=jh||function(){return si.Date.now()},hf=sr(function(t,e,n){var i=_t;if(n.length){var r=H(n,Ss(hf));i|=xt}return fs(t,i,e,n,r)}),cf=sr(function(t,e,n){var i=_t|gt;if(n.length){var r=H(n,Ss(cf));i|=xt}return fs(e,i,t,n,r)}),ff=sr(function(t,e){return Un(t,1,e)}),df=sr(function(t,e,n){return Un(t,ku(e)||0,n)});za.Cache=cn;var pf=Cc(function(t,e){e=1==e.length&&bf(e[0])?d(e[0],B(Cs())):d(ti(e,1),B(Cs()));var n=e.length;return sr(function(i){for(var r=-1,o=$h(i.length,n);++r<o;)i[r]=e[r].call(this,i[r]);return s(t,this,i)})}),_f=sr(function(t,e){var n=H(e,Ss(_f));return fs(t,xt,nt,e,n)}),gf=sr(function(t,e){var n=H(e,Ss(gf));return fs(t,bt,nt,e,n)}),vf=ys(function(t,e){return fs(t,St,nt,nt,nt,e)}),mf=us(vi),yf=us(function(t,e){return t>=e}),xf=Mi(function(){return arguments}())?Mi:function(t){return lu(t)&&xh.call(t,"callee")&&!Bh.call(t,"callee")},bf=oh.isArray,wf=ci?B(ci):Oi,Sf=Xh||Xl,Cf=fi?B(fi):Ii,Tf=di?B(di):Ei,Pf=pi?B(pi):Di,Af=_i?B(_i):Ni,kf=gi?B(gi):Fi,Mf=us(Wi),Of=us(function(t,e){return t<=e}),If=Xr(function(t,e){if(Ws(e)||$a(e))return void Vr(e,Uu(e),t);for(var n in e)xh.call(e,n)&&In(t,n,e[n])}),Rf=Xr(function(t,e){Vr(e,Xu(e),t)}),Bf=Xr(function(t,e,n,i){Vr(e,Xu(e),t,i)}),Ef=Xr(function(t,e,n,i){Vr(e,Uu(e),t,i)}),zf=ys(Dn),Lf=sr(function(t){return t.push(nt,ds),s(Bf,nt,t)}),Df=sr(function(t){return t.push(nt,ps),s(qf,nt,t)}),Nf=ns(function(t,e,n){t[e]=n},Rl(El)),Ff=ns(function(t,e,n){xh.call(t,e)?t[e].push(n):t[e]=[n]},Cs),jf=sr(ki),Vf=Xr(function(t,e,n){Yi(t,e,n)}),qf=Xr(function(t,e,n,i){Yi(t,e,n,i)}),Wf=ys(function(t,e){var n={};if(null==t)return n;var i=!1;e=d(e,function(e){return e=Pr(e,t),i||(i=e.length>1),e}),Vr(t,bs(t),n),i&&(n=Fn(n,ht|ct|ft,_s));for(var r=e.length;r--;)mr(n,e[r]);return n}),Uf=ys(function(t,e){return null==t?{}:Ji(t,e)}),Xf=cs(Uu),Hf=cs(Xu),Yf=$r(function(t,e,n){return e=e.toLowerCase(),t+(n?ul(e):e)}),Gf=$r(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Zf=$r(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),$f=Zr("toLowerCase"),Jf=$r(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Kf=$r(function(t,e,n){return t+(n?" ":"")+td(e)}),Qf=$r(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),td=Zr("toUpperCase"),ed=sr(function(t,e){try{return s(t,nt,e)}catch(n){return iu(n)?n:new uh(n)}}),nd=ys(function(t,e){return a(e,function(e){e=no(e),Ln(t,e,hf(t[e],t))}),t}),id=ts(),rd=ts(!0),sd=sr(function(t,e){return function(n){return ki(n,t,e)}}),od=sr(function(t,e){return function(n){return ki(t,n,e)}}),ad=rs(d),ud=rs(l),ld=rs(v),hd=as(),cd=as(!0),fd=is(function(t,e){return t+e},0),dd=hs("ceil"),pd=is(function(t,e){return t/e},1),_d=hs("floor"),gd=is(function(t,e){return t*e},1),vd=hs("round"),md=is(function(t,e){return t-e},0);return e.after=ka,e.ary=Ma,e.assign=If,e.assignIn=Rf,e.assignInWith=Bf,e.assignWith=Ef,e.at=zf,e.before=Oa,e.bind=hf,e.bindAll=nd,e.bindKey=cf,e.castArray=Wa,e.chain=ta,e.chunk=oo,e.compact=ao,e.concat=uo,e.cond=Ol,e.conforms=Il,e.constant=Rl,e.countBy=tf,e.create=Ru,e.curry=Ia,e.curryRight=Ra,e.debounce=Ba,e.defaults=Lf,e.defaultsDeep=Df,e.defer=ff,e.delay=df,e.difference=Lc,e.differenceBy=Dc,e.differenceWith=Nc,e.drop=lo,e.dropRight=ho,e.dropRightWhile=co,e.dropWhile=fo,e.fill=po,e.filter=ca,e.flatMap=fa,e.flatMapDeep=da,e.flatMapDepth=pa,e.flatten=vo,e.flattenDeep=mo,e.flattenDepth=yo,e.flip=Ea,e.flow=id,e.flowRight=rd,e.fromPairs=xo,e.functions=Fu,e.functionsIn=ju,e.groupBy=rf,e.initial=So,e.intersection=Fc,e.intersectionBy=jc,e.intersectionWith=Vc,e.invert=Nf,e.invertBy=Ff,e.invokeMap=sf,e.iteratee=zl,e.keyBy=of,e.keys=Uu,e.keysIn=Xu,e.map=ma,e.mapKeys=Hu,e.mapValues=Yu,e.matches=Ll,e.matchesProperty=Dl,e.memoize=za,e.merge=Vf,e.mergeWith=qf,e.method=sd,e.methodOf=od,e.mixin=Nl,e.negate=La,e.nthArg=Vl,e.omit=Wf,e.omitBy=Gu,e.once=Da,e.orderBy=ya,e.over=ad,e.overArgs=pf,e.overEvery=ud,e.overSome=ld,e.partial=_f,e.partialRight=gf,e.partition=af,e.pick=Uf,e.pickBy=Zu,e.property=ql,e.propertyOf=Wl,e.pull=qc,e.pullAll=ko,e.pullAllBy=Mo,e.pullAllWith=Oo,e.pullAt=Wc,e.range=hd,e.rangeRight=cd,e.rearg=vf,e.reject=wa,e.remove=Io,e.rest=Na,e.reverse=Ro,e.sampleSize=Ca,e.set=Ju,e.setWith=Ku,e.shuffle=Ta,e.slice=Bo,e.sortBy=uf,e.sortedUniq=jo,e.sortedUniqBy=Vo,e.split=yl,e.spread=Fa,e.tail=qo,e.take=Wo,e.takeRight=Uo,e.takeRightWhile=Xo,e.takeWhile=Ho,e.tap=ea,e.throttle=ja,e.thru=na,e.toArray=Cu,e.toPairs=Xf,e.toPairsIn=Hf,e.toPath=$l,e.toPlainObject=Mu,e.transform=Qu,e.unary=Va,e.union=Uc,e.unionBy=Xc,e.unionWith=Hc,e.uniq=Yo,e.uniqBy=Go,e.uniqWith=Zo,e.unset=tl,e.unzip=$o,e.unzipWith=Jo,e.update=el,e.updateWith=nl,e.values=il,e.valuesIn=rl,e.without=Yc,e.words=Ml,e.wrap=qa,e.xor=Gc,e.xorBy=Zc,e.xorWith=$c,e.zip=Jc,e.zipObject=Ko,e.zipObjectDeep=Qo,e.zipWith=Kc,e.entries=Xf,e.entriesIn=Hf,e.extend=Rf,e.extendWith=Bf,Nl(e,e),e.add=fd,e.attempt=ed,e.camelCase=Yf,e.capitalize=ul,e.ceil=dd,e.clamp=sl,e.clone=Ua,e.cloneDeep=Ha,e.cloneDeepWith=Ya,e.cloneWith=Xa,e.conformsTo=Ga,e.deburr=ll,e.defaultTo=Bl,e.divide=pd,e.endsWith=hl,e.eq=Za,e.escape=cl,e.escapeRegExp=fl,e.every=ha,e.find=ef,e.findIndex=_o,e.findKey=Bu,e.findLast=nf,e.findLastIndex=go,e.findLastKey=Eu,e.floor=_d,e.forEach=_a,e.forEachRight=ga,e.forIn=zu,e.forInRight=Lu,e.forOwn=Du,e.forOwnRight=Nu,e.get=Vu,e.gt=mf,e.gte=yf,e.has=qu,e.hasIn=Wu,e.head=bo,e.identity=El,e.includes=va,e.indexOf=wo,e.inRange=ol,e.invoke=jf,e.isArguments=xf,e.isArray=bf,e.isArrayBuffer=wf,e.isArrayLike=$a,e.isArrayLikeObject=Ja,e.isBoolean=Ka,e.isBuffer=Sf,e.isDate=Cf,e.isElement=Qa,e.isEmpty=tu,e.isEqual=eu,e.isEqualWith=nu,e.isError=iu,e.isFinite=ru,e.isFunction=su,e.isInteger=ou,e.isLength=au,e.isMap=Tf,e.isMatch=hu,e.isMatchWith=cu,e.isNaN=fu,e.isNative=du,e.isNil=_u,e.isNull=pu,e.isNumber=gu,e.isObject=uu,e.isObjectLike=lu,e.isPlainObject=vu,e.isRegExp=Pf,e.isSafeInteger=mu,e.isSet=Af,e.isString=yu,e.isSymbol=xu,e.isTypedArray=kf,e.isUndefined=bu,e.isWeakMap=wu,e.isWeakSet=Su,e.join=Co,e.kebabCase=Gf,e.last=To,e.lastIndexOf=Po,e.lowerCase=Zf,e.lowerFirst=$f,e.lt=Mf,e.lte=Of,e.max=Kl,e.maxBy=Ql,e.mean=th,e.meanBy=eh,e.min=nh,e.minBy=ih,e.stubArray=Ul,e.stubFalse=Xl,e.stubObject=Hl,e.stubString=Yl,e.stubTrue=Gl,e.multiply=gd,e.nth=Ao,e.noConflict=Fl,e.noop=jl,e.now=lf,e.pad=dl,e.padEnd=pl,e.padStart=_l,e.parseInt=gl,e.random=al,e.reduce=xa,e.reduceRight=ba,e.repeat=vl,e.replace=ml,e.result=$u,e.round=vd,e.runInContext=Si,e.sample=Sa,e.size=Pa,e.snakeCase=Jf,e.some=Aa,e.sortedIndex=Eo,e.sortedIndexBy=zo,e.sortedIndexOf=Lo,e.sortedLastIndex=Do,e.sortedLastIndexBy=No,e.sortedLastIndexOf=Fo,e.startCase=Kf,e.startsWith=xl,e.subtract=md,e.sum=rh,e.sumBy=sh,e.template=bl,e.times=Zl,e.toFinite=Tu,e.toInteger=Pu,e.toLength=Au,e.toLower=wl,e.toNumber=ku,e.toSafeInteger=Ou,e.toString=Iu,e.toUpper=Sl,e.trim=Cl,e.trimEnd=Tl,e.trimStart=Pl,e.truncate=Al,e.unescape=kl,e.uniqueId=Jl,e.upperCase=Qf,e.upperFirst=td,e.each=_a,e.eachRight=ga,e.first=bo,Nl(e,function(){var t={};return ii(e,function(n,i){xh.call(e.prototype,i)||(t[i]=n)}),t}(),{chain:!1}),e.VERSION=it,a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),a(["drop","take"],function(t,e){A.prototype[t]=function(n){n=n===nt?1:Zh(Pu(n),0);var i=this.__filtered__&&!e?new A(this):this.clone();return i.__filtered__?i.__takeCount__=$h(n,i.__takeCount__):i.__views__.push({size:$h(n,Lt),type:t+(i.__dir__<0?"Right":"")}),i},A.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==Mt||n==It;A.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Cs(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),a(["head","last"],function(t,e){var n="take"+(e?"Right":"");A.prototype[t]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");A.prototype[t]=function(){return this.__filtered__?new A(this):this[n](1)}}),A.prototype.compact=function(){return this.filter(El)},A.prototype.find=function(t){return this.filter(t).head()},A.prototype.findLast=function(t){return this.reverse().find(t)},A.prototype.invokeMap=sr(function(t,e){return"function"==typeof t?new A(this):this.map(function(n){return ki(n,t,e)})}),A.prototype.reject=function(t){return this.filter(La(Cs(t)))},A.prototype.slice=function(t,e){t=Pu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new A(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==nt&&(e=Pu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},A.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},A.prototype.toArray=function(){return this.take(Lt)},ii(A.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),s=e[r?"take"+("last"==n?"Right":""):n],o=r||/^find/.test(n);s&&(e.prototype[n]=function(){var n=this.__wrapped__,a=r?[1]:arguments,u=n instanceof A,l=a[0],h=u||bf(n),c=function(t){var n=s.apply(e,p([t],a));return r&&f?n[0]:n};h&&i&&"function"==typeof l&&1!=l.length&&(u=h=!1);var f=this.__chain__,d=!!this.__actions__.length,_=o&&!f,g=u&&!d;if(!o&&h){n=g?n:new A(this);var v=t.apply(n,a);return v.__actions__.push({func:na,args:[c],thisArg:nt}),new m(v,f)}return _&&g?t.apply(this,a):(v=this.thru(c),_?r?v.value()[0]:v.value():v)})}),a(["pop","push","shift","sort","splice","unshift"],function(t){var n=_h[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var e=this.value();return n.apply(bf(e)?e:[],t)}return this[i](function(e){return n.apply(bf(e)?e:[],t)})}}),ii(A.prototype,function(t,n){var i=e[n];if(i){var r=i.name+"",s=uc[r]||(uc[r]=[]);s.push({name:n,func:i})}}),uc[es(nt,gt).name]=[{name:"wrapper",func:nt}],A.prototype.clone=Z,A.prototype.reverse=Q,A.prototype.value=tt,e.prototype.at=Qc,e.prototype.chain=ia,e.prototype.commit=ra,e.prototype.next=sa,e.prototype.plant=aa,e.prototype.reverse=ua,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=la,e.prototype.first=e.prototype.head,Lh&&(e.prototype[Lh]=oa),e},wi=bi();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(si._=wi,define(function(){return wi})):ai?((ai.exports=wi)._=wi,oi._=wi):si._=wi}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,n){(function(i){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof i?i:"undefined"!=typeof self?self:this,
r.Matter=t()}}(function(){return function e(n,i,r){function s(a,u){if(!i[a]){if(!n[a]){var l="function"==typeof t&&t;if(!u&&l)return l(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return s(e?e:t)},c,c.exports,e,n,i,r)}return i[a].exports}for(var o="function"==typeof t&&t,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vertices"),s=t("../geometry/Vector"),o=t("../core/Sleeping"),a=(t("../render/Render"),t("../core/Common")),u=t("../geometry/Bounds"),l=t("../geometry/Axes");!function(){i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i.create=function(e){var n={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:r.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},i=a.extend(n,e);return t(i,e),i},i.nextGroup=function(t){return t?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var t=function(t,e){e=e||{},i.set(t,{bounds:t.bounds||u.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),r.rotate(t.vertices,t.angle,t.position),l.rotate(t.axes,t.angle),u.update(t.bounds,t.vertices,t.velocity),i.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia});var n=t.isStatic?"#2e2b44":a.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]),o=a.shadeColor(n,-20);t.render.fillStyle=t.render.fillStyle||n,t.render.strokeStyle=t.render.strokeStyle||o,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};i.set=function(t,e,n){var r;"string"==typeof e&&(r=e,e={},e[r]=n);for(r in e)if(n=e[r],e.hasOwnProperty(r))switch(r){case"isStatic":i.setStatic(t,n);break;case"isSleeping":o.set(t,n);break;case"mass":i.setMass(t,n);break;case"density":i.setDensity(t,n);break;case"inertia":i.setInertia(t,n);break;case"vertices":i.setVertices(t,n);break;case"position":i.setPosition(t,n);break;case"angle":i.setAngle(t,n);break;case"velocity":i.setVelocity(t,n);break;case"angularVelocity":i.setAngularVelocity(t,n);break;case"parts":i.setParts(t,n);break;default:t[r]=n}},i.setStatic=function(t,e){for(var n=0;n<t.parts.length;n++){var i=t.parts[n];i.isStatic=e,e?(i._original={restitution:i.restitution,friction:i.friction,mass:i.mass,inertia:i.inertia,density:i.density,inverseMass:i.inverseMass,inverseInertia:i.inverseInertia},i.restitution=0,i.friction=1,i.mass=i.inertia=i.density=1/0,i.inverseMass=i.inverseInertia=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.angularVelocity=0,i.speed=0,i.angularSpeed=0,i.motion=0):i._original&&(i.restitution=i._original.restitution,i.friction=i._original.friction,i.mass=i._original.mass,i.inertia=i._original.inertia,i.density=i._original.density,i.inverseMass=i._original.inverseMass,i.inverseInertia=i._original.inverseInertia,delete i._original)}},i.setMass=function(t,e){t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},i.setDensity=function(t,e){i.setMass(t,e*t.area),t.density=e},i.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},i.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=r.create(e,t),t.axes=l.fromVertices(t.vertices),t.area=r.area(t.vertices),i.setMass(t,t.density*t.area);var n=r.centre(t.vertices);r.translate(t.vertices,n,-1),i.setInertia(t,i._inertiaScale*r.inertia(t.vertices,t.mass)),r.translate(t.vertices,t.position),u.update(t.bounds,t.vertices,t.velocity)},i.setParts=function(t,n,s){var o;for(n=n.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<n.length;o++){var a=n[o];a!==t&&(a.parent=t,t.parts.push(a))}if(1!==t.parts.length){if(s="undefined"==typeof s||s){var u=[];for(o=0;o<n.length;o++)u=u.concat(n[o].vertices);r.clockwiseSort(u);var l=r.hull(u),h=r.centre(l);i.setVertices(t,l),r.translate(t.vertices,h)}var c=e(t);t.area=c.area,t.parent=t,t.position.x=c.centre.x,t.position.y=c.centre.y,t.positionPrev.x=c.centre.x,t.positionPrev.y=c.centre.y,i.setMass(t,c.mass),i.setInertia(t,c.inertia),i.setPosition(t,c.centre)}},i.setPosition=function(t,e){var n=s.sub(e,t.position);t.positionPrev.x+=n.x,t.positionPrev.y+=n.y;for(var i=0;i<t.parts.length;i++){var o=t.parts[i];o.position.x+=n.x,o.position.y+=n.y,r.translate(o.vertices,n),u.update(o.bounds,o.vertices,t.velocity)}},i.setAngle=function(t,e){var n=e-t.angle;t.anglePrev+=n;for(var i=0;i<t.parts.length;i++){var o=t.parts[i];o.angle+=n,r.rotate(o.vertices,n,t.position),l.rotate(o.axes,n),u.update(o.bounds,o.vertices,t.velocity),i>0&&s.rotateAbout(o.position,n,t.position,o.position)}},i.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=s.magnitude(t.velocity)},i.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},i.translate=function(t,e){i.setPosition(t,s.add(t.position,e))},i.rotate=function(t,e){i.setAngle(t,t.angle+e)},i.scale=function(t,n,s,o){for(var a=0;a<t.parts.length;a++){var h=t.parts[a];r.scale(h.vertices,n,s,t.position),h.axes=l.fromVertices(h.vertices),t.isStatic||(h.area=r.area(h.vertices),i.setMass(h,t.density*h.area),r.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),i.setInertia(h,r.inertia(h.vertices,h.mass)),r.translate(h.vertices,{x:h.position.x,y:h.position.y})),u.update(h.bounds,h.vertices,t.velocity)}if(t.circleRadius&&(n===s?t.circleRadius*=n:t.circleRadius=null),!t.isStatic){var c=e(t);t.area=c.area,i.setMass(t,c.mass),i.setInertia(t,c.inertia)}},i.update=function(t,e,n,i){var o=Math.pow(e*n*t.timeScale,2),a=1-t.frictionAir*n*t.timeScale,h=t.position.x-t.positionPrev.x,c=t.position.y-t.positionPrev.y;t.velocity.x=h*a*i+t.force.x/t.mass*o,t.velocity.y=c*a*i+t.force.y/t.mass*o,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*i+t.torque/t.inertia*o,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var f=0;f<t.parts.length;f++){var d=t.parts[f];r.translate(d.vertices,t.velocity),f>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),0!==t.angularVelocity&&(r.rotate(d.vertices,t.angularVelocity,t.position),l.rotate(d.axes,t.angularVelocity),f>0&&s.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),u.update(d.bounds,d.vertices,t.velocity)}},i.applyForce=function(t,e,n){t.force.x+=n.x,t.force.y+=n.y;var i={x:e.x-t.position.x,y:e.y-t.position.y};t.torque+=i.x*n.y-i.y*n.x};var e=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===t.parts.length?0:1;n<t.parts.length;n++){var i=t.parts[n];e.mass+=i.mass,e.area+=i.area,e.inertia+=i.inertia,e.centre=s.add(e.centre,s.mult(i.position,i.mass!==1/0?i.mass:1))}return e.centre=s.div(e.centre,e.mass!==1/0?e.mass:t.parts.length),e}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(t,e,n){var i={};e.exports=i;var r=t("../core/Events"),s=t("../core/Common"),o=t("./Body");!function(){i.create=function(t){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},i.setModified=function(t,e,n,r){if(t.isModified=e,n&&t.parent&&i.setModified(t.parent,e,n,r),r)for(var s=0;s<t.composites.length;s++){var o=t.composites[s];i.setModified(o,e,n,r)}},i.add=function(t,e){var n=[].concat(e);r.trigger(t,"beforeAdd",{object:e});for(var o=0;o<n.length;o++){var a=n[o];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(t,a);break;case"constraint":i.addConstraint(t,a);break;case"composite":i.addComposite(t,a);break;case"mouseConstraint":i.addConstraint(t,a.constraint)}}return r.trigger(t,"afterAdd",{object:e}),t},i.remove=function(t,e,n){var s=[].concat(e);r.trigger(t,"beforeRemove",{object:e});for(var o=0;o<s.length;o++){var a=s[o];switch(a.type){case"body":i.removeBody(t,a,n);break;case"constraint":i.removeConstraint(t,a,n);break;case"composite":i.removeComposite(t,a,n);break;case"mouseConstraint":i.removeConstraint(t,a.constraint)}}return r.trigger(t,"afterRemove",{object:e}),t},i.addComposite=function(t,e){return t.composites.push(e),e.parent=t,i.setModified(t,!0,!0,!1),t},i.removeComposite=function(t,e,n){var r=s.indexOf(t.composites,e);if(r!==-1&&(i.removeCompositeAt(t,r),i.setModified(t,!0,!0,!1)),n)for(var o=0;o<t.composites.length;o++)i.removeComposite(t.composites[o],e,!0);return t},i.removeCompositeAt=function(t,e){return t.composites.splice(e,1),i.setModified(t,!0,!0,!1),t},i.addBody=function(t,e){return t.bodies.push(e),i.setModified(t,!0,!0,!1),t},i.removeBody=function(t,e,n){var r=s.indexOf(t.bodies,e);if(r!==-1&&(i.removeBodyAt(t,r),i.setModified(t,!0,!0,!1)),n)for(var o=0;o<t.composites.length;o++)i.removeBody(t.composites[o],e,!0);return t},i.removeBodyAt=function(t,e){return t.bodies.splice(e,1),i.setModified(t,!0,!0,!1),t},i.addConstraint=function(t,e){return t.constraints.push(e),i.setModified(t,!0,!0,!1),t},i.removeConstraint=function(t,e,n){var r=s.indexOf(t.constraints,e);if(r!==-1&&i.removeConstraintAt(t,r),n)for(var o=0;o<t.composites.length;o++)i.removeConstraint(t.composites[o],e,!0);return t},i.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),i.setModified(t,!0,!0,!1),t},i.clear=function(t,e,n){if(n)for(var r=0;r<t.composites.length;r++)i.clear(t.composites[r],e,!0);return e?t.bodies=t.bodies.filter(function(t){return t.isStatic}):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,i.setModified(t,!0,!0,!1),t},i.allBodies=function(t){for(var e=[].concat(t.bodies),n=0;n<t.composites.length;n++)e=e.concat(i.allBodies(t.composites[n]));return e},i.allConstraints=function(t){for(var e=[].concat(t.constraints),n=0;n<t.composites.length;n++)e=e.concat(i.allConstraints(t.composites[n]));return e},i.allComposites=function(t){for(var e=[].concat(t.composites),n=0;n<t.composites.length;n++)e=e.concat(i.allComposites(t.composites[n]));return e},i.get=function(t,e,n){var r,s;switch(n){case"body":r=i.allBodies(t);break;case"constraint":r=i.allConstraints(t);break;case"composite":r=i.allComposites(t).concat(t)}return r?(s=r.filter(function(t){return t.id.toString()===e.toString()}),0===s.length?null:s[0]):null},i.move=function(t,e,n){return i.remove(t,e),i.add(n,e),t},i.rebase=function(t){for(var e=i.allBodies(t).concat(i.allConstraints(t)).concat(i.allComposites(t)),n=0;n<e.length;n++)e[n].id=s.nextId();return i.setModified(t,!0,!0,!1),t},i.translate=function(t,e,n){for(var r=n?i.allBodies(t):t.bodies,s=0;s<r.length;s++)o.translate(r[s],e);return i.setModified(t,!0,!0,!1),t},i.rotate=function(t,e,n,r){for(var s=Math.cos(e),a=Math.sin(e),u=r?i.allBodies(t):t.bodies,l=0;l<u.length;l++){var h=u[l],c=h.position.x-n.x,f=h.position.y-n.y;o.setPosition(h,{x:n.x+(c*s-f*a),y:n.y+(c*a+f*s)}),o.rotate(h,e)}return i.setModified(t,!0,!0,!1),t},i.scale=function(t,e,n,r,s){for(var a=s?i.allBodies(t):t.bodies,u=0;u<a.length;u++){var l=a[u],h=l.position.x-r.x,c=l.position.y-r.y;o.setPosition(l,{x:r.x+h*e,y:r.y+c*n}),o.scale(l,e,n)}return i.setModified(t,!0,!0,!1),t}}()},{"../core/Common":14,"../core/Events":16,"./Body":1}],3:[function(t,e,n){var i={};e.exports=i;var r=t("./Composite"),s=(t("../constraint/Constraint"),t("../core/Common"));!function(){i.create=function(t){var e=r.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-(1/0),y:-(1/0)},max:{x:1/0,y:1/0}}};return s.extend(e,n,t)}}()},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(t,e,n){var i={};e.exports=i,function(){i.create=function(t){return{id:i.id(t),vertex:t,normalImpulse:0,tangentImpulse:0}},i.id=function(t){return t.body.id+"_"+t.index}}()},{}],5:[function(t,e,n){var i={};e.exports=i;var r=t("./SAT"),s=t("./Pair"),o=t("../geometry/Bounds");!function(){i.collisions=function(t,e){for(var n=[],a=e.pairs.table,u=0;u<t.length;u++){var l=t[u][0],h=t[u][1];if((!l.isStatic&&!l.isSleeping||!h.isStatic&&!h.isSleeping)&&i.canCollide(l.collisionFilter,h.collisionFilter)&&o.overlaps(l.bounds,h.bounds))for(var c=l.parts.length>1?1:0;c<l.parts.length;c++)for(var f=l.parts[c],d=h.parts.length>1?1:0;d<h.parts.length;d++){var p=h.parts[d];if(f===l&&p===h||o.overlaps(f.bounds,p.bounds)){var _,g=s.id(f,p),v=a[g];_=v&&v.isActive?v.collision:null;var m=r.collides(f,p,_);m.collided&&n.push(m)}}}return n},i.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!==(t.mask&e.category)&&0!==(e.mask&t.category)}}()},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(t,e,n){var i={};e.exports=i;var r=t("./Pair"),s=t("./Detector"),o=t("../core/Common");!function(){i.create=function(t){var e={controller:i,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(e,t)},i.update=function(n,i,r,s){var o,f,d,p,_,g=r.world,v=n.buckets,m=!1;for(o=0;o<i.length;o++){var y=i[o];if((!y.isSleeping||s)&&!(y.bounds.max.x<g.bounds.min.x||y.bounds.min.x>g.bounds.max.x||y.bounds.max.y<g.bounds.min.y||y.bounds.min.y>g.bounds.max.y)){var x=e(n,y);if(!y.region||x.id!==y.region.id||s){y.region&&!s||(y.region=x);var b=t(x,y.region);for(f=b.startCol;f<=b.endCol;f++)for(d=b.startRow;d<=b.endRow;d++){_=a(f,d),p=v[_];var w=f>=x.startCol&&f<=x.endCol&&d>=x.startRow&&d<=x.endRow,S=f>=y.region.startCol&&f<=y.region.endCol&&d>=y.region.startRow&&d<=y.region.endRow;!w&&S&&S&&p&&h(n,p,y),(y.region===x||w&&!S||s)&&(p||(p=u(v,_)),l(n,p,y))}y.region=x,m=!0}}}m&&(n.pairsList=c(n))},i.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]};var t=function(t,e){var i=Math.min(t.startCol,e.startCol),r=Math.max(t.endCol,e.endCol),s=Math.min(t.startRow,e.startRow),o=Math.max(t.endRow,e.endRow);return n(i,r,s,o)},e=function(t,e){var i=e.bounds,r=Math.floor(i.min.x/t.bucketWidth),s=Math.floor(i.max.x/t.bucketWidth),o=Math.floor(i.min.y/t.bucketHeight),a=Math.floor(i.max.y/t.bucketHeight);return n(r,s,o,a)},n=function(t,e,n,i){return{id:t+","+e+","+n+","+i,startCol:t,endCol:e,startRow:n,endRow:i}},a=function(t,e){return"C"+t+"R"+e},u=function(t,e){var n=t[e]=[];return n},l=function(t,e,n){for(var i=0;i<e.length;i++){var s=e[i];if(!(n.id===s.id||n.isStatic&&s.isStatic)){var o=r.id(n,s),a=t.pairs[o];a?a[2]+=1:t.pairs[o]=[n,s,1]}}e.push(n)},h=function(t,e,n){e.splice(o.indexOf(e,n),1);for(var i=0;i<e.length;i++){var s=e[i],a=r.id(n,s),u=t.pairs[a];u&&(u[2]-=1)}},c=function(t){var e,n,i=[];e=o.keys(t.pairs);for(var r=0;r<e.length;r++)n=t.pairs[e[r]],n[2]>0?i.push(n):delete t.pairs[e[r]];return i}}()},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(t,e,n){var i={};e.exports=i;var r=t("./Contact");!function(){i.create=function(t,e){var n=t.bodyA,r=t.bodyB,s=t.parentA,o=t.parentB,a={id:i.id(n,r),bodyA:n,bodyB:r,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:n.isSensor||r.isSensor,timeCreated:e,timeUpdated:e,inverseMass:s.inverseMass+o.inverseMass,friction:Math.min(s.friction,o.friction),frictionStatic:Math.max(s.frictionStatic,o.frictionStatic),restitution:Math.max(s.restitution,o.restitution),slop:Math.max(s.slop,o.slop)};return i.update(a,t,e),a},i.update=function(t,e,n){var s=t.contacts,o=e.supports,a=t.activeContacts,u=e.parentA,l=e.parentB;if(t.collision=e,t.inverseMass=u.inverseMass+l.inverseMass,t.friction=Math.min(u.friction,l.friction),t.frictionStatic=Math.max(u.frictionStatic,l.frictionStatic),t.restitution=Math.max(u.restitution,l.restitution),t.slop=Math.max(u.slop,l.slop),a.length=0,e.collided){for(var h=0;h<o.length;h++){var c=o[h],f=r.id(c),d=s[f];d?a.push(d):a.push(s[f]=r.create(c))}t.separation=e.depth,i.setActive(t,!0,n)}else t.isActive===!0&&i.setActive(t,!1,n)},i.setActive=function(t,e,n){e?(t.isActive=!0,t.timeUpdated=n):(t.isActive=!1,t.activeContacts.length=0)},i.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}}()},{"./Contact":4}],8:[function(t,e,n){var i={};e.exports=i;var r=t("./Pair"),s=t("../core/Common");!function(){var t=1e3;i.create=function(t){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},i.update=function(t,e,n){var i,o,a,u,l=t.list,h=t.table,c=t.collisionStart,f=t.collisionEnd,d=t.collisionActive,p=[];for(c.length=0,f.length=0,d.length=0,u=0;u<e.length;u++)i=e[u],i.collided&&(o=r.id(i.bodyA,i.bodyB),p.push(o),a=h[o],a?(a.isActive?d.push(a):c.push(a),r.update(a,i,n)):(a=r.create(i,n),h[o]=a,c.push(a),l.push(a)));for(u=0;u<l.length;u++)a=l[u],a.isActive&&s.indexOf(p,a.id)===-1&&(r.setActive(a,!1,n),f.push(a))},i.removeOld=function(e,n){var i,r,s,o,a=e.list,u=e.table,l=[];for(o=0;o<a.length;o++)i=a[o],r=i.collision,r.bodyA.isSleeping||r.bodyB.isSleeping?i.timeUpdated=n:n-i.timeUpdated>t&&l.push(o);for(o=0;o<l.length;o++)s=l[o]-o,i=a[s],delete u[i.id],a.splice(s,1)},i.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}}()},{"../core/Common":14,"./Pair":7}],9:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vector"),s=t("./SAT"),o=t("../geometry/Bounds"),a=t("../factory/Bodies"),u=t("../geometry/Vertices");!function(){i.ray=function(t,e,n,i){i=i||1e-100;for(var u=r.angle(e,n),l=r.magnitude(r.sub(e,n)),h=.5*(n.x+e.x),c=.5*(n.y+e.y),f=a.rectangle(h,c,l,i,{angle:u}),d=[],p=0;p<t.length;p++){var _=t[p];if(o.overlaps(_.bounds,f.bounds))for(var g=1===_.parts.length?0:1;g<_.parts.length;g++){var v=_.parts[g];if(o.overlaps(v.bounds,f.bounds)){var m=s.collides(v,f);if(m.collided){m.body=m.bodyA=m.bodyB=_,d.push(m);break}}}}return d},i.region=function(t,e,n){for(var i=[],r=0;r<t.length;r++){var s=t[r],a=o.overlaps(s.bounds,e);(a&&!n||!a&&n)&&i.push(s)}return i},i.point=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];if(o.contains(r.bounds,e))for(var s=1===r.parts.length?0:1;s<r.parts.length;s++){var a=r.parts[s];if(o.contains(a.bounds,e)&&u.contains(a.vertices,e)){n.push(r);break}}}return n}}()},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vertices"),s=t("../geometry/Vector"),o=t("../core/Common"),a=t("../geometry/Bounds");!function(){i._restingThresh=4,i._restingThreshTangent=6,i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i.preSolvePosition=function(t){var e,n,i;for(e=0;e<t.length;e++)n=t[e],n.isActive&&(i=n.activeContacts.length,n.collision.parentA.totalContacts+=i,n.collision.parentB.totalContacts+=i)},i.solvePosition=function(t,e){var n,r,o,a,u,l,h,c,f,d=s._temp[0],p=s._temp[1],_=s._temp[2],g=s._temp[3];for(n=0;n<t.length;n++)r=t[n],r.isActive&&!r.isSensor&&(o=r.collision,a=o.parentA,u=o.parentB,l=o.normal,h=s.sub(s.add(u.positionImpulse,u.position,d),s.add(a.positionImpulse,s.sub(u.position,o.penetration,p),_),g),r.separation=s.dot(l,h));for(n=0;n<t.length;n++)r=t[n],!r.isActive||r.isSensor||r.separation<0||(o=r.collision,a=o.parentA,u=o.parentB,l=o.normal,f=(r.separation-r.slop)*e,(a.isStatic||u.isStatic)&&(f*=2),a.isStatic||a.isSleeping||(c=i._positionDampen/a.totalContacts,a.positionImpulse.x+=l.x*f*c,a.positionImpulse.y+=l.y*f*c),u.isStatic||u.isSleeping||(c=i._positionDampen/u.totalContacts,u.positionImpulse.x-=l.x*f*c,u.positionImpulse.y-=l.y*f*c))},i.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var o=0;o<n.parts.length;o++){var u=n.parts[o];r.translate(u.vertices,n.positionImpulse),a.update(u.bounds,u.vertices,n.velocity),u.position.x+=n.positionImpulse.x,u.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,s.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=i._positionWarming,n.positionImpulse.y*=i._positionWarming)}}},i.preSolveVelocity=function(t){var e,n,i,r,o,a,u,l,h,c,f,d,p,_,g=s._temp[0],v=s._temp[1];for(e=0;e<t.length;e++)if(i=t[e],i.isActive&&!i.isSensor)for(r=i.activeContacts,o=i.collision,a=o.parentA,u=o.parentB,l=o.normal,h=o.tangent,n=0;n<r.length;n++)c=r[n],f=c.vertex,d=c.normalImpulse,p=c.tangentImpulse,0===d&&0===p||(g.x=l.x*d+h.x*p,g.y=l.y*d+h.y*p,a.isStatic||a.isSleeping||(_=s.sub(f,a.position,v),a.positionPrev.x+=g.x*a.inverseMass,a.positionPrev.y+=g.y*a.inverseMass,a.anglePrev+=s.cross(_,g)*a.inverseInertia),u.isStatic||u.isSleeping||(_=s.sub(f,u.position,v),u.positionPrev.x-=g.x*u.inverseMass,u.positionPrev.y-=g.y*u.inverseMass,u.anglePrev-=s.cross(_,g)*u.inverseInertia))},i.solveVelocity=function(t,e){for(var n=e*e,r=s._temp[0],a=s._temp[1],u=s._temp[2],l=s._temp[3],h=s._temp[4],c=s._temp[5],f=0;f<t.length;f++){var d=t[f];if(d.isActive&&!d.isSensor){var p=d.collision,_=p.parentA,g=p.parentB,v=p.normal,m=p.tangent,y=d.activeContacts,x=1/y.length;_.velocity.x=_.position.x-_.positionPrev.x,_.velocity.y=_.position.y-_.positionPrev.y,g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,_.angularVelocity=_.angle-_.anglePrev,g.angularVelocity=g.angle-g.anglePrev;for(var b=0;b<y.length;b++){var w=y[b],S=w.vertex,C=s.sub(S,_.position,a),T=s.sub(S,g.position,u),P=s.add(_.velocity,s.mult(s.perp(C),_.angularVelocity),l),A=s.add(g.velocity,s.mult(s.perp(T),g.angularVelocity),h),k=s.sub(P,A,c),M=s.dot(v,k),O=s.dot(m,k),I=Math.abs(O),R=o.sign(O),B=(1+d.restitution)*M,E=o.clamp(d.separation+M,0,1)*i._frictionNormalMultiplier,z=O,L=1/0;I>d.friction*d.frictionStatic*E*n&&(L=I,z=o.clamp(d.friction*R*n,-L,L));var D=s.cross(C,v),N=s.cross(T,v),F=x/(_.inverseMass+g.inverseMass+_.inverseInertia*D*D+g.inverseInertia*N*N);if(B*=F,z*=F,M<0&&M*M>i._restingThresh*n)w.normalImpulse=0;else{var j=w.normalImpulse;w.normalImpulse=Math.min(w.normalImpulse+B,0),B=w.normalImpulse-j}if(O*O>i._restingThreshTangent*n)w.tangentImpulse=0;else{var V=w.tangentImpulse;w.tangentImpulse=o.clamp(w.tangentImpulse+z,-L,L),z=w.tangentImpulse-V}r.x=v.x*B+m.x*z,r.y=v.y*B+m.y*z,_.isStatic||_.isSleeping||(_.positionPrev.x+=r.x*_.inverseMass,_.positionPrev.y+=r.y*_.inverseMass,_.anglePrev+=s.cross(C,r)*_.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=r.x*g.inverseMass,g.positionPrev.y-=r.y*g.inverseMass,g.anglePrev-=s.cross(T,r)*g.inverseInertia)}}}}}()},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vertices"),s=t("../geometry/Vector");!function(){i.collides=function(e,i,o){var a,u,l,h,c=!1;if(o){var f=e.parent,d=i.parent,p=f.speed*f.speed+f.angularSpeed*f.angularSpeed+d.speed*d.speed+d.angularSpeed*d.angularSpeed;c=o&&o.collided&&p<.2,h=o}else h={collided:!1,bodyA:e,bodyB:i};if(o&&c){var _=h.axisBody,g=_===e?i:e,v=[_.axes[o.axisNumber]];if(l=t(_.vertices,g.vertices,v),h.reused=!0,l.overlap<=0)return h.collided=!1,h}else{if(a=t(e.vertices,i.vertices,e.axes),a.overlap<=0)return h.collided=!1,h;if(u=t(i.vertices,e.vertices,i.axes),u.overlap<=0)return h.collided=!1,h;a.overlap<u.overlap?(l=a,h.axisBody=e):(l=u,h.axisBody=i),h.axisNumber=l.axisNumber}h.bodyA=e.id<i.id?e:i,h.bodyB=e.id<i.id?i:e,h.collided=!0,h.depth=l.overlap,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent,e=h.bodyA,i=h.bodyB,s.dot(l.axis,s.sub(i.position,e.position))<0?h.normal={x:l.axis.x,y:l.axis.y}:h.normal={x:-l.axis.x,y:-l.axis.y},h.tangent=s.perp(h.normal),h.penetration=h.penetration||{},h.penetration.x=h.normal.x*h.depth,h.penetration.y=h.normal.y*h.depth;var m=n(e,i,h.normal),y=[];if(r.contains(e.vertices,m[0])&&y.push(m[0]),r.contains(e.vertices,m[1])&&y.push(m[1]),y.length<2){var x=n(i,e,s.neg(h.normal));r.contains(i.vertices,x[0])&&y.push(x[0]),y.length<2&&r.contains(i.vertices,x[1])&&y.push(x[1])}return y.length<1&&(y=[m[0]]),h.supports=y,h};var t=function(t,n,i){for(var r,o,a=s._temp[0],u=s._temp[1],l={overlap:Number.MAX_VALUE},h=0;h<i.length;h++){if(o=i[h],e(a,t,o),e(u,n,o),r=Math.min(a.max-u.min,u.max-a.min),r<=0)return l.overlap=r,l;r<l.overlap&&(l.overlap=r,l.axis=o,l.axisNumber=h)}return l},e=function(t,e,n){for(var i=s.dot(e[0],n),r=i,o=1;o<e.length;o+=1){var a=s.dot(e[o],n);a>r?r=a:a<i&&(i=a)}t.min=i,t.max=r},n=function(t,e,n){for(var i,r,o,a,u=Number.MAX_VALUE,l=s._temp[0],h=e.vertices,c=t.position,f=0;f<h.length;f++)r=h[f],l.x=r.x-c.x,l.y=r.y-c.y,i=-s.dot(n,l),i<u&&(u=i,o=r);var d=o.index-1>=0?o.index-1:h.length-1;r=h[d],l.x=r.x-c.x,l.y=r.y-c.y,u=-s.dot(n,l),a=r;var p=(o.index+1)%h.length;return r=h[p],l.x=r.x-c.x,l.y=r.y-c.y,i=-s.dot(n,l),i<u&&(a=r),[o,a]}}()},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vertices"),s=t("../geometry/Vector"),o=t("../core/Sleeping"),a=t("../geometry/Bounds"),u=t("../geometry/Axes"),l=t("../core/Common");!function(){var t=1e-6,e=.001;i.create=function(e){var n=e;n.bodyA&&!n.pointA&&(n.pointA={x:0,y:0}),n.bodyB&&!n.pointB&&(n.pointB={x:0,y:0});var i=n.bodyA?s.add(n.bodyA.position,n.pointA):n.pointA,r=n.bodyB?s.add(n.bodyB.position,n.pointB):n.pointB,o=s.magnitude(s.sub(i,r));n.length=n.length||o||t;var a={visible:!0,lineWidth:2,strokeStyle:"#ffffff"};return n.render=l.extend(a,n.render),n.id=n.id||l.nextId(),n.label=n.label||"Constraint",n.type="constraint",n.stiffness=n.stiffness||1,n.angularStiffness=n.angularStiffness||0,n.angleA=n.bodyA?n.bodyA.angle:n.angleA,n.angleB=n.bodyB?n.bodyB.angle:n.angleB,n.plugin={},n},i.solveAll=function(t,e){for(var n=0;n<t.length;n++)i.solve(t[n],e)},i.solve=function(n,i){var r=n.bodyA,o=n.bodyB,a=n.pointA,u=n.pointB;r&&!r.isStatic&&(n.pointA=s.rotate(a,r.angle-n.angleA),n.angleA=r.angle),o&&!o.isStatic&&(n.pointB=s.rotate(u,o.angle-n.angleB),n.angleB=o.angle);var l=a,h=u;if(r&&(l=s.add(r.position,a)),o&&(h=s.add(o.position,u)),l&&h){var c=s.sub(l,h),f=s.magnitude(c);0===f&&(f=t);var d=(f-n.length)/f,p=s.div(c,f),_=s.mult(c,.5*d*n.stiffness*i*i);if(!(Math.abs(1-f/n.length)<e*i)){var g,v,m,y,x,b,w,S;r&&!r.isStatic?(m={x:l.x-r.position.x+_.x,y:l.y-r.position.y+_.y},r.velocity.x=r.position.x-r.positionPrev.x,r.velocity.y=r.position.y-r.positionPrev.y,r.angularVelocity=r.angle-r.anglePrev,g=s.add(r.velocity,s.mult(s.perp(m),r.angularVelocity)),x=s.dot(m,p),w=r.inverseMass+r.inverseInertia*x*x):(g={x:0,y:0},w=r?r.inverseMass:0),o&&!o.isStatic?(y={x:h.x-o.position.x-_.x,y:h.y-o.position.y-_.y},o.velocity.x=o.position.x-o.positionPrev.x,o.velocity.y=o.position.y-o.positionPrev.y,o.angularVelocity=o.angle-o.anglePrev,v=s.add(o.velocity,s.mult(s.perp(y),o.angularVelocity)),b=s.dot(y,p),S=o.inverseMass+o.inverseInertia*b*b):(v={x:0,y:0},S=o?o.inverseMass:0);var C=s.sub(v,g),T=s.dot(p,C)/(w+S);T>0&&(T=0);var P,A={x:p.x*T,y:p.y*T};r&&!r.isStatic&&(P=s.cross(m,A)*r.inverseInertia*(1-n.angularStiffness),r.constraintImpulse.x-=_.x,r.constraintImpulse.y-=_.y,r.constraintImpulse.angle+=P,r.position.x-=_.x,r.position.y-=_.y,r.angle+=P),o&&!o.isStatic&&(P=s.cross(y,A)*o.inverseInertia*(1-n.angularStiffness),o.constraintImpulse.x+=_.x,o.constraintImpulse.y+=_.y,o.constraintImpulse.angle-=P,o.position.x+=_.x,o.position.y+=_.y,o.angle-=P)}}},i.postSolveAll=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.constraintImpulse;if(0!==i.x||0!==i.y||0!==i.angle){o.set(n,!1);for(var l=0;l<n.parts.length;l++){var h=n.parts[l];r.translate(h.vertices,i),l>0&&(h.position.x+=i.x,h.position.y+=i.y),0!==i.angle&&(r.rotate(h.vertices,i.angle,n.position),u.rotate(h.axes,i.angle),l>0&&s.rotateAbout(h.position,i.angle,n.position,h.position)),a.update(h.bounds,h.vertices,n.velocity)}i.angle=0,i.x=0,i.y=0}}}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vertices"),s=t("../core/Sleeping"),o=t("../core/Mouse"),a=t("../core/Events"),u=t("../collision/Detector"),l=t("./Constraint"),h=t("../body/Composite"),c=t("../core/Common"),f=t("../geometry/Bounds");!function(){i.create=function(e,n){var r=(e?e.mouse:null)||(n?n.mouse:null);r||(e&&e.render&&e.render.canvas?r=o.create(e.render.canvas):n&&n.element?r=o.create(n.element):(r=o.create(),c.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var s=l.create({label:"Mouse Constraint",pointA:r.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),u={type:"mouseConstraint",mouse:r,element:null,body:null,constraint:s,collisionFilter:{category:1,mask:4294967295,group:0}},f=c.extend(u,n);return a.on(e,"beforeUpdate",function(){var n=h.allBodies(e.world);i.update(f,n),t(f)}),f},i.update=function(t,e){var n=t.mouse,i=t.constraint,o=t.body;if(0===n.button){if(i.bodyB)s.set(i.bodyB,!1),i.pointA=n.position;else for(var l=0;l<e.length;l++)if(o=e[l],f.contains(o.bounds,n.position)&&u.canCollide(o.collisionFilter,t.collisionFilter))for(var h=o.parts.length>1?1:0;h<o.parts.length;h++){var c=o.parts[h];if(r.contains(c.vertices,n.position)){i.pointA=n.position,i.bodyB=t.body=o,i.pointB={x:n.position.x-o.position.x,y:n.position.y-o.position.y},i.angleB=o.angle,s.set(o,!1),a.trigger(t,"startdrag",{mouse:n,body:o});break}}}else i.bodyB=t.body=null,i.pointB=null,o&&a.trigger(t,"enddrag",{mouse:n,body:o})};var t=function(t){var e=t.mouse,n=e.sourceEvents;n.mousemove&&a.trigger(t,"mousemove",{mouse:e}),n.mousedown&&a.trigger(t,"mousedown",{mouse:e}),n.mouseup&&a.trigger(t,"mouseup",{mouse:e}),o.clearSourceEvents(e)}}()},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(t,e,n){var i={};e.exports=i,function(){i._nextId=0,i._seed=0,i.extend=function(t,e){var n,r;"boolean"==typeof e?(n=2,r=e):(n=1,r=!0);for(var s=n;s<arguments.length;s++){var o=arguments[s];if(o)for(var a in o)r&&o[a]&&o[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=o[a]:(t[a]=t[a]||{},i.extend(t[a],r,o[a])):t[a]=o[a]}return t},i.clone=function(t,e){return i.extend({},e,t)},i.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},i.values=function(t){var e=[];if(Object.keys){for(var n=Object.keys(t),i=0;i<n.length;i++)e.push(t[n[i]]);return e}for(var r in t)e.push(t[r]);return e},i.get=function(t,e,n,i){e=e.split(".").slice(n,i);for(var r=0;r<e.length;r+=1)t=t[e[r]];return t},i.set=function(t,e,n,r,s){var o=e.split(".").slice(r,s);return i.get(t,e,0,-1)[o[o.length-1]]=n,n},i.shadeColor=function(t,e){var n=parseInt(t.slice(1),16),i=Math.round(2.55*e),r=(n>>16)+i,s=(n>>8&255)+i,o=(255&n)+i;return"#"+(16777216+65536*(r<255?r<1?0:r:255)+256*(s<255?s<1?0:s:255)+(o<255?o<1?0:o:255)).toString(16).slice(1)},i.shuffle=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(i.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t},i.choose=function(t){return t[Math.floor(i.random()*t.length)]},i.isElement=function(t){
try{return t instanceof HTMLElement}catch(e){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument}},i.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},i.isFunction=function(t){return"function"==typeof t},i.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},i.isString=function(t){return"[object String]"===toString.call(t)},i.clamp=function(t,e,n){return t<e?e:t>n?n:t},i.sign=function(t){return t<0?-1:1},i.now=function(){var t=window.performance||{};return t.now=function(){return t.now||t.webkitNow||t.msNow||t.oNow||t.mozNow||function(){return+new Date}}(),t.now()},i.random=function(e,n){return e="undefined"!=typeof e?e:0,n="undefined"!=typeof n?n:1,e+t()*(n-e)};var t=function(){return i._seed=(9301*i._seed+49297)%233280,i._seed/233280};i.colorToNumber=function(t){return t=t.replace("#",""),3==t.length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},i.logLevel=1,i.log=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.info=function(){console&&i.logLevel>0&&i.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.warn=function(){console&&i.logLevel>0&&i.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},i.nextId=function(){return i._nextId++},i.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},i.map=function(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i+=1)n.push(e(t[i]));return n},i.topologicalSort=function(t){var n=[],i=[],r=[];for(var s in t)i[s]||r[s]||e(s,i,r,t,n);return n};var e=function(t,n,i,r,s){var o=r[t]||[];i[t]=!0;for(var a=0;a<o.length;a+=1){var u=o[a];i[u]||n[u]||e(u,n,i,r,s)}i[t]=!1,n[t]=!0,s.push(t)};i.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var n=arguments[e];n._chained?t.push.apply(t,n._chained):t.push(n)}var i=function(){for(var e,n=new Array(arguments.length),i=0,r=arguments.length;i<r;i++)n[i]=arguments[i];for(i=0;i<t.length;i+=1){var s=t[i].apply(e,n);"undefined"!=typeof s&&(e=s)}return e};return i._chained=t,i},i.chainPathBefore=function(t,e,n){return i.set(t,e,i.chain(n,i.get(t,e)))},i.chainPathAfter=function(t,e,n){return i.set(t,e,i.chain(i.get(t,e),n))}}()},{}],15:[function(t,e,n){var i={};e.exports=i;var r=t("../body/World"),s=t("./Sleeping"),o=t("../collision/Resolver"),a=t("../render/Render"),u=t("../collision/Pairs"),l=(t("./Metrics"),t("../collision/Grid")),h=t("./Events"),c=t("../body/Composite"),f=t("../constraint/Constraint"),d=t("./Common"),p=t("../body/Body");!function(){i.create=function(t,e){e=d.isElement(t)?e:t,t=d.isElement(t)?t:null,e=e||{},(t||e.render)&&d.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:l}},i=d.extend(n,e);if(t||i.render){var s={element:t,controller:a};i.render=d.extend(s,i.render)}return i.render&&i.render.controller&&(i.render=i.render.controller.create(i.render)),i.render&&(i.render.engine=i),i.world=e.world||r.create(i.world),i.pairs=u.create(),i.broadphase=i.broadphase.controller.create(i.broadphase),i.metrics=i.metrics||{extended:!1},i},i.update=function(i,r,a){r=r||1e3/60,a=a||1;var l,d=i.world,p=i.timing,_=i.broadphase,g=[];p.timestamp+=r*p.timeScale;var v={timestamp:p.timestamp};h.trigger(i,"beforeUpdate",v);var m=c.allBodies(d),y=c.allConstraints(d);for(i.enableSleeping&&s.update(m,p.timeScale),e(m,d.gravity),n(m,r,p.timeScale,a,d.bounds),l=0;l<i.constraintIterations;l++)f.solveAll(y,p.timeScale);f.postSolveAll(m),_.controller?(d.isModified&&_.controller.clear(_),_.controller.update(_,m,i,d.isModified),g=_.pairsList):g=m,d.isModified&&c.setModified(d,!1,!1,!0);var x=_.detector(g,i),b=i.pairs,w=p.timestamp;for(u.update(b,x,w),u.removeOld(b,w),i.enableSleeping&&s.afterCollisions(b.list,p.timeScale),b.collisionStart.length>0&&h.trigger(i,"collisionStart",{pairs:b.collisionStart}),o.preSolvePosition(b.list),l=0;l<i.positionIterations;l++)o.solvePosition(b.list,p.timeScale);for(o.postSolvePosition(m),o.preSolveVelocity(b.list),l=0;l<i.velocityIterations;l++)o.solveVelocity(b.list,p.timeScale);return b.collisionActive.length>0&&h.trigger(i,"collisionActive",{pairs:b.collisionActive}),b.collisionEnd.length>0&&h.trigger(i,"collisionEnd",{pairs:b.collisionEnd}),t(m),h.trigger(i,"afterUpdate",v),i},i.merge=function(t,e){if(d.extend(t,e),e.world){t.world=e.world,i.clear(t);for(var n=c.allBodies(t.world),r=0;r<n.length;r++){var o=n[r];s.set(o,!1),o.id=d.nextId()}}},i.clear=function(t){var e=t.world;u.clear(t.pairs);var n=t.broadphase;if(n.controller){var i=c.allBodies(e);n.controller.clear(n),n.controller.update(n,i,t,!0)}};var t=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.force.x=0,n.force.y=0,n.torque=0}},e=function(t,e){var n="undefined"!=typeof e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==n)for(var i=0;i<t.length;i++){var r=t[i];r.isStatic||r.isSleeping||(r.force.y+=r.mass*e.y*n,r.force.x+=r.mass*e.x*n)}},n=function(t,e,n,i,r){for(var s=0;s<t.length;s++){var o=t[s];o.isStatic||o.isSleeping||p.update(o,e,n,i)}}}()},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(t,e,n){var i={};e.exports=i;var r=t("./Common");!function(){i.on=function(t,e,n){for(var i,r=e.split(" "),s=0;s<r.length;s++)i=r[s],t.events=t.events||{},t.events[i]=t.events[i]||[],t.events[i].push(n);return n},i.off=function(t,e,n){if(!e)return void(t.events={});"function"==typeof e&&(n=e,e=r.keys(t.events).join(" "));for(var i=e.split(" "),s=0;s<i.length;s++){var o=t.events[i[s]],a=[];if(n&&o)for(var u=0;u<o.length;u++)o[u]!==n&&a.push(o[u]);t.events[i[s]]=a}},i.trigger=function(t,e,n){var i,s,o,a;if(t.events){n||(n={}),i=e.split(" ");for(var u=0;u<i.length;u++)if(s=i[u],o=t.events[s]){a=r.clone(n,!1),a.name=s,a.source=t;for(var l=0;l<o.length;l++)o[l].apply(t,[a])}}}}()},{"./Common":14}],17:[function(t,e,n){var i={};e.exports=i;var r=t("./Plugin"),s=t("./Common");!function(){i.name="matter-js",i.version="0.12.0",i.uses=[],i.used=[],i.use=function(){r.use(i,Array.prototype.slice.call(arguments))},i.before=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathBefore(i,t,e)},i.after=function(t,e){return t=t.replace(/^Matter./,""),s.chainPathAfter(i,t,e)}}()},{"./Common":14,"./Plugin":20}],18:[function(t,e,n){},{"../body/Composite":2,"./Common":14}],19:[function(t,e,n){var i={};e.exports=i;var r=t("../core/Common");!function(){i.create=function(e){var n={};return e||r.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=e||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=n.element.getAttribute("data-pixel-ratio")||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(e){var i=t(e,n.element,n.pixelRatio),r=e.changedTouches;r&&(n.button=0,e.preventDefault()),n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=e},n.mousedown=function(e){var i=t(e,n.element,n.pixelRatio),r=e.changedTouches;r?(n.button=0,e.preventDefault()):n.button=e.button,n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=e},n.mouseup=function(e){var i=t(e,n.element,n.pixelRatio),r=e.changedTouches;r&&e.preventDefault(),n.button=-1,n.absolute.x=i.x,n.absolute.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=e},n.mousewheel=function(t){n.wheelDelta=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),t.preventDefault()},i.setElement(n,n.element),n},i.setElement=function(t,e){t.element=e,e.addEventListener("mousemove",t.mousemove),e.addEventListener("mousedown",t.mousedown),e.addEventListener("mouseup",t.mouseup),e.addEventListener("mousewheel",t.mousewheel),e.addEventListener("DOMMouseScroll",t.mousewheel),e.addEventListener("touchmove",t.mousemove),e.addEventListener("touchstart",t.mousedown),e.addEventListener("touchend",t.mouseup)},i.clearSourceEvents=function(t){t.sourceEvents.mousemove=null,t.sourceEvents.mousedown=null,t.sourceEvents.mouseup=null,t.sourceEvents.mousewheel=null,t.wheelDelta=0},i.setOffset=function(t,e){t.offset.x=e.x,t.offset.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y},i.setScale=function(t,e){t.scale.x=e.x,t.scale.y=e.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y};var t=function(t,e,n){var i,r,s=e.getBoundingClientRect(),o=document.documentElement||document.body.parentNode||document.body,a=void 0!==window.pageXOffset?window.pageXOffset:o.scrollLeft,u=void 0!==window.pageYOffset?window.pageYOffset:o.scrollTop,l=t.changedTouches;return l?(i=l[0].pageX-s.left-a,r=l[0].pageY-s.top-u):(i=t.pageX-s.left-a,r=t.pageY-s.top-u),{x:i/(e.clientWidth/(e.width||e.clientWidth)*n),y:r/(e.clientHeight/(e.height||e.clientHeight)*n)}}}()},{"../core/Common":14}],20:[function(t,e,n){var i={};e.exports=i;var r=t("./Common");!function(){i._registry={},i.register=function(t){if(i.isPlugin(t)||r.warn("Plugin.register:",i.toString(t),"does not implement all required fields."),t.name in i._registry){var e=i._registry[t.name],n=i.versionParse(t.version).number,s=i.versionParse(e.version).number;n>s?(r.warn("Plugin.register:",i.toString(e),"was upgraded to",i.toString(t)),i._registry[t.name]=t):n<s?r.warn("Plugin.register:",i.toString(e),"can not be downgraded to",i.toString(t)):t!==e&&r.warn("Plugin.register:",i.toString(t),"is already registered to different plugin object")}else i._registry[t.name]=t;return t},i.resolve=function(t){return i._registry[i.dependencyParse(t).name]},i.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},i.isPlugin=function(t){return t&&t.name&&t.version&&t.install},i.isUsed=function(t,e){return t.used.indexOf(e)>-1},i.isFor=function(t,e){var n=t["for"]&&i.dependencyParse(t["for"]);return!t["for"]||e.name===n.name&&i.versionSatisfies(e.version,n.range)},i.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0===t.uses.length)return void r.warn("Plugin.use:",i.toString(t),"does not specify any dependencies to install.");for(var n=i.dependencies(t),s=r.topologicalSort(n),o=[],a=0;a<s.length;a+=1)if(s[a]!==t.name){var u=i.resolve(s[a]);u?i.isUsed(t,u.name)||(i.isFor(u,t)||(r.warn("Plugin.use:",i.toString(u),"is for",u["for"],"but installed on",i.toString(t)+"."),u._warned=!0),u.install?u.install(t):(r.warn("Plugin.use:",i.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(o.push(" "+i.toString(u)),delete u._warned):o.push(" "+i.toString(u)),t.used.push(u.name)):o.push(" "+s[a])}o.length>0&&r.info(o.join("  "))},i.dependencies=function(t,e){var n=i.dependencyParse(t),s=n.name;if(e=e||{},!(s in e)){t=i.resolve(t)||t,e[s]=r.map(t.uses||[],function(e){i.isPlugin(e)&&i.register(e);var s=i.dependencyParse(e),o=i.resolve(e);return o&&!i.versionSatisfies(o.version,s.range)?(r.warn("Plugin.dependencies:",i.toString(o),"does not satisfy",i.toString(s),"used by",i.toString(n)+"."),o._warned=!0,t._warned=!0):o||(r.warn("Plugin.dependencies:",i.toString(e),"used by",i.toString(n),"could not be resolved."),t._warned=!0),s.name});for(var o=0;o<e[s].length;o+=1)i.dependencies(e[s][o],e);return e}},i.dependencyParse=function(t){if(r.isString(t)){var e=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return e.test(t)||r.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}}return{name:t.name,range:t.range||t.version}},i.versionParse=function(t){var e=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;e.test(t)||r.warn("Plugin.versionParse:",t,"is not a valid version or range.");var n=t.split("-");t=n[0];var i=isNaN(Number(t[0])),s=i?t.substr(1):t,o=r.map(s.split("."),function(t){return Number(t)});return{isRange:i,version:s,range:t,operator:i?t[0]:"",parts:o,prerelease:n[1],number:1e8*o[0]+1e4*o[1]+o[2]}},i.versionSatisfies=function(t,e){e=e||"*";var n=i.versionParse(e),r=n.parts,s=i.versionParse(t),o=s.parts;if(n.isRange){if("*"===n.operator||"*"===t)return!0;if("~"===n.operator)return o[0]===r[0]&&o[1]===r[1]&&o[2]>=r[2];if("^"===n.operator)return r[0]>0?o[0]===r[0]&&s.number>=n.number:r[1]>0?o[1]===r[1]&&o[2]>=r[2]:o[2]===r[2]}return t===e||"*"===t}}()},{"./Common":14}],21:[function(t,e,n){var i={};e.exports=i;var r=t("./Events"),s=t("./Engine"),o=t("./Common");!function(){var t,e;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!t){var n;t=function(t){n=setTimeout(function(){t(o.now())},1e3/60)},e=function(){clearTimeout(n)}}i.create=function(t){var e={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},n=o.extend(e,t);return n.delta=n.delta||1e3/n.fps,n.deltaMin=n.deltaMin||1e3/n.fps,n.deltaMax=n.deltaMax||1e3/(.5*n.fps),n.fps=1e3/n.delta,n},i.run=function(e,n){return"undefined"!=typeof e.positionIterations&&(n=e,e=i.create()),function r(s){e.frameRequestId=t(r),s&&e.enabled&&i.tick(e,n,s)}(),e},i.tick=function(t,e,n){var i,o=e.timing,a=1,u={timestamp:o.timestamp};r.trigger(t,"beforeTick",u),r.trigger(e,"beforeTick",u),t.isFixed?i=t.delta:(i=n-t.timePrev||t.delta,t.timePrev=n,t.deltaHistory.push(i),t.deltaHistory=t.deltaHistory.slice(-t.deltaSampleSize),i=Math.min.apply(null,t.deltaHistory),i=i<t.deltaMin?t.deltaMin:i,i=i>t.deltaMax?t.deltaMax:i,a=i/t.delta,t.delta=i),0!==t.timeScalePrev&&(a*=o.timeScale/t.timeScalePrev),0===o.timeScale&&(a=0),t.timeScalePrev=o.timeScale,t.correction=a,t.frameCounter+=1,n-t.counterTimestamp>=1e3&&(t.fps=t.frameCounter*((n-t.counterTimestamp)/1e3),t.counterTimestamp=n,t.frameCounter=0),r.trigger(t,"tick",u),r.trigger(e,"tick",u),e.world.isModified&&e.render&&e.render.controller&&e.render.controller.clear&&e.render.controller.clear(e.render),r.trigger(t,"beforeUpdate",u),s.update(e,i,a),r.trigger(t,"afterUpdate",u),e.render&&e.render.controller&&(r.trigger(t,"beforeRender",u),r.trigger(e,"beforeRender",u),e.render.controller.world(e.render),r.trigger(t,"afterRender",u),r.trigger(e,"afterRender",u)),r.trigger(t,"afterTick",u),r.trigger(e,"afterTick",u)},i.stop=function(t){e(t.frameRequestId)},i.start=function(t,e){i.run(t,e)}}()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(t,e,n){var i={};e.exports=i;var r=t("./Events");!function(){i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(t,e){for(var n=e*e*e,r=0;r<t.length;r++){var s=t[r],o=s.speed*s.speed+s.angularSpeed*s.angularSpeed;if(0===s.force.x&&0===s.force.y){var a=Math.min(s.motion,o),u=Math.max(s.motion,o);s.motion=i._minBias*a+(1-i._minBias)*u,s.sleepThreshold>0&&s.motion<i._motionSleepThreshold*n?(s.sleepCounter+=1,s.sleepCounter>=s.sleepThreshold&&i.set(s,!0)):s.sleepCounter>0&&(s.sleepCounter-=1)}else i.set(s,!1)}},i.afterCollisions=function(t,e){for(var n=e*e*e,r=0;r<t.length;r++){var s=t[r];if(s.isActive){var o=s.collision,a=o.bodyA.parent,u=o.bodyB.parent;if(!(a.isSleeping&&u.isSleeping||a.isStatic||u.isStatic)&&(a.isSleeping||u.isSleeping)){var l=a.isSleeping&&!a.isStatic?a:u,h=l===a?u:a;!l.isStatic&&h.motion>i._motionWakeThreshold*n&&i.set(l,!1)}}}},i.set=function(t,e){var n=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,n||r.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,n&&r.trigger(t,"sleepEnd"))}}()},{"./Events":16}],23:[function(t,e,n){(function(n){var i={};e.exports=i;var r=t("../geometry/Vertices"),s=t("../core/Common"),o=t("../body/Body"),a=t("../geometry/Bounds"),u=t("../geometry/Vector"),l="undefined"!=typeof window?window.decomp:"undefined"!=typeof n?n.decomp:null;!function(){i.rectangle=function(t,e,n,i,a){a=a||{};var u={label:"Rectangle Body",position:{x:t,y:e},vertices:r.fromPath("L 0 0 L "+n+" 0 L "+n+" "+i+" L 0 "+i)};if(a.chamfer){var l=a.chamfer;u.vertices=r.chamfer(u.vertices,l.radius,l.quality,l.qualityMin,l.qualityMax),delete a.chamfer}return o.create(s.extend({},u,a))},i.trapezoid=function(t,e,n,i,a,u){u=u||{},a*=.5;var l,h=(1-2*a)*n,c=n*a,f=c+h,d=f+c;l=a<.5?"L 0 0 L "+c+" "+-i+" L "+f+" "+-i+" L "+d+" 0":"L 0 0 L "+f+" "+-i+" L "+d+" 0";var p={label:"Trapezoid Body",position:{x:t,y:e},vertices:r.fromPath(l)};if(u.chamfer){var _=u.chamfer;p.vertices=r.chamfer(p.vertices,_.radius,_.quality,_.qualityMin,_.qualityMax),delete u.chamfer}return o.create(s.extend({},p,u))},i.circle=function(t,e,n,r,o){r=r||{};var a={label:"Circle Body",circleRadius:n};o=o||25;var u=Math.ceil(Math.max(10,Math.min(o,n)));return u%2===1&&(u+=1),i.polygon(t,e,u,n,s.extend({},a,r))},i.polygon=function(t,e,n,a,u){if(u=u||{},n<3)return i.circle(t,e,a,u);for(var l=2*Math.PI/n,h="",c=.5*l,f=0;f<n;f+=1){var d=c+f*l,p=Math.cos(d)*a,_=Math.sin(d)*a;h+="L "+p.toFixed(3)+" "+_.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:t,y:e},vertices:r.fromPath(h)};if(u.chamfer){var v=u.chamfer;g.vertices=r.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete u.chamfer}return o.create(s.extend({},g,u))},i.fromVertices=function(t,e,n,i,h,c,f){var d,p,_,g,v,m,y,x,b;for(i=i||{},p=[],h="undefined"!=typeof h&&h,c="undefined"!=typeof c?c:.01,f="undefined"!=typeof f?f:10,l||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(n[0])||(n=[n]),x=0;x<n.length;x+=1)if(g=n[x],_=r.isConvex(g),_||!l)g=_?r.clockwiseSort(g):r.hull(g),p.push({position:{x:t,y:e},vertices:g});else{var w=g.map(function(t){return[t.x,t.y]});l.makeCCW(w),c!==!1&&l.removeCollinearPoints(w,c);var S=l.quickDecomp(w);for(v=0;v<S.length;v++){var C=S[v],T=C.map(function(t){return{x:t[0],y:t[1]}});f>0&&r.area(T)<f||p.push({position:r.centre(T),vertices:T})}}for(v=0;v<p.length;v++)p[v]=o.create(s.extend(p[v],i));if(h){var P=5;for(v=0;v<p.length;v++){var A=p[v];for(m=v+1;m<p.length;m++){var k=p[m];if(a.overlaps(A.bounds,k.bounds)){var M=A.vertices,O=k.vertices;for(y=0;y<A.vertices.length;y++)for(b=0;b<k.vertices.length;b++){var I=u.magnitudeSquared(u.sub(M[(y+1)%M.length],O[b])),R=u.magnitudeSquared(u.sub(M[y],O[(b+1)%O.length]));I<P&&R<P&&(M[y].isInternal=!0,O[b].isInternal=!0)}}}}}return p.length>1?(d=o.create(s.extend({parts:p.slice(0)},i)),o.setPosition(d,{x:t,y:e}),d):p[0]}}()}).call(this,"undefined"!=typeof i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(t,e,n){var i={};e.exports=i;var r=t("../body/Composite"),s=t("../constraint/Constraint"),o=t("../core/Common"),a=t("../body/Body"),u=t("./Bodies");!function(){i.stack=function(t,e,n,i,s,o,u){for(var l,h=r.create({label:"Stack"}),c=t,f=e,d=0,p=0;p<i;p++){for(var _=0,g=0;g<n;g++){var v=u(c,f,g,p,l,d);if(v){var m=v.bounds.max.y-v.bounds.min.y,y=v.bounds.max.x-v.bounds.min.x;m>_&&(_=m),a.translate(v,{x:.5*y,y:.5*m}),c=v.bounds.max.x+s,r.addBody(h,v),l=v,d+=1}else c+=s}f+=_+o,c=t}return h},i.chain=function(t,e,n,i,a,u){for(var l=t.bodies,h=1;h<l.length;h++){var c=l[h-1],f=l[h],d=c.bounds.max.y-c.bounds.min.y,p=c.bounds.max.x-c.bounds.min.x,_=f.bounds.max.y-f.bounds.min.y,g=f.bounds.max.x-f.bounds.min.x,v={bodyA:c,pointA:{x:p*e,y:d*n},bodyB:f,pointB:{x:g*i,y:_*a}},m=o.extend(v,u);r.addConstraint(t,s.create(m))}return t.label+=" Chain",t},i.mesh=function(t,e,n,i,a){var u,l,h,c,f,d=t.bodies;for(u=0;u<n;u++){for(l=1;l<e;l++)h=d[l-1+u*e],c=d[l+u*e],r.addConstraint(t,s.create(o.extend({bodyA:h,bodyB:c},a)));if(u>0)for(l=0;l<e;l++)h=d[l+(u-1)*e],c=d[l+u*e],r.addConstraint(t,s.create(o.extend({bodyA:h,bodyB:c},a))),i&&l>0&&(f=d[l-1+(u-1)*e],r.addConstraint(t,s.create(o.extend({bodyA:f,bodyB:c},a)))),i&&l<e-1&&(f=d[l+1+(u-1)*e],r.addConstraint(t,s.create(o.extend({bodyA:f,bodyB:c},a))))}return t.label+=" Mesh",t},i.pyramid=function(t,e,n,r,s,o,u){return i.stack(t,e,n,r,s,o,function(e,i,o,l,h,c){var f=Math.min(r,Math.ceil(n/2)),d=h?h.bounds.max.x-h.bounds.min.x:0;if(!(l>f)){l=f-l;var p=l,_=n-1-l;if(!(o<p||o>_)){1===c&&a.translate(h,{x:(o+(n%2===1?1:-1))*d,y:0});var g=h?o*d:0;return u(t+g+o*s,i,o,l,h,c)}}})},i.newtonsCradle=function(t,e,n,i,o){for(var a=r.create({label:"Newtons Cradle"}),l=0;l<n;l++){var h=1.9,c=u.circle(t+l*(i*h),e+o,i,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),f=s.create({pointA:{x:t+l*(i*h),y:e},bodyB:c});r.addBody(a,c),r.addConstraint(a,f)}return a},i.car=function(t,e,n,i,o){var l=a.nextGroup(!0),h=-20,c=.5*-n+h,f=.5*n-h,d=0,p=r.create({label:"Car"}),_=u.trapezoid(t,e,n,i,.3,{collisionFilter:{group:l},friction:.01,chamfer:{radius:10}}),g=u.circle(t+c,e+d,o,{collisionFilter:{group:l},friction:.8,density:.01}),v=u.circle(t+f,e+d,o,{collisionFilter:{group:l},friction:.8,density:.01}),m=s.create({bodyA:_,pointA:{x:c,y:d},bodyB:g,stiffness:.2,render:{lineWidth:0}}),y=s.create({bodyA:_,pointA:{x:f,y:d},bodyB:v,stiffness:.2,render:{lineWidth:0}});return r.addBody(p,_),r.addBody(p,g),r.addBody(p,v),r.addConstraint(p,m),r.addConstraint(p,y),p},i.softBody=function(t,e,n,r,s,a,l,h,c,f){c=o.extend({inertia:1/0},c),f=o.extend({stiffness:.4},f);var d=i.stack(t,e,n,r,s,a,function(t,e){return u.circle(t,e,h,c)});return i.mesh(d,n,r,l,f),d.label="Soft Body",d}}()},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vector"),s=t("../core/Common");!function(){i.fromVertices=function(t){for(var e={},n=0;n<t.length;n++){var i=(n+1)%t.length,o=r.normalise({x:t[i].y-t[n].y,y:t[n].x-t[i].x}),a=0===o.y?1/0:o.x/o.y;a=a.toFixed(3).toString(),e[a]=o}return s.values(e)},i.rotate=function(t,e){if(0!==e)for(var n=Math.cos(e),i=Math.sin(e),r=0;r<t.length;r++){var s,o=t[r];s=o.x*n-o.y*i,o.y=o.x*i+o.y*n,o.x=s}}}()},{"../core/Common":14,"../geometry/Vector":28}],26:[function(t,e,n){var i={};e.exports=i,function(){i.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&i.update(e,t),e},i.update=function(t,e,n){t.min.x=1/0,t.max.x=-(1/0),t.min.y=1/0,t.max.y=-(1/0);for(var i=0;i<e.length;i++){var r=e[i];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}n&&(n.x>0?t.max.x+=n.x:t.min.x+=n.x,n.y>0?t.max.y+=n.y:t.min.y+=n.y)},i.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},i.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},i.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},i.shift=function(t,e){var n=t.max.x-t.min.x,i=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+n,t.min.y=e.y,t.max.y=e.y+i}}()},{}],27:[function(t,e,n){var i={};e.exports=i;t("../geometry/Bounds");!function(){i.pathToVertices=function(e,n){var i,r,s,o,a,u,l,h,c,f,d,p,_=[],g=0,v=0,m=0;n=n||15;var y=function(t,e,n){var i=n%2===1&&n>1;if(!c||t!=c.x||e!=c.y){c&&i?(d=c.x,p=c.y):(d=0,p=0);var r={x:d+t,y:p+e};!i&&c||(c=r),_.push(r),v=d+t,m=p+e}},x=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":v=t.x,m=t.y;break;case"H":v=t.x;break;case"V":m=t.y}y(v,m,t.pathSegType)}};for(t(e),s=e.getTotalLength(),u=[],i=0;i<e.pathSegList.numberOfItems;i+=1)u.push(e.pathSegList.getItem(i));for(l=u.concat();g<s;){if(f=e.getPathSegAtLength(g),a=u[f],a!=h){for(;l.length&&l[0]!=a;)x(l.shift());h=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=e.getPointAtLength(g),y(o.x,o.y,0)}g+=n}for(i=0,r=l.length;i<r;++i)x(l[i]);return _};var t=function(t){for(var e,n,i,r,s,o,a=t.pathSegList,u=0,l=0,h=a.numberOfItems,c=0;c<h;++c){var f=a.getItem(c),d=f.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(d))"x"in f&&(u=f.x),"y"in f&&(l=f.y);else switch("x1"in f&&(i=u+f.x1),"x2"in f&&(s=u+f.x2),"y1"in f&&(r=l+f.y1),"y2"in f&&(o=l+f.y2),"x"in f&&(u+=f.x),"y"in f&&(l+=f.y),d){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(u,l),c);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(u,l),c);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(u),c);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(l),c);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(u,l,i,r,s,o),c);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(u,l,s,o),c);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(u,l,i,r),c);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(u,l),c);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(u,l,f.r1,f.r2,f.angle,f.largeArcFlag,f.sweepFlag),c);break;case"z":case"Z":u=e,l=n}"M"!=d&&"m"!=d||(e=u,n=l)}}}()},{"../geometry/Bounds":26}],28:[function(t,e,n){var i={};e.exports=i,function(){i.create=function(t,e){return{x:t||0,y:e||0}},i.clone=function(t){return{x:t.x,y:t.y}},i.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},i.rotate=function(t,e){var n=Math.cos(e),i=Math.sin(e);return{x:t.x*n-t.y*i,y:t.x*i+t.y*n}},i.rotateAbout=function(t,e,n,i){var r=Math.cos(e),s=Math.sin(e);i||(i={});var o=n.x+((t.x-n.x)*r-(t.y-n.y)*s);return i.y=n.y+((t.x-n.x)*s+(t.y-n.y)*r),i.x=o,i},i.normalise=function(t){var e=i.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},i.dot=function(t,e){return t.x*e.x+t.y*e.y},i.cross=function(t,e){return t.x*e.y-t.y*e.x},i.cross3=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},i.add=function(t,e,n){return n||(n={}),n.x=t.x+e.x,n.y=t.y+e.y,n},i.sub=function(t,e,n){return n||(n={}),n.x=t.x-e.x,n.y=t.y-e.y,n},i.mult=function(t,e){return{x:t.x*e,y:t.y*e}},i.div=function(t,e){return{x:t.x/e,y:t.y/e}},i.perp=function(t,e){return e=e===!0?-1:1,{x:e*-t.y,y:e*t.x}},i.neg=function(t){return{x:-t.x,y:-t.y}},i.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}()},{}],29:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Vector"),s=t("../core/Common");!function(){i.create=function(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i],s={x:r.x,y:r.y,index:i,body:e,isInternal:!1};n.push(s)}return n},i.fromPath=function(t,e){var n=/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,r=[];return t.replace(n,function(t,e,n){r.push({x:parseFloat(e),y:parseFloat(n)})}),i.create(r,e)},i.centre=function(t){for(var e,n,s,o=i.area(t,!0),a={x:0,y:0},u=0;u<t.length;u++)s=(u+1)%t.length,e=r.cross(t[u],t[s]),n=r.mult(r.add(t[u],t[s]),e),a=r.add(a,n);return r.div(a,6*o)},i.mean=function(t){for(var e={x:0,y:0},n=0;n<t.length;n++)e.x+=t[n].x,e.y+=t[n].y;return r.div(e,t.length)},i.area=function(t,e){for(var n=0,i=t.length-1,r=0;r<t.length;r++)n+=(t[i].x-t[r].x)*(t[i].y+t[r].y),i=r;return e?n/2:Math.abs(n)/2},i.inertia=function(t,e){for(var n,i,s=0,o=0,a=t,u=0;u<a.length;u++)i=(u+1)%a.length,n=Math.abs(r.cross(a[i],a[u])),s+=n*(r.dot(a[i],a[i])+r.dot(a[i],a[u])+r.dot(a[u],a[u])),o+=n;return e/6*(s/o)},i.translate=function(t,e,n){var i;if(n)for(i=0;i<t.length;i++)t[i].x+=e.x*n,t[i].y+=e.y*n;else for(i=0;i<t.length;i++)t[i].x+=e.x,t[i].y+=e.y;return t},i.rotate=function(t,e,n){if(0!==e){for(var i=Math.cos(e),r=Math.sin(e),s=0;s<t.length;s++){var o=t[s],a=o.x-n.x,u=o.y-n.y;o.x=n.x+(a*i-u*r),o.y=n.y+(a*r+u*i)}return t}},i.contains=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=t[(n+1)%t.length];if((e.x-i.x)*(r.y-i.y)+(e.y-i.y)*(i.x-r.x)>0)return!1}return!0},i.scale=function(t,e,n,s){if(1===e&&1===n)return t;s=s||i.centre(t);for(var o,a,u=0;u<t.length;u++)o=t[u],a=r.sub(o,s),t[u].x=s.x+a.x*e,t[u].y=s.y+a.y*n;return t},i.chamfer=function(t,e,n,i,o){e=e||[8],e.length||(e=[e]),n="undefined"!=typeof n?n:-1,i=i||2,o=o||14;for(var a=[],u=0;u<t.length;u++){var l=t[u-1>=0?u-1:t.length-1],h=t[u],c=t[(u+1)%t.length],f=e[u<e.length?u:e.length-1];if(0!==f){var d=r.normalise({x:h.y-l.y,y:l.x-h.x}),p=r.normalise({x:c.y-h.y,y:h.x-c.x}),_=Math.sqrt(2*Math.pow(f,2)),g=r.mult(s.clone(d),f),v=r.normalise(r.mult(r.add(d,p),.5)),m=r.sub(h,r.mult(v,_)),y=n;n===-1&&(y=1.75*Math.pow(f,.32)),y=s.clamp(y,i,o),y%2===1&&(y+=1);for(var x=Math.acos(r.dot(d,p)),b=x/y,w=0;w<y;w++)a.push(r.add(r.rotate(g,b*w),m))}else a.push(h)}return a},i.clockwiseSort=function(t){var e=i.mean(t);return t.sort(function(t,n){return r.angle(e,t)-r.angle(e,n)}),t},i.isConvex=function(t){var e,n,i,r,s=0,o=t.length;if(o<3)return null;for(e=0;e<o;e++)if(n=(e+1)%o,i=(e+2)%o,r=(t[n].x-t[e].x)*(t[i].y-t[n].y),r-=(t[n].y-t[e].y)*(t[i].x-t[n].x),r<0?s|=1:r>0&&(s|=2),3===s)return!1;return 0!==s||null},i.hull=function(t){var e,n,i=[],s=[];for(t=t.slice(0),t.sort(function(t,e){var n=t.x-e.x;return 0!==n?n:t.y-e.y}),n=0;n<t.length;n++){for(e=t[n];s.length>=2&&r.cross3(s[s.length-2],s[s.length-1],e)<=0;)s.pop();s.push(e)}for(n=t.length-1;n>=0;n--){for(e=t[n];i.length>=2&&r.cross3(i[i.length-2],i[i.length-1],e)<=0;)i.pop();i.push(e)}return i.pop(),s.pop(),i.concat(s)}}()},{"../core/Common":14,"../geometry/Vector":28}],30:[function(t,e,n){var i=e.exports=t("../core/Matter");i.Body=t("../body/Body"),i.Composite=t("../body/Composite"),i.World=t("../body/World"),i.Contact=t("../collision/Contact"),i.Detector=t("../collision/Detector"),i.Grid=t("../collision/Grid"),i.Pairs=t("../collision/Pairs"),i.Pair=t("../collision/Pair"),i.Query=t("../collision/Query"),i.Resolver=t("../collision/Resolver"),i.SAT=t("../collision/SAT"),i.Constraint=t("../constraint/Constraint"),i.MouseConstraint=t("../constraint/MouseConstraint"),i.Common=t("../core/Common"),i.Engine=t("../core/Engine"),i.Events=t("../core/Events"),i.Mouse=t("../core/Mouse"),i.Runner=t("../core/Runner"),i.Sleeping=t("../core/Sleeping"),i.Plugin=t("../core/Plugin"),i.Bodies=t("../factory/Bodies"),i.Composites=t("../factory/Composites"),i.Axes=t("../geometry/Axes"),i.Bounds=t("../geometry/Bounds"),i.Svg=t("../geometry/Svg"),i.Vector=t("../geometry/Vector"),i.Vertices=t("../geometry/Vertices"),i.Render=t("../render/Render"),i.RenderPixi=t("../render/RenderPixi"),i.World.add=i.Composite.add,i.World.remove=i.Composite.remove,i.World.addComposite=i.Composite.addComposite,i.World.addBody=i.Composite.addBody,i.World.addConstraint=i.Composite.addConstraint,i.World.clear=i.Composite.clear,i.Engine.run=i.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,
"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(t,e,n){var i={};e.exports=i;var r=t("../core/Common"),s=t("../body/Composite"),o=t("../geometry/Bounds"),a=t("../core/Events"),u=t("../collision/Grid"),l=t("../geometry/Vector"),h=t("../core/Mouse");!function(){var t,e;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(function(){t(r.now())},1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i.create=function(t){var e={controller:i,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!t.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},s=r.extend(e,t);return s.canvas&&(s.canvas.width=s.options.width||s.canvas.width,s.canvas.height=s.options.height||s.canvas.height),s.mouse=t.mouse,s.engine=t.engine,s.canvas=s.canvas||n(s.options.width,s.options.height),s.context=s.canvas.getContext("2d"),s.textures={},s.bounds=s.bounds||{min:{x:0,y:0},max:{x:s.canvas.width,y:s.canvas.height}},1!==s.options.pixelRatio&&i.setPixelRatio(s,s.options.pixelRatio),r.isElement(s.element)?s.element.appendChild(s.canvas):r.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),s},i.run=function(e){!function n(r){e.frameRequestId=t(n),i.world(e)}()},i.stop=function(t){e(t.frameRequestId)},i.setPixelRatio=function(t,e){var n=t.options,i=t.canvas;"auto"===e&&(e=c(i)),n.pixelRatio=e,i.setAttribute("data-pixel-ratio",e),i.width=n.width*e,i.height=n.height*e,i.style.width=n.width+"px",i.style.height=n.height+"px",t.context.scale(e,e)},i.lookAt=function(t,e,n,i){i="undefined"==typeof i||i,e=r.isArray(e)?e:[e],n=n||{x:0,y:0};for(var s={min:{x:1/0,y:1/0},max:{x:-(1/0),y:-(1/0)}},o=0;o<e.length;o+=1){var a=e[o],u=a.bounds?a.bounds.min:a.min||a.position||a,l=a.bounds?a.bounds.max:a.max||a.position||a;u&&l&&(u.x<s.min.x&&(s.min.x=u.x),l.x>s.max.x&&(s.max.x=l.x),u.y<s.min.y&&(s.min.y=u.y),l.y>s.max.y&&(s.max.y=l.y))}var c=s.max.x-s.min.x+2*n.x,f=s.max.y-s.min.y+2*n.y,d=t.canvas.height,p=t.canvas.width,_=p/d,g=c/f,v=1,m=1;g>_?m=g/_:v=_/g,t.options.hasBounds=!0,t.bounds.min.x=s.min.x,t.bounds.max.x=s.min.x+c*v,t.bounds.min.y=s.min.y,t.bounds.max.y=s.min.y+f*m,i&&(t.bounds.min.x+=.5*c-c*v*.5,t.bounds.max.x+=.5*c-c*v*.5,t.bounds.min.y+=.5*f-f*m*.5,t.bounds.max.y+=.5*f-f*m*.5),t.bounds.min.x-=n.x,t.bounds.max.x-=n.x,t.bounds.min.y-=n.y,t.bounds.max.y-=n.y,t.mouse&&(h.setScale(t.mouse,{x:(t.bounds.max.x-t.bounds.min.x)/t.canvas.width,y:(t.bounds.max.y-t.bounds.min.y)/t.canvas.height}),h.setOffset(t.mouse,t.bounds.min))},i.startViewTransform=function(t){var e=t.bounds.max.x-t.bounds.min.x,n=t.bounds.max.y-t.bounds.min.y,i=e/t.options.width,r=n/t.options.height;t.context.scale(1/i,1/r),t.context.translate(-t.bounds.min.x,-t.bounds.min.y)},i.endViewTransform=function(t){t.context.setTransform(t.options.pixelRatio,0,0,t.options.pixelRatio,0,0)},i.world=function(t){var e,n=t.engine,r=n.world,c=t.canvas,f=t.context,p=t.options,_=s.allBodies(r),g=s.allConstraints(r),v=p.wireframes?p.wireframeBackground:p.background,m=[],y=[],x={timestamp:n.timing.timestamp};if(a.trigger(t,"beforeRender",x),t.currentBackground!==v&&d(t,v),f.globalCompositeOperation="source-in",f.fillStyle="transparent",f.fillRect(0,0,c.width,c.height),f.globalCompositeOperation="source-over",p.hasBounds){for(e=0;e<_.length;e++){var b=_[e];o.overlaps(b.bounds,t.bounds)&&m.push(b)}for(e=0;e<g.length;e++){var w=g[e],S=w.bodyA,C=w.bodyB,T=w.pointA,P=w.pointB;S&&(T=l.add(S.position,w.pointA)),C&&(P=l.add(C.position,w.pointB)),T&&P&&(o.contains(t.bounds,T)||o.contains(t.bounds,P))&&y.push(w)}i.startViewTransform(t),t.mouse&&(h.setScale(t.mouse,{x:(t.bounds.max.x-t.bounds.min.x)/t.canvas.width,y:(t.bounds.max.y-t.bounds.min.y)/t.canvas.height}),h.setOffset(t.mouse,t.bounds.min))}else y=g,m=_;!p.wireframes||n.enableSleeping&&p.showSleeping?i.bodies(t,m,f):(p.showConvexHulls&&i.bodyConvexHulls(t,m,f),i.bodyWireframes(t,m,f)),p.showBounds&&i.bodyBounds(t,m,f),(p.showAxes||p.showAngleIndicator)&&i.bodyAxes(t,m,f),p.showPositions&&i.bodyPositions(t,m,f),p.showVelocity&&i.bodyVelocity(t,m,f),p.showIds&&i.bodyIds(t,m,f),p.showSeparations&&i.separations(t,n.pairs.list,f),p.showCollisions&&i.collisions(t,n.pairs.list,f),p.showVertexNumbers&&i.vertexNumbers(t,m,f),p.showMousePosition&&i.mousePosition(t,t.mouse,f),i.constraints(y,f),p.showBroadphase&&n.broadphase.controller===u&&i.grid(t,n.broadphase,f),p.showDebug&&i.debug(t,f),p.hasBounds&&i.endViewTransform(t),a.trigger(t,"afterRender",x)},i.debug=function(t,e){var n=e,i=t.engine,r=i.world,o=i.metrics,a=t.options,u=(s.allBodies(r),"    ");if(i.timing.timestamp-(t.debugTimestamp||0)>=500){var l="";o.timing&&(l+="fps: "+Math.round(o.timing.fps)+u),t.debugString=l,t.debugTimestamp=i.timing.timestamp}if(t.debugString){n.font="12px Arial",a.wireframes?n.fillStyle="rgba(255,255,255,0.5)":n.fillStyle="rgba(0,0,0,0.5)";for(var h=t.debugString.split("\n"),c=0;c<h.length;c++)n.fillText(h[c],50,50+18*c)}},i.constraints=function(t,e){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(r.render.visible&&r.pointA&&r.pointB){var s=r.bodyA,o=r.bodyB;s?(n.beginPath(),n.moveTo(s.position.x+r.pointA.x,s.position.y+r.pointA.y)):(n.beginPath(),n.moveTo(r.pointA.x,r.pointA.y)),o?n.lineTo(o.position.x+r.pointB.x,o.position.y+r.pointB.y):n.lineTo(r.pointB.x,r.pointB.y),r.render.lineWidth&&(n.lineWidth=r.render.lineWidth,n.strokeStyle=r.render.strokeStyle,n.stroke())}}},i.bodyShadows=function(t,e,n){for(var i=n,r=(t.engine,0);r<e.length;r++){var s=e[r];if(s.render.visible){if(s.circleRadius)i.beginPath(),i.arc(s.position.x,s.position.y,s.circleRadius,0,2*Math.PI),i.closePath();else{i.beginPath(),i.moveTo(s.vertices[0].x,s.vertices[0].y);for(var o=1;o<s.vertices.length;o++)i.lineTo(s.vertices[o].x,s.vertices[o].y);i.closePath()}var a=s.position.x-.5*t.options.width,u=s.position.y-.2*t.options.height,l=Math.abs(a)+Math.abs(u);i.shadowColor="rgba(0,0,0,0.15)",i.shadowOffsetX=.05*a,i.shadowOffsetY=.05*u,i.shadowBlur=1+12*Math.min(1,l/1e3),i.fill(),i.shadowColor=null,i.shadowOffsetX=null,i.shadowOffsetY=null,i.shadowBlur=null}}},i.bodies=function(t,e,n){var i,r,s,o,a=n,u=(t.engine,t.options),l=u.showInternalEdges||!u.wireframes;for(s=0;s<e.length;s++)if(i=e[s],i.render.visible)for(o=i.parts.length>1?1:0;o<i.parts.length;o++)if(r=i.parts[o],r.render.visible){if(u.showSleeping&&i.isSleeping?a.globalAlpha=.5*r.render.opacity:1!==r.render.opacity&&(a.globalAlpha=r.render.opacity),r.render.sprite&&r.render.sprite.texture&&!u.wireframes){var h=r.render.sprite,c=f(t,h.texture);a.translate(r.position.x,r.position.y),a.rotate(r.angle),a.drawImage(c,c.width*-h.xOffset*h.xScale,c.height*-h.yOffset*h.yScale,c.width*h.xScale,c.height*h.yScale),a.rotate(-r.angle),a.translate(-r.position.x,-r.position.y)}else{if(r.circleRadius)a.beginPath(),a.arc(r.position.x,r.position.y,r.circleRadius,0,2*Math.PI);else{a.beginPath(),a.moveTo(r.vertices[0].x,r.vertices[0].y);for(var d=1;d<r.vertices.length;d++)!r.vertices[d-1].isInternal||l?a.lineTo(r.vertices[d].x,r.vertices[d].y):a.moveTo(r.vertices[d].x,r.vertices[d].y),r.vertices[d].isInternal&&!l&&a.moveTo(r.vertices[(d+1)%r.vertices.length].x,r.vertices[(d+1)%r.vertices.length].y);a.lineTo(r.vertices[0].x,r.vertices[0].y),a.closePath()}u.wireframes?(a.lineWidth=1,a.strokeStyle="#bbb",a.stroke()):(a.fillStyle=r.render.fillStyle,r.render.lineWidth&&(a.lineWidth=r.render.lineWidth,a.strokeStyle=r.render.strokeStyle,a.stroke()),a.fill())}a.globalAlpha=1}},i.bodyWireframes=function(t,e,n){var i,r,s,o,a,u=n,l=t.options.showInternalEdges;for(u.beginPath(),s=0;s<e.length;s++)if(i=e[s],i.render.visible)for(a=i.parts.length>1?1:0;a<i.parts.length;a++){for(r=i.parts[a],u.moveTo(r.vertices[0].x,r.vertices[0].y),o=1;o<r.vertices.length;o++)!r.vertices[o-1].isInternal||l?u.lineTo(r.vertices[o].x,r.vertices[o].y):u.moveTo(r.vertices[o].x,r.vertices[o].y),r.vertices[o].isInternal&&!l&&u.moveTo(r.vertices[(o+1)%r.vertices.length].x,r.vertices[(o+1)%r.vertices.length].y);u.lineTo(r.vertices[0].x,r.vertices[0].y)}u.lineWidth=1,u.strokeStyle="#bbb",u.stroke()},i.bodyConvexHulls=function(t,e,n){var i,r,s,o=n;for(o.beginPath(),r=0;r<e.length;r++)if(i=e[r],i.render.visible&&1!==i.parts.length){for(o.moveTo(i.vertices[0].x,i.vertices[0].y),s=1;s<i.vertices.length;s++)o.lineTo(i.vertices[s].x,i.vertices[s].y);o.lineTo(i.vertices[0].x,i.vertices[0].y)}o.lineWidth=1,o.strokeStyle="rgba(255,255,255,0.2)",o.stroke()},i.vertexNumbers=function(t,e,n){var i,r,s,o=n;for(i=0;i<e.length;i++){var a=e[i].parts;for(s=a.length>1?1:0;s<a.length;s++){var u=a[s];for(r=0;r<u.vertices.length;r++)o.fillStyle="rgba(255,255,255,0.2)",o.fillText(i+"_"+r,u.position.x+.8*(u.vertices[r].x-u.position.x),u.position.y+.8*(u.vertices[r].y-u.position.y))}}},i.mousePosition=function(t,e,n){var i=n;i.fillStyle="rgba(255,255,255,0.8)",i.fillText(e.position.x+"  "+e.position.y,e.position.x+5,e.position.y-5)},i.bodyBounds=function(t,e,n){var i=n,r=(t.engine,t.options);i.beginPath();for(var s=0;s<e.length;s++){var o=e[s];if(o.render.visible)for(var a=e[s].parts,u=a.length>1?1:0;u<a.length;u++){var l=a[u];i.rect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}}r.wireframes?i.strokeStyle="rgba(255,255,255,0.08)":i.strokeStyle="rgba(0,0,0,0.1)",i.lineWidth=1,i.stroke()},i.bodyAxes=function(t,e,n){var i,r,s,o,a=n,u=(t.engine,t.options);for(a.beginPath(),r=0;r<e.length;r++){var l=e[r],h=l.parts;if(l.render.visible)if(u.showAxes)for(s=h.length>1?1:0;s<h.length;s++)for(i=h[s],o=0;o<i.axes.length;o++){var c=i.axes[o];a.moveTo(i.position.x,i.position.y),a.lineTo(i.position.x+20*c.x,i.position.y+20*c.y)}else for(s=h.length>1?1:0;s<h.length;s++)for(i=h[s],o=0;o<i.axes.length;o++)a.moveTo(i.position.x,i.position.y),a.lineTo((i.vertices[0].x+i.vertices[i.vertices.length-1].x)/2,(i.vertices[0].y+i.vertices[i.vertices.length-1].y)/2)}u.wireframes?(a.strokeStyle="indianred",a.lineWidth=1):(a.strokeStyle="rgba(255, 255, 255, 0.4)",a.globalCompositeOperation="overlay",a.lineWidth=2),a.stroke(),a.globalCompositeOperation="source-over"},i.bodyPositions=function(t,e,n){var i,r,s,o,a=n,u=(t.engine,t.options);for(a.beginPath(),s=0;s<e.length;s++)if(i=e[s],i.render.visible)for(o=0;o<i.parts.length;o++)r=i.parts[o],a.arc(r.position.x,r.position.y,3,0,2*Math.PI,!1),a.closePath();for(u.wireframes?a.fillStyle="indianred":a.fillStyle="rgba(0,0,0,0.5)",a.fill(),a.beginPath(),s=0;s<e.length;s++)i=e[s],i.render.visible&&(a.arc(i.positionPrev.x,i.positionPrev.y,2,0,2*Math.PI,!1),a.closePath());a.fillStyle="rgba(255,165,0,0.8)",a.fill()},i.bodyVelocity=function(t,e,n){var i=n;i.beginPath();for(var r=0;r<e.length;r++){var s=e[r];s.render.visible&&(i.moveTo(s.position.x,s.position.y),i.lineTo(s.position.x+2*(s.position.x-s.positionPrev.x),s.position.y+2*(s.position.y-s.positionPrev.y)))}i.lineWidth=3,i.strokeStyle="cornflowerblue",i.stroke()},i.bodyIds=function(t,e,n){var i,r,s=n;for(i=0;i<e.length;i++)if(e[i].render.visible){var o=e[i].parts;for(r=o.length>1?1:0;r<o.length;r++){var a=o[r];s.font="12px Arial",s.fillStyle="rgba(255,255,255,0.5)",s.fillText(a.id,a.position.x+10,a.position.y-10)}}},i.collisions=function(t,e,n){var i,r,s,o,a=n,u=t.options;for(a.beginPath(),s=0;s<e.length;s++)if(i=e[s],i.isActive)for(r=i.collision,o=0;o<i.activeContacts.length;o++){var l=i.activeContacts[o],h=l.vertex;a.rect(h.x-1.5,h.y-1.5,3.5,3.5)}for(u.wireframes?a.fillStyle="rgba(255,255,255,0.7)":a.fillStyle="orange",a.fill(),a.beginPath(),s=0;s<e.length;s++)if(i=e[s],i.isActive&&(r=i.collision,i.activeContacts.length>0)){var c=i.activeContacts[0].vertex.x,f=i.activeContacts[0].vertex.y;2===i.activeContacts.length&&(c=(i.activeContacts[0].vertex.x+i.activeContacts[1].vertex.x)/2,f=(i.activeContacts[0].vertex.y+i.activeContacts[1].vertex.y)/2),r.bodyB===r.supports[0].body||r.bodyA.isStatic===!0?a.moveTo(c-8*r.normal.x,f-8*r.normal.y):a.moveTo(c+8*r.normal.x,f+8*r.normal.y),a.lineTo(c,f)}u.wireframes?a.strokeStyle="rgba(255,165,0,0.7)":a.strokeStyle="orange",a.lineWidth=1,a.stroke()},i.separations=function(t,e,n){var i,r,s,o,a,u=n,l=t.options;for(u.beginPath(),a=0;a<e.length;a++)if(i=e[a],i.isActive){r=i.collision,s=r.bodyA,o=r.bodyB;var h=1;o.isStatic||s.isStatic||(h=.5),o.isStatic&&(h=0),u.moveTo(o.position.x,o.position.y),u.lineTo(o.position.x-r.penetration.x*h,o.position.y-r.penetration.y*h),h=1,o.isStatic||s.isStatic||(h=.5),s.isStatic&&(h=0),u.moveTo(s.position.x,s.position.y),u.lineTo(s.position.x+r.penetration.x*h,s.position.y+r.penetration.y*h)}l.wireframes?u.strokeStyle="rgba(255,165,0,0.5)":u.strokeStyle="orange",u.stroke()},i.grid=function(t,e,n){var i=n,s=t.options;s.wireframes?i.strokeStyle="rgba(255,180,0,0.1)":i.strokeStyle="rgba(255,180,0,0.5)",i.beginPath();for(var o=r.keys(e.buckets),a=0;a<o.length;a++){var u=o[a];if(!(e.buckets[u].length<2)){var l=u.split(/C|R/);i.rect(.5+parseInt(l[1],10)*e.bucketWidth,.5+parseInt(l[2],10)*e.bucketHeight,e.bucketWidth,e.bucketHeight)}}i.lineWidth=1,i.stroke()},i.inspector=function(t,e){var n,i=(t.engine,t.selected),r=t.render,s=r.options;if(s.hasBounds){var o=r.bounds.max.x-r.bounds.min.x,a=r.bounds.max.y-r.bounds.min.y,u=o/r.options.width,l=a/r.options.height;e.scale(1/u,1/l),e.translate(-r.bounds.min.x,-r.bounds.min.y)}for(var h=0;h<i.length;h++){var c=i[h].data;switch(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.9)",e.setLineDash([1,2]),c.type){case"body":n=c.bounds,e.beginPath(),e.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),e.closePath(),e.stroke();break;case"constraint":var f=c.pointA;c.bodyA&&(f=c.pointB),e.beginPath(),e.arc(f.x,f.y,10,0,2*Math.PI),e.closePath(),e.stroke()}e.setLineDash([]),e.translate(-.5,-.5)}null!==t.selectStart&&(e.translate(.5,.5),e.lineWidth=1,e.strokeStyle="rgba(255,165,0,0.6)",e.fillStyle="rgba(255,165,0,0.1)",n=t.selectBounds,e.beginPath(),e.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),e.closePath(),e.stroke(),e.fill(),e.translate(-.5,-.5)),s.hasBounds&&e.setTransform(1,0,0,1,0,0)};var n=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},c=function(t){var e=t.getContext("2d"),n=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i},f=function(t,e){var n=t.textures[e];return n?n:(n=t.textures[e]=new Image,n.src=e,n)},d=function(t,e){var n=e;/(jpg|gif|png)$/.test(e)&&(n="url("+e+")"),t.canvas.style.background=n,t.canvas.style.backgroundSize="contain",t.currentBackground=e}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(t,e,n){var i={};e.exports=i;var r=t("../geometry/Bounds"),s=t("../body/Composite"),o=t("../core/Common"),a=t("../core/Events"),u=t("../geometry/Vector");!function(){var t,e;"undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(function(){t(o.now())},1e3/60)},e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i.create=function(t){o.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var e={controller:i,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},n=o.extend(e,t),r=!n.options.wireframes&&"transparent"===n.options.background;return n.pixiOptions=n.pixiOptions||{view:n.canvas,transparent:r,antialias:!0,backgroundColor:t.background},n.mouse=t.mouse,n.engine=t.engine,n.renderer=n.renderer||new PIXI.WebGLRenderer(n.options.width,n.options.height,n.pixiOptions),n.container=n.container||new PIXI.Container,n.spriteContainer=n.spriteContainer||new PIXI.Container,n.canvas=n.canvas||n.renderer.view,n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.options.width,y:n.options.height}},a.on(n.engine,"beforeUpdate",function(){i.clear(n)}),n.textures={},n.sprites={},n.primitives={},n.container.addChild(n.spriteContainer),o.isElement(n.element)?n.element.appendChild(n.canvas):o.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),n.canvas.oncontextmenu=function(){return!1},n.canvas.onselectstart=function(){return!1},n},i.run=function(e){!function n(r){e.frameRequestId=t(n),i.world(e)}()},i.stop=function(t){e(t.frameRequestId)},i.clear=function(t){for(var e=t.container,n=t.spriteContainer;e.children[0];)e.removeChild(e.children[0]);for(;n.children[0];)n.removeChild(n.children[0]);var i=t.sprites["bg-0"];t.textures={},t.sprites={},t.primitives={},t.sprites["bg-0"]=i,i&&e.addChildAt(i,0),t.container.addChild(t.spriteContainer),t.currentBackground=null,e.scale.set(1,1),e.position.set(0,0)},i.setBackground=function(t,e){if(t.currentBackground!==e){var n=e.indexOf&&e.indexOf("#")!==-1,i=t.sprites["bg-0"];if(n){var r=o.colorToNumber(e);t.renderer.backgroundColor=r,i&&t.container.removeChild(i)}else if(!i){var s=h(t,e);i=t.sprites["bg-0"]=new PIXI.Sprite(s),i.position.x=0,i.position.y=0,t.container.addChildAt(i,0)}t.currentBackground=e}},i.world=function(t){var e,n=t.engine,o=n.world,a=t.renderer,l=t.container,h=t.options,c=s.allBodies(o),f=s.allConstraints(o),d=[];h.wireframes?i.setBackground(t,h.wireframeBackground):i.setBackground(t,h.background);var p=t.bounds.max.x-t.bounds.min.x,_=t.bounds.max.y-t.bounds.min.y,g=p/t.options.width,v=_/t.options.height;if(h.hasBounds){for(e=0;e<c.length;e++){var m=c[e];m.render.sprite.visible=r.overlaps(m.bounds,t.bounds)}for(e=0;e<f.length;e++){var y=f[e],x=y.bodyA,b=y.bodyB,w=y.pointA,S=y.pointB;x&&(w=u.add(x.position,y.pointA)),b&&(S=u.add(b.position,y.pointB)),w&&S&&(r.contains(t.bounds,w)||r.contains(t.bounds,S))&&d.push(y)}l.scale.set(1/g,1/v),l.position.set(-t.bounds.min.x*(1/g),-t.bounds.min.y*(1/v))}else d=f;for(e=0;e<c.length;e++)i.body(t,c[e]);for(e=0;e<d.length;e++)i.constraint(t,d[e]);a.render(l)},i.constraint=function(t,e){var n=(t.engine,e.bodyA),i=e.bodyB,r=e.pointA,s=e.pointB,a=t.container,u=e.render,l="c-"+e.id,h=t.primitives[l];return h||(h=t.primitives[l]=new PIXI.Graphics),u.visible&&e.pointA&&e.pointB?(o.indexOf(a.children,h)===-1&&a.addChild(h),h.clear(),h.beginFill(0,0),h.lineStyle(u.lineWidth,o.colorToNumber(u.strokeStyle),1),n?h.moveTo(n.position.x+r.x,n.position.y+r.y):h.moveTo(r.x,r.y),i?h.lineTo(i.position.x+s.x,i.position.y+s.y):h.lineTo(s.x,s.y),void h.endFill()):void h.clear()},i.body=function(t,e){var i=(t.engine,e.render);if(i.visible)if(i.sprite&&i.sprite.texture){var r="b-"+e.id,s=t.sprites[r],a=t.spriteContainer;s||(s=t.sprites[r]=n(t,e)),o.indexOf(a.children,s)===-1&&a.addChild(s),s.position.x=e.position.x,s.position.y=e.position.y,s.rotation=e.angle,s.scale.x=i.sprite.xScale||1,s.scale.y=i.sprite.yScale||1}else{var u="b-"+e.id,h=t.primitives[u],c=t.container;h||(h=t.primitives[u]=l(t,e),h.initialAngle=e.angle),o.indexOf(c.children,h)===-1&&c.addChild(h),h.position.x=e.position.x,h.position.y=e.position.y,h.rotation=e.angle-h.initialAngle}};var n=function(t,e){var n=e.render,i=n.sprite.texture,r=h(t,i),s=new PIXI.Sprite(r);return s.anchor.x=e.render.sprite.xOffset,s.anchor.y=e.render.sprite.yOffset,s},l=function(t,e){var n,i=e.render,r=t.options,s=new PIXI.Graphics,a=o.colorToNumber(i.fillStyle),u=o.colorToNumber(i.strokeStyle),l=o.colorToNumber(i.strokeStyle),h=o.colorToNumber("#bbb"),c=o.colorToNumber("#CD5C5C");s.clear();for(var f=e.parts.length>1?1:0;f<e.parts.length;f++){n=e.parts[f],r.wireframes?(s.beginFill(0,0),s.lineStyle(1,h,1)):(s.beginFill(a,1),s.lineStyle(i.lineWidth,u,1)),s.moveTo(n.vertices[0].x-e.position.x,n.vertices[0].y-e.position.y);for(var d=1;d<n.vertices.length;d++)s.lineTo(n.vertices[d].x-e.position.x,n.vertices[d].y-e.position.y);s.lineTo(n.vertices[0].x-e.position.x,n.vertices[0].y-e.position.y),s.endFill(),(r.showAngleIndicator||r.showAxes)&&(s.beginFill(0,0),r.wireframes?s.lineStyle(1,c,1):s.lineStyle(1,l),s.moveTo(n.position.x-e.position.x,n.position.y-e.position.y),s.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2-e.position.x,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2-e.position.y),s.endFill())}return s},h=function(t,e){var n=t.textures[e];return n||(n=t.textures[e]=PIXI.Texture.fromImage(e)),n}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){var i=function(n,r){n=n||t("./node/window.js");var s=n.window,o=n.document,a=new function(){function t(t,i,r,s,o){function l(n,l){l=l||(l=a(i,n))&&(l.get?l:l.value),"string"==typeof l&&"#"===l[0]&&(l=t[l.substring(1)]||l);var c,f="function"==typeof l,d=l,p=o||f&&!l.base?l&&l.get?n in t:t[n]:null;o&&p||(f&&p&&(l.base=p),f&&s!==!1&&(c=n.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(h[c[3].toLowerCase()+c[4]]=c[2]),d&&!f&&d.get&&"function"==typeof d.get&&e.isPlainObject(d)||(d={value:d,writable:!0}),(a(t,n)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=r),u(t,n,d))}var h={};if(i){for(var c in i)i.hasOwnProperty(c)&&!n.test(c)&&l(c);for(var c in h){var f=h[c],d=t["set"+f],p=t["get"+f]||d&&t["is"+f];!p||s!==!0&&0!==p.length||l(c,{get:p,set:d})}}return t}function e(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&c(this,n)}return this}var n=/^(statics|enumerable|beans|preserve)$/,i=[],s=i.slice,o=Object.create,a=Object.getOwnPropertyDescriptor,u=Object.defineProperty,l=i.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},h=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},c=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},f=function(t,e,n){if(t){var i=a(t,"length");(i&&"number"==typeof i.value?l:h).call(t,e,n=n||t)}return n};return t(e,{inject:function(e){if(e){var n=e.statics===!0?e:e.statics,i=e.beans,r=e.preserve;n!==e&&t(this.prototype,e,e.enumerable,i,r),t(this,n,!0,i,r)}for(var s=1,o=arguments.length;s<o;s++)this.inject(arguments[s]);return this},extend:function(){for(var e,n,i,r=this,s=0,a=arguments.length;s<a&&(!e||!n);s++)i=arguments[s],e=e||i.initialize,n=n||i.prototype;return e=e||function(){r.apply(this,arguments)},n=e.prototype=n||o(this.prototype),u(n,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this,!0),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}},!0).inject({initialize:e,set:e,inject:function(){for(var e=0,n=arguments.length;e<n;e++){var i=arguments[e];i&&t(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var t=o(this);return t.inject.apply(t,arguments)},each:function(t,e){return f(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:c,each:f,create:o,define:u,describe:a,clone:function(t){return c(new t.constructor,t)},isPlainObject:function(t){var n=null!=t&&t.constructor;return n&&(n===Object||n===e||"Object"===n.name)},pick:function(t,e){return t!==r?t:e},slice:function(t,e,n){return s.call(t,e,n)}}})};"undefined"!=typeof e&&(e.exports=a),a.inject({toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+a.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?c.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return a.importJSON(t,this)},exportJSON:function(t){return a.exportJSON(this,t)},toJSON:function(){return a.serialize(this)},set:function(t,e){return t&&a.filter(this,t,e,this._prioritize),this},statics:{exports:{enumerable:!0},extend:function at(){var t=at.base.apply(this,arguments),e=t.prototype._class;return e&&!a.exports[e]&&(a.exports[e]=t),t},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){var n=t.length;if(n!==e.length)return!1;for(;n--;)if(!a.equals(t[n],e[n]))return!1}else{var i=Object.keys(t),n=i.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!a.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,n,i){if(this===a){var s=this.peek(t,e);return t.__index++,s}var o=this.prototype,u=o._readIndex,l=e||u&&t.__index||0,h=t.length,c=t[l];return i=i||h-l,c instanceof this||n&&n.readNull&&null==c&&i<=1?(u&&(t.__index=l+1),c&&n&&n.clone?c.clone():c):(c=a.create(o),u&&(c.__read=!0),c=c.initialize.apply(c,l>0||l+i<h?a.slice(t,l,l+i):t)||c,u&&(t.__index=l+c.__read,c.__read=r),c)},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,s=[],o=e||0,a=i?o+i:t.length,u=o;u<a;u++)s.push(Array.isArray(r=t[u])?this.read(r,0,n):this.read(t,u,n,1));return s},readNamed:function(t,e,n,i,s){var o=this.getNamed(t,e),u=o!==r;if(u){var l=t._filtered;l||(l=t._filtered=a.create(t[0]),l._unfiltered=t[0]),l[e]=r}return this.read(u?[o]:t,n,i,s)},getNamed:function(t,e){var n=t[0];if(t._hasObject===r&&(t._hasObject=1===t.length&&a.isPlainObject(n)),t._hasObject)return e?n[e]:t._filtered||n},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,n,i){function s(i){if(!(n&&i in n||o&&i in o)){var s=e[i];s!==r&&(t[i]=s)}}var o;if(i){for(var a,u={},l=0,h=i.length;l<h;l++)(a=i[l])in e&&(s(a),u[a]=!0);o=u}return Object.keys(e._unfiltered||e).forEach(s),t},isPlainValue:function(t,e){return a.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var r,s=!i;if(s&&(e.formatter=new c(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){r=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!s&&n||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var u=0,l=t.length;u<l;u++)r[u]=a.serialize(t[u],e,n,i)}else if(a.isPlainObject(t)){r={};for(var h=Object.keys(t),u=0,l=h.length;u<l;u++){var f=h[u];r[f]=a.serialize(t[f],e,n,i)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e,n,i,r){var s=t,o=!n,u=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var l=t[0],h="dictionary"===l;if(1==t.length&&/^#/.test(l))return n.dictionary[l];l=a.exports[l],s=[];for(var c=l?1:0,f=t.length;c<f;c++)s.push(a.deserialize(t[c],e,n,h,u));if(l){var d=s;e?s=e(l,d,o||r):(s=a.create(l.prototype),l.apply(s,d))}}else if(a.isPlainObject(t)){s={},i&&(n.dictionary=s);for(var p in t)s[p]=a.deserialize(t[p],e,n)}return u?s[1]:s},exportJSON:function(t,e){var n=a.serialize(t,e);return e&&e.asString===!1?n:JSON.stringify(n)},importJSON:function(t,e){return a.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,i){var r=i&&e&&e.constructor===t,s=r?e:a.create(t.prototype);if(1===n.length&&s instanceof S&&(r||!(s instanceof T))){var o=n[0];a.isPlainObject(o)&&(o.insert=!1)}return(r?s.set:t).apply(s,n),r&&(e=null),s})},splice:function(t,e,n,i){var s=e&&e.length,o=n===r;n=o?t.length:n,n>t.length&&(n=t.length);for(var a=0;a<s;a++)e[a]._index=n+a;if(o)return t.push.apply(t,e),[];var u=[n,i];e&&u.push.apply(u,e);for(var l=t.splice.apply(t,u),a=0,h=l.length;a<h;a++)l[a]._index=r;for(var a=n+s,h=t.length;a<h;a++)t[a]._index=a;return l},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var u={on:function(t,e){if("string"!=typeof t)a.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,i=n&&n[t],r=this._callbacks=this._callbacks||{};r=r[t]=r[t]||[],r.indexOf(e)===-1&&(r.push(e),i&&i.install&&1===r.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"!=typeof t)return void a.each(t,function(t,e){this.off(e,t)},this);var n,i=this._eventTypes,r=i&&i[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||(n=s.indexOf(e))!==-1&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):n!==-1&&s.splice(n,1)),this},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=a.slice(arguments,1),r=e&&e.target&&!e.currentTarget;n=n.slice(),r&&(e.currentTarget=this);for(var s=0,o=n.length;s<o;s++)if(n[s].apply(this,i)===!1){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var s=e[r],o=s&&s[i];o&&o.call(this,r)}},statics:{inject:function ut(t){var e=t._events;if(e){var n={};a.each(e,function(e,i){var r="string"==typeof e,s=r?e:i,o=a.capitalize(s),u=s.substring(2).toLowerCase();n[u]=r?{}:e,s="_"+s,t["get"+o]=function(){return this[s]},t["set"+o]=function(t){var e=this[s];e&&this.off(u,e),t&&this.on(u,t),this[s]=t}}),t._eventTypes=n}return ut.base.apply(this,arguments)}}},l=a.extend({_class:"PaperScope",initialize:function lt(){i=this,this.settings=new a({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=lt._id++,lt._scopes[this._id]=this;var t=lt.prototype;if(!this.support){var e=it.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in e||"mozDash"in e,nativeBlendModes:rt.nativeModes},it.release(e)}if(!this.agent){var r=n.navigator.userAgent.toLowerCase(),s=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],o="darwin"===s?"mac":s,u=t.agent=t.browser={platform:o};o&&(u[o]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,i,r){if(!u.chrome){var s="opera"===e?i:/^(node|trident)$/.test(e)?r:n;u.version=s,u.versionNumber=parseFloat(s),e="trident"===e?"msie":e,u.name=e,u[e]=!0}}),u.chrome&&delete u.webkit,u.atom&&delete u.chrome}},version:"0.10.3",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){i.PaperScript.execute(t,this,e),G.updateFocus()},install:function(t){var e=this;a.each(["project","view","tool"],function(n){a.define(t,n,{configurable:!0,get:function(){return e[n]}})});for(var n in this)!/^_/.test(n)&&this[n]&&(t[n]=this[n]);
},setup:function(t){return i=this,this.project=new w(t),this},createCanvas:function(t,e){return it.getCanvas(t,e)},activate:function(){i=this},clear:function(){for(var t=this.projects,e=this.tools,n=this.palettes,i=t.length-1;i>=0;i--)t[i].remove();for(var i=e.length-1;i>=0;i--)e[i].remove();for(var i=n.length-1;i>=0;i--)n[i].remove()},remove:function(){this.clear(),delete l._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),h=a.extend(u,{initialize:function(t){this._scope=i,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(a.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),c=a.extend({initialize:function(t){this.precision=a.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});c.instance=new c;var f=new function(){function t(t,e,n){return t<e?e:t>n?n:t}function e(t,e,n){function i(t){var e=134217729*t,n=t-e,i=n+e,r=t-i;return[i,r]}var r=e*e-t*n,o=e*e+t*n;if(3*s(r)<o){var a=i(t),u=i(e),l=i(n),h=e*e,c=u[0]*u[0]-h+2*u[0]*u[1]+u[1]*u[1],f=t*n,d=a[0]*l[0]-f+a[0]*l[1]+a[1]*l[0]+a[1]*l[1];r=h-f+(c-d)}return r}function n(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?a(2,-Math.round(u(t))):0}var i=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,o=Math.sqrt,a=Math.pow,u=Math.log2||function(t){return Math.log(t)*Math.LOG2E},l=1e-12,h=1.12e-16;return{EPSILON:l,MACHINE_EPSILON:h,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(t){return t>=-l&&t<=l},clamp:t,integrate:function(t,e,n,s){for(var o=i[s-2],a=r[s-2],u=.5*(n-e),l=u+e,h=0,c=s+1>>1,f=1&s?a[h++]*t(l):0;h<c;){var d=u*o[h];f+=a[h++]*(t(l+d)+t(l-d))}return u*f},findRoot:function(e,n,i,r,o,a,u){for(var l=0;l<a;l++){var h=e(i),c=h/n(i),f=i-c;if(s(c)<u){i=f;break}h>0?(o=i,i=f<=r?.5*(r+o):f):(r=i,i=f>=o?.5*(r+o):f)}return t(i,r,o)},solveQuadratic:function(i,r,a,u,c,f){var d,p=1/0;if(s(i)<l){if(s(r)<l)return s(a)<l?-1:0;d=-a/r}else{r*=-.5;var _=e(i,r,a);if(_&&s(_)<h){var g=n(s(i),s(r),s(a));g&&(i*=g,r*=g,a*=g,_=e(i,r,a))}if(_>=-h){var v=_<0?0:o(_),m=r+(r<0?-v:v);0===m?(d=a/i,p=-d):(d=m/i,p=a/m)}}var y=0,x=null==c,b=c-l,w=f+l;return isFinite(d)&&(x||d>b&&d<w)&&(u[y++]=x?d:t(d,c,f)),p!==d&&isFinite(p)&&(x||p>b&&p<w)&&(u[y++]=x?p:t(p,c,f)),y},solveCubic:function(e,i,r,u,c,d,p){function _(t){g=t;var n=e*g;v=n+i,m=v*g+r,y=(n+v)*g+m,x=m*g+u}var g,v,m,y,x,b=n(s(e),s(i),s(r),s(u));if(b&&(e*=b,i*=b,r*=b,u*=b),s(e)<l)e=i,v=r,m=u,g=1/0;else if(s(u)<l)v=i,m=r,g=0;else{_(-(i/e)/3);var w=x/e,S=a(s(w),1/3),C=w<0?-1:1,T=-y/e,P=T>0?1.324717957244746*Math.max(S,o(T)):S,A=g-C*P;if(A!==g){do _(A),A=0===y?g:g-x/y/(1+h);while(C*A>C*g);s(e)*g*g>s(u/g)&&(m=-u/g,v=(m-r)/g)}}var k=f.solveQuadratic(e,v,m,c,d,p),M=null==d;return isFinite(g)&&(0===k||k>0&&g!==c[0]&&g!==c[1])&&(M||g>d-l&&g<p+l)&&(c[k++]=M?g:t(g,d,p)),k}}},d={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},p=a.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new p(this.x,this.y)},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();f.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=p.read(arguments),e=this.getLength()*t.getLength();if(f.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=p.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=p.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n,r=a.read(arguments);return r?i:Math.sqrt(i)},normalize:function(t){t===r&&(t=1);var e=this.getLength(),n=0!==e?t/e:0,i=new p(this.x*n,this.y*n);return n>=0&&(i._angle=this._angle),i},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new p(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=p.read(arguments);return new p(this.x+t.x,this.y+t.y)},subtract:function(){var t=p.read(arguments);return new p(this.x-t.x,this.y-t.y)},multiply:function(){var t=p.read(arguments);return new p(this.x*t.x,this.y*t.y)},divide:function(){var t=p.read(arguments);return new p(this.x/t.x,this.y/t.y)},modulo:function(){var t=p.read(arguments);return new p(this.x%t.x,this.y%t.y)},negate:function(){return new p((-this.x),(-this.y))},isInside:function(){return m.read(arguments).contains(this)},isClose:function(){var t=p.read(arguments),e=a.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=p.read(arguments);return p.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=p.read(arguments);return p.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=f.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=p.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=p.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=p.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new p(t.x*e,t.y*e)},statics:{min:function(){var t=p.read(arguments),e=p.read(arguments);return new p(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=p.read(arguments),e=p.read(arguments);return new p(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new p(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},a.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new p(e(this.x),e(this.y))}},{})),_=p.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),g=a.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var o="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new g(this.width,this.height)},toString:function(){var t=c.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=g.read(arguments);return new g(this.width+t.width,this.height+t.height)},subtract:function(){var t=g.read(arguments);return new g(this.width-t.width,this.height-t.height)},multiply:function(){var t=g.read(arguments);return new g(this.width*t.width,this.height*t.height)},divide:function(){var t=g.read(arguments);return new g(this.width/t.width,this.height/t.height)},modulo:function(){var t=g.read(arguments);return new g(this.width%t.width,this.height%t.height)},negate:function(){return new g((-this.width),(-this.height))},isZero:function(){var t=f.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new g(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new g(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new g(Math.random(),Math.random())}}},a.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new g(e(this.width),e(this.height))}},{})),v=g.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),m=a.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,n,i){var s,o=typeof t;if("number"===o?(this._set(t,e,n,i),s=4):"undefined"===o||null===t?(this._set(0,0,0,0),s=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),s=1):t.x!==r||t.width!==r?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),s=1):t.from===r&&t.to===r&&(this._set(0,0,0,0),a.filter(this,t),s=1)),s===r){var u,l,h=p.readNamed(arguments,"from"),c=a.peek(arguments),f=h.x,d=h.y;if(c&&c.x!==r||a.hasNamed(arguments,"to")){var _=p.readNamed(arguments,"to");u=_.x-f,l=_.y-d,u<0&&(f=_.x,u=-u),l<0&&(d=_.y,l=-l)}else{var v=g.read(arguments);u=v.width,l=v.height}this._set(f,d,u,l),s=arguments.__index}return this.__read&&(this.__read=s),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new m(this.x,this.y,this.width,this.height)},equals:function(t){var e=a.isPlainValue(t)?m.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=c.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){var e=t?p:_;return new e(this.x,this.y,this,"setPoint")},setPoint:function(){var t=p.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){var e=t?g:v;return new e(this.width,this.height,this,"setSize")},setSize:function(){var t=g.read(arguments);this._fixX&&(this.x+=(this.width-t.width)*this._fixX),this._fixY&&(this.y+=(this.height-t.height)*this._fixY),this.width=t.width,this.height=t.height,this._fixW=1,this._fixH=1},getLeft:function(){return this.x},setLeft:function(t){this._fixW||(this.width-=t-this.x),this.x=t,this._fixX=0},getTop:function(){return this.y},setTop:function(t){this._fixH||(this.height-=t-this.y),this.y=t,this._fixY=0},getRight:function(){return this.x+this.width},setRight:function(t){this._fixX!==r&&1!==this._fixX&&(this._fixW=0),this._fixW?this.x=t-this.width:this.width=t-this.x,this._fixX=1},getBottom:function(){return this.y+this.height},setBottom:function(t){this._fixY!==r&&1!==this._fixY&&(this._fixH=0),this._fixH?this.y=t-this.height:this.height=t-this.y,this._fixY=1},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width,this._fixX=.5},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height,this._fixY=.5},getCenter:function(t){var e=t?p:_;return new e(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=p.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==r||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(m.read(arguments)):this._containsPoint(p.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=m.read(arguments);return t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(){var t=m.read(arguments);return t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(){var t=m.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},unite:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new m(e,n,i-e,r-n)},include:function(){var t=p.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new m(e,n,i-e,r-n)},expand:function(){var t=g.read(arguments),e=t.width,n=t.height;return new m(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===r?t:e)-this.height)}},a.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],o="get"+r,a="get"+s,u="set"+r,l="set"+s,h="get"+n,c="set"+n;this[h]=function(t){var e=t?p:_;return new e(this[o](),this[a](),this,c)},this[c]=function(){var t=p.read(arguments);this[u](t.x),this[l](t.y)}},{beans:!0})),y=m.extend({initialize:function(t,e,n,i,r,s){this._set(t,e,n,i,!0),this._owner=r,this._setter=s},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=m.prototype;return a.each(["x","y","width","height"],function(t){var e=a.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},a.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e.changeSelection&&e.changeSelection(2,t)}}))}),x=a.extend({_class:"Matrix",initialize:function ht(t,e){var n=arguments.length,i=!0;if(n>=6?this._set.apply(this,arguments):1===n||2===n?t instanceof ht?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,e):Array.isArray(t)?this._set.apply(this,e?t.concat([e]):t):i=!1:n?i=!1:this.reset(),!i)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,s,o){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=s,o||this._changed(),this},_serialize:function(t,e){return a.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new x(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=c.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,a.pick(t,!0),e),this.isIdentity())},translate:function(){var t=p.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=p.read(arguments),e=p.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=p.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),o=n-n*r+i*s,a=i-n*s-i*r,u=this._a,l=this._b,h=this._c,c=this._d;return this._a=r*u+s*h,this._b=r*l+s*c,this._c=-s*u+r*h,this._d=-s*l+r*c,this._tx+=o*u+a*h,this._ty+=o*l+a*c,this._changed(),this},shear:function(){var t=p.read(arguments),e=p.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=p.read(arguments),e=p.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new p(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t){if(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=t._a,o=t._c,a=t._b,u=t._d,l=t._tx,h=t._ty;this._a=s*e+a*i,this._c=o*e+u*i,this._b=s*n+a*r,this._d=o*n+u*r,this._tx+=l*e+h*i,this._ty+=l*n+h*r,this._changed()}return this},prepend:function(t){if(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,o=this._ty,a=t._a,u=t._c,l=t._b,h=t._d,c=t._tx,f=t._ty;this._a=a*e+u*n,this._c=a*i+u*r,this._b=l*e+h*n,this._d=l*i+h*r,this._tx=a*s+u*o+c,this._ty=l*s+h*o+f,this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,s=this._ty,o=t*i-e*n,a=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(s)&&(this._a=i/o,this._b=-e/o,this._c=-n/o,this._d=t/o,this._tx=(n*s-i*r)/o,this._ty=(e*r-t*s)/o,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new x(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(p.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new p),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var s=t[i],o=t[i+1];e[i]=s*this._a+o*this._c+this._tx,e[i+1]=s*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),o=2;o<8;o++){var a=i[o],u=1&o;a<r[u]?r[u]=a:a>s[u]&&(s[u]=a)}return e||(e=new m),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(p.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,s=this._c,o=this._d,a=this._tx,u=this._ty,l=i*o-r*s,h=null;if(l&&!isNaN(l)&&isFinite(a)&&isFinite(u)){var c=t.x-this._tx,f=t.y-this._ty;e||(e=new p),h=e._set((c*o-f*s)/l,(f*i-c*r)/l,n)}return h},decompose:function(){var t,e,n,i=this._a,r=this._b,s=this._c,o=this._d,a=i*o-r*s,u=Math.sqrt,l=Math.atan2,h=180/Math.PI;if(0!==i||0!==r){var c=u(i*i+r*r);t=Math.acos(i/c)*(r>0?1:-1),e=[c,a/c],n=[l(i*s+r*o,c*c),0]}else if(0!==s||0!==o){var f=u(s*s+o*o);t=Math.asin(s/f)*(o>0?1:-1),e=[a/f,f],n=[0,l(i*s+r*o,f*f)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*h,scaling:new p(e),skewing:new p(n[0]*h,n[1]*h)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new p(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},a.each(["a","b","c","d","tx","ty"],function(t){var e=a.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),b=a.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new p(this._px,this._py)},getVector:function(){return new p(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return b.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return b.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(b.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0))},isCollinear:function(t){return p.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return p.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,o,a,u,l){u||(n-=t,i-=e,o-=r,a-=s);var h=n*a-i*o;if(!f.isZero(h)){var c=t-r,d=e-s,_=(o*d-a*c)/h,g=(n*d-i*c)/h,v=1e-12,m=-v,y=1+v;if(l||m<_&&_<y&&m<g&&g<y)return l||(_=_<=0?0:_>=1?1:_),new p(t+_*n,e+_*i)}},getSide:function(t,e,n,i,r,s,o,a){o||(n-=t,i-=e);var u=r-t,l=s-e,h=u*i-l*n;return!a&&f.isZero(h)&&(h=(u*n+u*n)/(n*n+i*i),h>=0&&h<=1&&(h=0)),h<0?-1:h>0?1:0},getSignedDistance:function(t,e,n,i,r,s,o){return o||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/Math.sqrt(n*n+i*i)},getDistance:function(t,e,n,i,r,s,o){return Math.abs(b.getSignedDistance(t,e,n,i,r,s,o))}}}),w=h.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){h.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new X(null,null,this),this._view=G.create(this,t||it.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return a.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,s=e._id,o=r[s];o?o.flags|=t:i.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function ct(){return!!ct.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new T({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({"class":k,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(r,t)},insertLayer:function(t,e){if(e instanceof T){e._remove(!1,!0),a.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,n){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(r,new T(S.NO_INSERT),!0)).insertChild(t,e),n&&e.activate&&e.activate(),e},getItems:function(t){return S._getItems(this,t)},getItem:function(t){return S._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return a.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var s in e){var o=e[s];o&&o!=n&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,r=new a({offset:new p(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new x],updateMatrix:!0}),s=0,o=i.length;s<o;s++)i[s].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var u=this._selectionItems,l=this._scope.settings.handleSize,h=this._updateVersion;for(var c in u)u[c]._drawSelection(t,e,l,u,h);t.restore()}}}),S=a.extend(u,{statics:{extend:function ft(t){return t._serializeFields&&(t._serializeFields=a.set({},this.prototype._serializeFields,t._serializeFields)),ft.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new x,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return a.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var n=t&&a.isPlainObject(t),s=n&&t.internal===!0,o=this._matrix=new x,u=n&&t.project||i.project,l=i.settings;return this._id=s?null:d.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,e&&o.translate(e),o._owner=this,this._style=new X(u._currentStyle,this,u),s||n&&t.insert===!1||!l.insertItems&&(!n||t.insert!==!0)?this._setProject(u):(n&&t.parent||u)._insertItem(r,this,!0),n&&t!==S.NO_INSERT&&this.set(t,{
internal:!0,insert:!0,project:!0,parent:!0}),n},_serialize:function(t,e){function n(n){for(var s in n){var o=r[s];a.equals(o,"leading"===s?1.2*n.fontSize:n[s])||(i[s]=a.serialize(o,t,"data"!==s,e))}}var i={},r=this;return n(this._serializeFields),this instanceof C||n(this._style._defaults),[this._class,i]},_changed:function(t){var e=this._symbol,n=this._parent||e,i=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=r),n&&40&t&&S._clearBoundsCache(n),2&t&&S._clearBoundsCache(this),i&&i._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var n=e._children,i=e._namedChildren;(i[t]=i[t]||[]).push(this),t in n||(n[t]=this)}this._name=t||r,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},a.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=a.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?128:129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this.changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this.changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,n=t?p:_;if(!e){var i=this._pivot;e=this._position=i?this._matrix._transformPoint(i):this.getBounds().getCenter(!0)}return new n(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(p.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new _(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=p.read(arguments,0,{clone:!0,readNull:!0}),this._position=r}},a.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof x,i=a.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var r=this._getCachedBounds(n&&t,i);return arguments.length?r:new y(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=m.read(arguments),e=this.getBounds(),n=this._matrix,i=new x,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new x).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(S._updateBoundsCache(this,e.cacheItem),S._getBounds(n,t,e)):new m},_getCachedBounds:function(t,e){t=t&&t._orNullIfIdentity();var n=e.internal,i=e.cacheItem,r=n?null:this._matrix._orNullIfIdentity(),s=i&&(!t||t.equals(r))&&[e.stroke?1:0,e.handle?1:0,n?1:0].join("");if(S._updateBoundsCache(this._parent||this._symbol,i),s&&this._bounds&&s in this._bounds)return this._bounds[s].rect.clone();var o=this._getBounds(t||r,e);if(s){this._bounds||(this._bounds={});this._bounds[s]={rect:o.clone(),internal:e.internal}}return o},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=r;for(var n=0,i=e.list,s=i.length;n<s;n++){var o=i[n];o!==t&&(o._bounds=o._position=r,o._boundsCache&&S._clearBoundsCache(o))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,s=i,o=r;n=n||{};for(var a=0,u=t.length;a<u;a++){var l=t[a];if(l._visible&&!l.isEmpty()){var h=l._getCachedBounds(e&&e.appended(l._matrix),n);i=Math.min(h.x,i),s=Math.min(h.y,s),r=Math.max(h.x+h.width,r),o=Math.max(h.y+h.height,o)}}return isFinite(i)?new m(i,s,r-i,o-s):new m}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new _(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=p.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this._decomposed;this.scale(e.x/t.x,e.y/t.y),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,n=this._project._updateVersion;if(e&&e._updateVersion!==n&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var i=this._parent;i&&e.prepend(i.getGlobalMatrix(!0)),e._updateVersion=n}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function dt(t){dt.base.call(this,t);for(var e=this._children,n=0,i=e&&e.length;n<i;n++)e[n]._installEvents(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof T)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return a.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(S.NO_INSERT),n=this._children,i=a.pick(t?t.insert:r,t===r||t===!0),s=a.pick(t?t.deep:r,!0);n&&e.copyAttributes(this),n&&!s||e.copyContent(this),n||e.copyAttributes(this),i&&e.insertAbove(this);var o=this._name,u=this._parent;if(o&&u){for(var n=u._children,l=o,h=1;n[o];)o=l+" "+h++;o!==l&&e.setName(o)}return e},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,r=n.length;i<r;i++){var s=n[i];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,u=t._name;this._data=o?a.clone(o):null,u&&this.setName(u)},rasterize:function(t,e){var n=this.getStrokeBounds(),i=(t||this.getView().getResolution())/72,s=n.getTopLeft().floor(),o=n.getBottomRight().ceil(),u=new g(o.subtract(s)),l=new A(S.NO_INSERT);if(!u.isZero()){var h=it.getCanvas(u.multiply(i)),c=h.getContext("2d"),f=(new x).scale(i).translate(s.negate());c.save(),f.applyToContext(c),this.draw(c,new a({matrices:[f]})),c.restore(),l.setCanvas(h)}return l.transform((new x).translate(s.add(u.divide(2))).scale(1/i)),(e===r||e)&&l.insertAbove(this),l},contains:function(){return!!this._contains(this._matrix._inverseTransform(p.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return m.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new L.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof S&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(p.read(arguments),O.getOptions(arguments))}function e(){var t=p.read(arguments),e=O.getOptions(arguments),n=[];return this._hitTest(t,a.set({all:n},e)),n}function n(t,e,n,i){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var o=r[s],a=o!==i&&o._hitTest(t,e,n);if(a&&!e.all)return a}return null}return w.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){function i(t){return t&&d&&!d(t)&&(t=null),t&&e.all&&e.all.push(t),t}function r(e,n){var i=h["get"+n]();if(t.subtract(i).divide(l).length<=1)return new O(e,p,{name:a.hyphenate(n),point:i})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var s=this._matrix,o=n?n.appended(s):this.getGlobalMatrix().prepend(this.getView()._matrix),u=Math.max(e.tolerance,1e-12),l=e._tolerancePadding=new g(L._getStrokePadding(u,s.inverted()._shiftless()));if(t=s._inverseTransform(t),!t||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(l.multiply(2))._containsPoint(t))return null;var h,c,f=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==a.hyphenate(this._class)||e["class"]&&!(this instanceof e["class"])),d=e.match,p=this;if(f&&(e.center||e.bounds)&&this._parent){if(h=this.getInternalBounds(),e.center&&(c=r("center","Center")),!c&&e.bounds)for(var _=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],v=0;v<8&&!c;v++)c=r("bounds",_[v]);c=i(c)}return c||(c=this._hitTestChildren(t,e,o)||f&&i(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o.inverted()._shiftless()))||null),c&&c.point&&(c.point=s.transform(c.point)),c},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new O("fill",this)},matches:function(t,e){function n(t,e){for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],s=e[i];if(a.isPlainObject(r)&&a.isPlainObject(s)){if(!n(r,s))return!1}else if(!a.equals(r,s))return!1}return!0}var i=typeof t;if("object"===i){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===i)return t(this);if("match"===t)return e(this);var s=/^(empty|editable)$/.test(t)?this["is"+a.capitalize(t)]():"type"===t?a.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;s=this._class}if("function"==typeof e)return!!e(s);if(e){if(e.test)return e.test(s);if(a.isPlainObject(e))return n(e,s)}return a.equals(s,e)},getItems:function(t){return S._getItems(this,t,this._matrix)},getItem:function(t){return S._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function pt(t,e,n,i,r){if(!i){var s="object"==typeof e&&e,o=s&&s.overlapping,u=s&&s.inside,l=o||u,h=l&&m.read([l]);i={items:[],recursive:s&&s.recursive!==!1,inside:!!u,overlapping:!!o,rect:h,path:o&&new L.Rectangle({rectangle:h,insert:!1})},s&&(e=a.filter({},e,{recursive:!0,inside:!0,overlapping:!0}))}var c=t._children,f=i.items,h=i.rect;n=h&&(n||new x);for(var d=0,p=c&&c.length;d<p;d++){var _=c[d],g=n&&n.appended(_._matrix),v=!0;if(h){var l=_.getBounds(g);if(!h.intersects(l))continue;h.contains(l)||i.overlapping&&(l.contains(h)||i.path.intersects(_,g))||(v=!1)}if(v&&_.matches(e)&&(f.push(_),r))break;if(i.recursive!==!1&&pt(_,e,g,i,r),r&&f.length>0)break}return f}}},{importJSON:function(t){var e=a.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(r,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){e=a.slice(e);for(var i=e.length-1;i>=0;i--){var r=e[i];r?r._remove(!1,!0):e.splice(i,1)}a.splice(n,e,t,0);for(var s=this._project,o=s._changes,i=0,u=e.length;i<u;i++){var r=e[i],l=r._name;r._parent=this,r._setProject(s,!0),l&&r.setName(l),o&&this._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(r,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",copyTo:function(t){return t._insertItem(r,this.clone(!1))},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;s!==-1&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,r=this._index;return!!n&&(this._name&&this._removeNamed(),null!=r&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),a.splice(n._children,null,r,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=a.pick(e,this._children.length);for(var n=a.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do e.unshift(t);while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return this._getOrder(t)===-1},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},a.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?a:p).read(arguments),i=p.read(arguments,0,{readNull:!0});return this.transform((new x)[t](n,i||this.getPosition(!0)))}},{translate:function(){var t=new x;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){t&&t.isIdentity()&&(t=null);var r=this._matrix,s=(e||this._applyMatrix)&&(!r.isIdentity()||t||e&&n&&this._children);if(!t&&!s)return this;if(t&&(!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t)),s=s&&this._transformContent(r,n,i)){var o=this._pivot,a=this._style,u=a.getFillColor(!0),l=a.getStrokeColor(!0);o&&r._transformPoint(o,o,!0),u&&u.transform(r),l&&l.transform(r),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var h=this._bounds,c=this._position;this._changed(9);var f=h&&t&&t.decompose();if(f&&!f.shearing&&f.rotation%90===0){for(var d in h){var p=h[d];if(s||!p.internal){var _=p.rect;t._transformBounds(_,_)}}var g=this._boundsGetter,_=h[g&&g.getBounds||g||"getBounds"];_&&(this._position=_.getCenter(!0)),this._bounds=h}else t&&c&&(this._position=t._transformPoint(c,c));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(p.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(p.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(p.read(arguments))},localToParent:function(){return this._matrix._transformPoint(p.read(arguments))},fitBounds:function(t,e){t=m.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new m(new p,new g(n.width*s,n.height*s));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,n){var r=this._style;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t),t.lineWidth=r.getStrokeWidth();var s=r.getStrokeJoin(),o=r.getStrokeCap(),a=r.getMiterLimit();if(s&&(t.lineJoin=s),o&&(t.lineCap=o),a&&(t.miterLimit=a),i.support.nativeDash){var u=r.getDashArray(),l=r.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(r.hasShadow()){var h=e.pixelRatio||1,c=n._shiftless().prepend((new x).scale(h,h)),f=c.transform(new p(r.getShadowBlur(),0)),d=c.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=d.x,t.shadowOffsetY=d.y}},draw:function(t,e,n){var i=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,s=e.viewMatrix,o=this._matrix,a=r[r.length-1].appended(o);if(a.isInvertible()){s=s?s.appended(a):a,r.push(a),e.updateMatrix&&(a._updateVersion=i,this._globalMatrix=a);var u,l,h,c=this._blendMode,f=this._opacity,d="normal"===c,p=rt.nativeModes[c],_=d&&1===f||e.dontStart||e.clip||(p||d&&f<1)&&this._canComposite(),g=e.pixelRatio||1;if(!_){var v=this.getStrokeBounds(s);if(!v.width||!v.height)return;h=e.offset,l=e.offset=v.getTopLeft().floor(),u=t,t=it.getContext(v.getSize().ceil().add(1).multiply(g)),1!==g&&t.scale(g,g)}t.save();var m=n?n.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!_&&e.clipItem,x=!m||y;if(_?(t.globalAlpha=f,p&&(t.globalCompositeOperation=c)):x&&t.translate(-l.x,-l.y),x&&(_?o:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(g,0,0,g,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,s,m),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),_||(rt.process(c,t,u,f,l.subtract(h).multiply(g)),it.release(t),e.offset=h)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof D)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var s=this._selection,o=1&s,a=2&s||o&&this._selectBounds,u=4&s;if(this._drawSelected||(o=!1),(o||a||u)&&this._isUpdated(r)){var l,h=this.getSelectedColor(!0)||(l=this.getLayer())&&l.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=h?h.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,c,i),u){var d=this.getPosition(!0),p=d.x,_=d.y;t.beginPath(),t.arc(p,_,f,0,2*Math.PI,!0),t.stroke();for(var g=[[0,-1],[1,0],[0,1],[-1,0]],v=f,m=n+1,y=0;y<4;y++){var x=g[y],b=x[0],w=x[1];t.moveTo(p+b*v,_+w*v),t.lineTo(p+b*m,_+w*m),t.stroke()}}if(a){var S=c._transformCorners(this.getInternalBounds());t.beginPath();for(var y=0;y<8;y++)t[y?"lineTo":"moveTo"](S[y],S[++y]);t.closePath(),t.stroke();for(var y=0;y<8;y++)t.fillRect(S[y]-f,S[++y]-f,n,n)}}},_canComposite:function(){return!1}},a.each(["down","drag","up","move"],function(t){this["removeOn"+a.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}})),C=S.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function _t(t){_t.base.call(this,t),1026&t&&(this._clipItem=r)},_getClipItem:function(){var t=this._clipItem;if(t===r){t=null;for(var e=this._children,n=0,i=e.length;n<i;n++)if(e[n]._clipMask){t=e[n];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function gt(t,e){var n=this._getClipItem();return n?n._getCachedBounds(t&&t.appended(n._matrix),a.set({},e,{stroke:!1})):gt.base.call(this,t,e)},_hitTestChildren:function vt(t,e,n){var i=this._getClipItem();return(!i||i.contains(t))&&vt.base.call(this,t,e,n,i)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,o=r.length;s<o;s++){var a=r[s];a!==i&&a.draw(t,e)}}}),T=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function mt(){return this._parent?mt.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),P=S.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t){this._initialize(t)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&a.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new v(t.width,t.height,this,"setSize")},setSize:function(){var t=g.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(g.min(this._radius,t.divide(2))):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new v(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=g.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var n=g.max(this._size,t.multiply(2));this._size.set(n)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(L[a.capitalize(this._type)])({center:new p,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),i.settings.applyMatrix&&e.setApplyMatrix(!0),(t===r||t)&&e.insertAbove(this),e},toShape:"#clone",_draw:function(t,e,n,i){var r=this._style,s=r.hasFill(),o=r.hasStroke(),a=e.dontFinish||e.clip,u=!i;if(s||o||a){var l=this._type,h=this._radius,c="circle"===l;if(e.dontStart||t.beginPath(),u&&c)t.arc(0,0,h,0,2*Math.PI,!0);else{var f=c?h:h.width,d=c?h:h.height,p=this._size,_=p.width,g=p.height;if(u&&"rectangle"===l&&0===f&&0===d)t.rect(-_/2,-g/2,_,g);else{var v=_/2,m=g/2,y=.44771525016920644,x=f*y,b=d*y,w=[-v,-m+d,-v,-m+b,-v+x,-m,-v+f,-m,v-f,-m,v-x,-m,v,-m+b,v,-m+d,v,m-d,v,m-b,v-x,m,v-f,m,-v+f,m,-v+x,m,-v,m-b,-v,m-d];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),m!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}a||!s&&!o||(this._setStyles(t,e,n),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(L._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var o=new p(s>1&&s<4?-1:1,s>2?-1:1),a=o.multiply(r),u=a.subtract(o.multiply(i)),l=new m(n?a.add(o.multiply(n)):a,u);if(l.contains(e))return{point:u,quadrant:s}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function n(e){if("rectangle"===this._type){var i=t(this,e);return i?e.subtract(i.point).divide(this._radius).getLength()<=1:n.base.call(this,e)}return e.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,r,s,o){var a=!1,u=this._style,l=r.stroke&&u.hasStroke(),h=r.fill&&u.hasFill();if(l||h){var c=this._type,f=this._radius,d=l?u.getStrokeWidth()/2:0,p=r._tolerancePadding.add(L._getStrokePadding(d,!u.getStrokeScaling()&&o));if("rectangle"===c){var _=p.multiply(2),g=t(this,n,_);if(g)a=e(n.subtract(g.point),f,p,g.quadrant);else{var v=new m(this._size).setCenter(0,0),y=v.expand(_),x=v.expand(_.negate());a=y._containsPoint(n)&&!x._containsPoint(n)}}else a=e(n,f,p)}return a?new O(l?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,r){var s=new P(a.getNamed(r));return s._type=t,s._size=n,s._radius=i,s.translate(e)}return{Circle:function(){var e=p.readNamed(arguments,"center"),n=a.readNamed(arguments,"radius");return t("circle",e,new g(2*n),n,arguments)},Rectangle:function(){var e=m.readNamed(arguments,"rectangle"),n=g.min(g.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=P._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(a.hasNamed(t,"radius"))e=p.readNamed(t,"center"),n=g.readNamed(t,"radius");else{var i=m.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),A=S.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,e){if(!this._initialize(t,e!==r&&p.read(arguments,1))){var n="string"==typeof t?o.getElementById(t):t;n?this.setImage(n):this.setSource(t)}this._size||(this._size=new g,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=it.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new v(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=g.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(it.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&it.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new p(0,0).transform(t),n=new p(1,0).transform(t).subtract(e),i=new p(0,1).transform(t).subtract(e);return new g(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=n.getView(),r=t&&t.type||"load";e&&n.responds(r)&&(i=e._scope,n.emit(r,new $(t)))}var n=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&Y.add(t,{load:function(i){n._setImage(t),e(i)},error:e})},_setImage:function(t){this._canvas&&it.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new g(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=it.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){it.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new n.Image,i=this._crossOrigin;i&&(e.crossOrigin=i),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=m.read(arguments),e=it.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=m.read(arguments),e=new A(S.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),
e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=p.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof z?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new m(t):"x"in t&&(e=new m(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=32,r=Math.min(e.width,i),s=Math.min(e.height,i),o=A._sampleContext;o?o.clearRect(0,0,i+1,i+1):o=A._sampleContext=it.getContext(new g(i)),o.save();var u=(new x).scale(r/e.width,s/e.height).translate(-e.x,-e.y);u.applyToContext(o),n&&n.draw(o,new a({clip:!0,matrices:[u]})),this._matrix.applyToContext(o);var l=this.getElement(),h=this._size;l&&o.drawImage(l,-h.width/2,-h.height/2),o.restore();for(var c=o.getImageData(.5,.5,Math.ceil(r),Math.ceil(s)).data,f=[0,0,0],d=0,p=0,_=c.length;p<_;p+=4){var v=c[p+3];d+=v,v/=255,f[0]+=c[p]*v,f[1]+=c[p+1]*v,f[2]+=c[p+2]*v}for(var p=0;p<3;p++)f[p]/=d;return d?q.read(f):null},getPixel:function(){var t=p.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new q("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=p.read(arguments),e=q.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),o=s.data;o[0]=255*n[0],o[1]=255*n[1],o[2]=255*n[2],o[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=g.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=m.read(arguments);return t.isEmpty()&&(t=new m(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=p.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new m(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new O("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),k=S.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==r&&p.read(arguments,1))||this.setDefinition(t instanceof M?t:new M(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n,i){var r=this._definition._item._hitTest(t,e,n);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),M=a.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=d.get(),this.project=i.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return a.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&S._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new p),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new k(this,t)},clone:function(){return new M(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),O=a.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(t){var e=t&&a.read(t);return a.set({type:null,tolerance:i.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),I=a.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,n,i,s,o){var a,u,l,h,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(a=t.point,u=t.handleIn,l=t.handleOut,h=t.selection):(a=t,u=e,l=n,h=i):(a=[t,e],u=n!==r?[n,i]:null,l=s!==r?[s,o]:null)),new R(a,this,"_point"),new R(u,this,"_handleIn"),new R(l,this,"_handleOut"),h&&this.setSelection(h)},_serialize:function(t,e){var n=this._point,i=this._selection,r=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&r.push(i),a.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(p.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(p.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(p.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(129))},changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this.changeSelection(7,t)},getIndex:function(){return this._index!==r?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new E(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,n){var i=t||{},s=i.type,o=i.factor,a=this.getPrevious(),u=this.getNext(),l=(a||this)._point,h=this._point,c=(u||this)._point,f=l.getDistance(h),d=h.getDistance(c);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(a&&u){var _=l.subtract(c),g=o===r?.4:o,v=g*f/(f+d);e||this.setHandleIn(_.multiply(v)),n||this.setHandleOut(_.multiply(v-g))}}else{var m=o===r?.5:o,y=Math.pow(f,m),x=y*y,b=Math.pow(d,m),w=b*b;if(!e&&a){var S=2*w+3*b*y+x,C=3*b*(b+y);this.setHandleIn(0!==C?new p((w*l._x+S*h._x-x*c._x)/C-h._x,(w*l._y+S*h._y-x*c._y)/C-h._y):new p)}if(!n&&u){var S=2*x+3*y*b+w,C=3*y*(y+b);this.setHandleOut(0!==C?new p((x*c._x+S*h._x-w*l._x)/C-h._x,(x*c._y+S*h._y-w*l._y)/C-h._y):new p)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new I(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new I(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,s=t._point,o=e._point,a=t._handleIn,u=e._handleIn,l=e._handleOut,h=t._handleOut;this._point._set(i*s._x+r*o._x,i*s._y+r*o._y,!0),this._handleIn._set(i*a._x+r*u._x,i*a._y+r*u._y,!0),this._handleOut._set(i*h._x+r*l._x,i*h._y+r*l._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,a=i._y,u=2;return e[0]=o,e[1]=a,r&&(e[u++]=r._x+o,e[u++]=r._y+a),s&&(e[u++]=s._x+o,e[u++]=s._y+a),t&&(t._transformCoordinates(e,e,u/2),o=e[0],a=e[1],n?(i._x=o,i._y=a,u=2,r&&(r._x=e[u++]-o,r._y=e[u++]-a),s&&(s._x=e[u++]-o,s._y=e[u++]-a)):(r||(e[u++]=o,e[u++]=a),s||(e[u++]=o,e[u++]=a))),e}}),R=p.extend({initialize:function(t,e,n){var i,s,o;if(t)if((i=t[0])!==r)s=t[1];else{var a=t;(i=a.x)===r&&(a=p.read(arguments),i=a.x),s=a.y,o=a.selected}else i=s=0;this._x=i,this._y=s,this._owner=e,e[n]=this,o&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=f.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner.changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),B=a.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,s,o,a){var u,l,h,c,f,d,p=arguments.length;3===p?(this._path=t,u=e,l=n):p?1===p?"segment1"in t?(u=new I(t.segment1),l=new I(t.segment2)):"point1"in t?(h=t.point1,f=t.handle1,d=t.handle2,c=t.point2):Array.isArray(t)&&(h=[t[0],t[1]],c=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(u=new I(t),l=new I(e)):4===p?(h=t,f=e,d=n,c=i):8===p&&(h=[t,e],c=[o,a],f=[n-t,i-e],d=[r-o,s-a]):(u=new I,l=new I),this._segment1=u||new I(h,null,f),this._segment2=l||new I(c,d,null)},_serialize:function(t,e){return a.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=r},clone:function(){return new B(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return B.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;t=e.remove(),t&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(p.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(p.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(p.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(p.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle2().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return B.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new p(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=B.getLength(this.getValues(),0,1)),this._length},getArea:function(){return B.getArea(this.getValues())},getLine:function(){return new b(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new B(B.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return B.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=1e-8,i=1-n,r=null;if(t>=n&&t<=i){var s=B.subdivide(this.getValues(),t),o=s[0],a=s[1],u=e||this.hasHandles(),l=this._segment1,h=this._segment2,c=this._path;u&&(l._handleOut._set(o[2]-o[0],o[3]-o[1]),h._handleIn._set(a[4]-a[6],a[5]-a[7]));var f=o[6],d=o[7],_=new I(new p(f,d),u&&new p(o[4]-f,o[5]-d),u&&new p(a[2]-f,a[3]-d));c?(c.insert(l._index+1,_),r=this.getNext()):(this._segment2=_,this._changed(),r=new B(_,h))}return r},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===r?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===r?.5:e?t:this.getTimeAt(t))},reversed:function(){return new B(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,s=t._handleOut,o=e._handleIn,a=e._point,u=r.x,l=r.y,h=a.x,c=a.y,f=i?[u,l,u,l,h,c,h,c]:[u,l,u+s._x,l+s._y,h+o._x,c+o._y,h,c];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,e){var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],u=t[5],l=t[6],h=t[7];e===r&&(e=.5);var c=1-e,f=c*n+e*s,d=c*i+e*o,p=c*s+e*a,_=c*o+e*u,g=c*a+e*l,v=c*u+e*h,m=c*f+e*p,y=c*d+e*_,x=c*p+e*g,b=c*_+e*v,w=c*m+e*x,S=c*y+e*b;return[[n,i,f,d,m,y,w,S],[w,S,x,b,g,v,l,h]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],s=t[i+2],o=t[i+4],a=t[i+6];if(r>=s==s>=o&&s>=o==o>=a||B.isStraight(t))n.push(t);else{var u=3*(s-o)-r+a,l=2*(r+o)-4*s,h=s-r,c=1e-8,d=1-c,p=[],_=f.solveQuadratic(u,l,h,p,c,d);if(_){p.sort();var g=p[0],v=B.subdivide(t,g);n.push(v[0]),_>1&&(g=(p[1]-g)/(1-g),v=B.subdivide(v[1],g),n.push(v[0])),n.push(v[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,s){var o=t[e],a=t[e+2],u=t[e+4],l=t[e+6],h=0;if(!(o<n&&l<n&&a<n&&u<n||o>n&&l>n&&a>n&&u>n)){var c=3*(a-o),d=3*(u-a)-c,p=l-o-c-d;h=f.solveCubic(p,d,c,o-n,i,r,s)}return h},getTimeOf:function(t,e){var n=new p(t[0],t[1]),i=new p(t[6],t[7]),r=1e-12,s=1e-7,o=e.isClose(n,r)?0:e.isClose(i,r)?1:null;if(null===o)for(var a=[e.x,e.y],u=[],l=0;l<2;l++)for(var h=B.solveCubic(t,l,a[l],u,0,1),c=0;c<h;c++){var f=u[c];if(e.isClose(B.getPoint(t,f),s))return f}return e.isClose(n,s)?0:e.isClose(i,s)?1:null},getNearestTime:function(t,e){function n(n){if(n>=0&&n<=1){var i=e.getDistance(B.getPoint(t,n),!0);if(i<f)return f=i,d=n,!0}}if(B.isStraight(t)){var i=t[0],r=t[1],s=t[6],o=t[7],a=s-i,u=o-r,l=a*a+u*u;if(0===l)return 0;var h=((e.x-i)*a+(e.y-r)*u)/l;return h<1e-12?0:h>.999999999999?1:B.getTimeOf(t,new p(i+h*a,r+h*u))}for(var c=100,f=1/0,d=0,_=0;_<=c;_++)n(_/c);for(var g=1/(2*c);g>1e-8;)n(d-g)||n(d+g)||(g/=2);return d},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=B.subdivide(t,e)[1]),n<1&&(t=B.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7],h=3*r-2*n-u,c=3*s-2*i-l,f=3*o-2*u-n,d=3*a-2*l-i;return Math.max(h*h,f*f)+Math.max(c*c,d*d)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7];return 3*((u-n)*(i+s)-(a-e)*(r+o)+r*(e-s)-i*(n-o)+u*(s+e/3)-a*(o+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)B._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new m(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,o,a,u){function l(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>a[r]&&(a[r]=i)}s/=2;var h=o[r]-s,c=a[r]+s;if(t<h||e<h||n<h||i<h||t>c||e>c||n>c||i>c)if(e<t!=e<i&&n<t!=n<i)l(t,s),l(i,s);else{var d=3*(e-n)-t+i,p=2*(t+n)-4*e,_=e-t,g=f.solveQuadratic(d,p,_,u),v=1e-8,m=1-v;l(i,0);for(var y=0;y<g;y++){var x=u[y],b=1-x;v<=x&&x<=m&&l(b*b*b*t+3*b*b*x*e+3*b*x*x*n+x*x*x*i,s)}}}}},a.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=L[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),a.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var s=new b(t,i),o=1e-7;if(s.getDistance(t.add(e))<o&&s.getDistance(i.add(n))<o){var a=r.dot(r),u=r.dot(e)/a,l=r.dot(n)/a;return u>=0&&u<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],s=e[6],o=e[7];return t(new p(i,r),new p(e[2]-i,e[3]-r),new p(e[4]-s,e[5]-o),new p(s,o),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new E(this,t):null},getTimeAt:function(t,e){return B.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(p.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return B.getTimeOf(this.getValues(),p.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=p.read(arguments),e=this.getValues(),n=B.getNearestTime(e,t),i=B.getPoint(e,n);return new E(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return a.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return B[t](i,n?e:B.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return B[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],l=9*(i-s)+3*(a-e),h=6*(e+s)-12*i,c=3*(i-e),f=9*(r-o)+3*(u-n),d=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(l*t+h)*t+c,n=(f*t+d)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function n(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],o=t[2],a=t[3],u=t[4],l=t[5],h=t[6],c=t[7],d=f.isZero;d(o-r)&&d(a-s)&&(o=r,a=s),d(u-h)&&d(l-c)&&(u=h,l=c);var _,g,v=3*(o-r),m=3*(u-o)-v,y=h-r-v-m,x=3*(a-s),b=3*(l-a)-x,w=c-s-x-b;if(0===n)_=0===e?r:1===e?h:((y*e+m)*e+v)*e+r,g=0===e?s:1===e?c:((w*e+b)*e+x)*e+s;else{var S=1e-8,C=1-S;if(e<S?(_=v,g=x):e>C?(_=3*(h-u),g=3*(c-l)):(_=(3*y*e+2*m)*e+v,g=(3*w*e+2*b)*e+x),i){0===_&&0===g&&(e<S||e>C)&&(_=u-o,g=l-a);var T=Math.sqrt(_*_+g*g);T&&(_/=T,g/=T)}if(3===n){var u=6*y*e+2*m,l=6*w*e+2*b,P=Math.pow(_*_+g*g,1.5);_=0!==P?(_*l-g*u)/P:0,g=0}}return 2===n?new p(g,(-_)):new p(_,g)}return{statics:{classify:function(t){function e(t,e,n){var i=e!==r,s=i&&e>0&&e<1,o=i&&n>0&&n<1;return!i||(s||o)&&("loop"!==t||s&&o)||(t="arch",s=o=!1),{type:t,roots:s||o?s&&o?e<n?[e,n]:[n,e]:[s?e:n]:null}}var n=t[0],i=t[1],s=t[2],o=t[3],a=t[4],u=t[5],l=t[6],h=t[7],c=n*(h-u)+i*(a-l)+l*u-h*a,d=s*(i-h)+o*(l-n)+n*h-i*l,p=a*(o-i)+u*(n-s)+s*i-o*n,_=3*p,g=_-d,v=g-d+c,m=Math.sqrt(v*v+g*g+_*_),y=0!==m?1/m:0,x=f.isZero,b="serpentine";if(v*=y,g*=y,_*=y,x(v))return x(g)?e(x(_)?"line":"quadratic"):e(b,_/(3*g));var w=3*g*g-4*v*_;if(x(w))return e("cusp",g/(2*v));var S=w>0?Math.sqrt(w/3):Math.sqrt(-w),C=2*v;return e(w>0?b:"loop",(g+S)/C,(g-S)/C)},getLength:function(n,i,s,o){if(i===r&&(i=0),s===r&&(s=1),B.isStraight(n)){var a=n;s<1&&(a=B.subdivide(a,s)[0],i/=s),i>0&&(a=B.subdivide(a,i)[1]);var u=a[6]-a[0],l=a[7]-a[1];return Math.sqrt(u*u+l*l)}return f.integrate(o||t(n),i,s,e(i,s))},getTimeAt:function(n,i,s){function o(t){return v+=f.integrate(d,s,t,e(s,t)),s=t,v-i}if(s===r&&(s=i<0?1:0),0===i)return s;var a=Math.abs,u=1e-12,l=i>0,h=l?s:0,c=l?1:s,d=t(n),p=B.getLength(n,h,c,d),_=a(i)-p;if(a(_)<u)return l?c:h;if(_>u)return null;var g=i/p,v=0;return f.findRoot(o,d,s+g,h,c,32,1e-12)},getPoint:function(t,e){return n(t,e,0,!1)},getTangent:function(t,e){return n(t,e,1,!0)},getWeightedTangent:function(t,e){return n(t,e,1,!1)},getNormal:function(t,e){return n(t,e,2,!0)},getWeightedNormal:function(t,e){return n(t,e,2,!1)},getCurvature:function(t,e){return n(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],l=-e+3*i-3*s+a,h=3*e-6*i+3*s,c=-3*e+3*i,d=-n+3*r-3*o+u,p=3*n-6*r+3*o,_=-3*n+3*r,g=1e-8,v=1-g,m=[];return f.solveCubic(9*(l*l+d*d),9*(l*h+p*d),2*(h*h+p*p)+3*(c*l+_*d),c*h+p*_,m,g,v),m.sort()}}}},new function(){function t(t,e,n,i,r,s,o,a,u){var l=!u&&n.getPrevious()===s,h=!u&&n!==s&&n.getNext()===s,c=1e-8,f=1-c;if(null==i&&(i=n.getTimeOf(r)),null!==i&&i>=(l?c:0)&&i<=(h?f:1)&&(null==o&&(o=s.getTimeOf(a)),null!==o&&o>=(h?c:0)&&o<=(l?f:1))){var d=new E(n,i,r||n.getPointAtTime(i),u),p=new E(s,o,a||s.getPointAtTime(o),u);d._intersection=p,p._intersection=d,e&&!e(d)||E.insert(t,d,!0)}}function e(r,s,o,a,u,l,h,c,f,d,p,_,g){if(++f>=4096||++c>=40)return f;var v,m,y=1e-9,x=s[0],w=s[1],S=s[6],C=s[7],T=b.getSignedDistance,P=T(x,w,S,C,s[2],s[3]),A=T(x,w,S,C,s[4],s[5]),k=P*A>0?.75:4/9,M=k*Math.min(0,P,A),O=k*Math.max(0,P,A),I=T(x,w,S,C,r[0],r[1]),R=T(x,w,S,C,r[2],r[3]),E=T(x,w,S,C,r[4],r[5]),z=T(x,w,S,C,r[6],r[7]),L=n(I,R,E,z),D=L[0],N=L[1];if(0===P&&0===A&&0===I&&0===R&&0===E&&0===z||null==(v=i(D,N,M,O))||null==(m=i(D.reverse(),N.reverse(),M,O)))return f;var F=d+(p-d)*v,j=d+(p-d)*m;if(Math.max(g-_,j-F)<y){var V=(F+j)/2,q=(_+g)/2;t(u,l,h?a:o,h?q:V,null,h?o:a,h?V:q,null)}else if(r=B.getPart(r,v,m),m-v>.8)if(j-F>g-_){var W=B.subdivide(r,.5),V=(F+j)/2;f=e(s,W[0],a,o,u,l,!h,c,f,_,g,F,V),f=e(s,W[1],a,o,u,l,!h,c,f,_,g,V,j)}else{var W=B.subdivide(s,.5),q=(_+g)/2;f=e(W[0],r,a,o,u,l,!h,c,f,_,q,F,j),f=e(W[1],r,a,o,u,l,!h,c,f,q,g,F,j)}else f=g-_>=y?e(s,r,a,o,u,l,!h,c,f,_,g,F,j):e(r,s,o,a,u,l,h,c,f,F,j,_,g);return f}function n(t,e,n,i){var r,s=[0,t],o=[1/3,e],a=[2/3,n],u=[1,i],l=e-(2*t+i)/3,h=n-(t+2*i)/3;if(l*h<0)r=[[s,o,u],[s,a,u]];else{var c=l/h;r=[c>=2?[s,o,u]:c<=.5?[s,a,u]:[s,o,a,u],[s,u]]}return(l||h)<0?r.reverse():r}function i(t,e,n,i){return t[0][1]<n?r(t,!0,n):e[0][1]>i?r(e,!1,i):t[0][0]}function r(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,o=t.length;s<o;s++){var a=t[s][0],u=t[s][1];if(e?u>=n:u<=n)return u===n?a:i+(n-r)*(a-i)/(u-r);i=a,r=u}return null}function s(t,e,n,i,r){var s=f.isZero;if(s(i)&&s(r)){var o=B.getTimeOf(t,new p(e,n));return null===o?[]:[o]}for(var a=Math.atan2(-r,i),u=Math.sin(a),l=Math.cos(a),h=[],c=[],d=0;d<8;d+=2){var _=t[d]-e,g=t[d+1]-n;h.push(_*l-g*u,_*u+g*l)}return B.solveCubic(h,1,0,c,0,1),c}function o(e,n,i,r,o,a,u){for(var l=n[0],h=n[1],c=n[6],f=n[7],d=s(e,l,h,c-l,f-h),p=0,_=d.length;p<_;p++){var g=d[p],v=B.getPoint(e,g),m=B.getTimeOf(n,v);if(null!==m){var y=B.getPoint(n,m);t(o,a,u?r:i,u?m:g,u?y:v,u?i:r,u?g:m,u?v:y)}}}function a(e,n,i,r,s,o){var a=b.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);a&&t(s,o,i,null,a,r,null,a)}function u(n,i,r,s,u,l){var h=1e-12,f=Math.min,d=Math.max;if(d(n[0],n[2],n[4],n[6])+h>f(i[0],i[2],i[4],i[6])&&f(n[0],n[2],n[4],n[6])-h<d(i[0],i[2],i[4],i[6])&&d(n[1],n[3],n[5],n[7])+h>f(i[1],i[3],i[5],i[7])&&f(n[1],n[3],n[5],n[7])-h<d(i[1],i[3],i[5],i[7])){var p=c(n,i);if(p)for(var _=0;_<2;_++){var g=p[_];t(u,l,r,g[0],null,s,g[1],null,!0)}else{var v=B.isStraight(n),m=B.isStraight(i),y=v&&m,x=v&&!m;(y?a:v||m?o:e)(x?i:n,x?n:i,x?s:r,x?r:s,u,l,x,0,0,0,1,0,1)}}return u}function l(e,n,i,r){var s=B.classify(e);if("loop"===s.type){var o=s.roots;t(i,r,n,o[0],null,n,o[1],null)}return i}function h(t,e,n,i,r,s){var o=!e;o&&(e=t);for(var a,h,c=t.length,f=e.length,d=[],p=[],_=0;_<f;_++)d[_]=e[_].getValues(r);for(var _=0;_<c;_++){var g=t[_],v=o?d[_]:g.getValues(i),m=g.getPath();m!==h&&(h=m,a=[],p.push(a)),o&&l(v,g,a,n);for(var y=o?_+1:0;y<f;y++){if(s&&a.length)return a;u(v,d[y],g,e[y],a,n)}}a=[];for(var _=0,x=p.length;_<x;_++)a.push.apply(a,p[_]);return a}function c(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=b.getDistance,s=1e-8,o=1e-7,a=B.isStraight(t),u=B.isStraight(e),l=a&&u,h=n(t)<n(e),c=h?e:t,f=h?t:e,d=c[0],_=c[1],g=c[6]-d,v=c[7]-_;if(r(d,_,g,v,f[0],f[1],!0)<o&&r(d,_,g,v,f[6],f[7],!0)<o)!l&&r(d,_,g,v,c[2],c[3],!0)<o&&r(d,_,g,v,c[4],c[5],!0)<o&&r(d,_,g,v,f[2],f[3],!0)<o&&r(d,_,g,v,f[4],f[5],!0)<o&&(a=u=l=!0);else if(l)return null;if(a^u)return null;for(var m=[t,e],y=[],x=0;x<4&&y.length<2;x++){var w=1&x,S=1^w,C=x>>1,T=B.getTimeOf(m[w],new p(m[S][C?6:0],m[S][C?7:1]));if(null!=T){var P=w?[C,T]:[T,C];(!y.length||i(P[0]-y[0][0])>s&&i(P[1]-y[0][1])>s)&&y.push(P)}if(x>2&&!y.length)break}if(2!==y.length)y=null;else if(!l){var A=B.getPart(t,y[0][0],y[1][0]),k=B.getPart(e,y[0][1],y[1][1]);(i(k[2]-A[2])>o||i(k[3]-A[3])>o||i(k[4]-A[4])>o||i(k[5]-A[5])>o)&&(y=null)}return y}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?u(e,n,this,t,[]):l(e,this,[])},statics:{getOverlaps:c,getIntersections:h,getCurveLineIntersections:s}}}),E=a.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(n._time=e.getTimeOf(n._point)))return n._setCurve(e),e}var e=this._path,n=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof E){var i=this.getCurve(),r=t.getCurve(),s=i._path,o=r._path;if(s===o){var a=Math.abs,u=1e-7,l=a(this.getOffset()-t.getOffset()),h=!e&&this._intersection,c=!e&&t._intersection;n=(l<u||s&&a(s.getLength()-l)<u)&&(!h&&!c||h&&c&&h.equals(c,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=c.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function t(t,e){var n=t.getValues(),i=B.classify(n).roots||B.getPeaks(n),r=i.length,s=e&&r>1?i[r-1]:r>0?i[0]:.5;d.push(B.getLength(n,e?s:0,e?1:s)/2)}function e(t,e,n){return e<n?t>e&&t<n:t>e||t<n}var n=this._intersection;if(!n)return!1;var i=this.getTime(),r=n.getTime(),s=1e-8,o=1-s,a=i>=s&&i<=o,u=r>=s&&r<=o;if(a&&u)return!this.isTouching();var l=this.getCurve(),h=i<s?l.getPrevious():l,c=n.getCurve(),f=r<s?c.getPrevious():c;if(i>o&&(l=l.getNext()),r>o&&(c=c.getNext()),!(h&&l&&f&&c))return!1;var d=[];a||(t(h,!0),t(l,!1)),u||(t(f,!0),t(c,!1));var p=this.getPoint(),_=Math.min.apply(Math,d),g=a?l.getTangentAtTime(i):l.getPointAt(_).subtract(p),v=a?g.negate():h.getPointAt(-_).subtract(p),m=u?c.getTangentAtTime(r):c.getPointAt(_).subtract(p),y=u?m.negate():f.getPointAt(-_).subtract(p),x=v.getAngle(),b=g.getAngle(),w=y.getAngle(),S=m.getAngle();return!!(a?e(x,w,S)^e(b,w,S)&&e(x,S,w)^e(b,S,w):e(w,x,b)^e(S,x,b)&&e(w,b,x)^e(S,b,x))},hasOverlap:function(){return!!this._overlap}},a.each(B._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){function i(n,i){for(var s=n+i;s>=-1&&s<=r;s+=i){var o=t[(s%r+r)%r];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(var r=t.length,s=0,o=r-1;s<=o;){var a,u=s+o>>>1,l=t[u];if(n&&(a=e.equals(l)?l:i(u,-1)||i(u,1)))return e._overlap&&(a._overlap=a._intersection._overlap=!0),a;var h=e.getPath(),c=l.getPath(),f=h!==c?h._id-c._id:e.getIndex()+e.getTime()-(l.getIndex()+l.getTime());f<0?o=u-1:s=u+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),z=S.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(a.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var r=n[0];i=r&&Array.isArray(r[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));var s=i?D:L;return new s(t)}},_asPathItem:function(){return this},isClockwise:function(){
return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var n=+i[t];return a&&(n+=u[e]),n}function n(t){return new p(e(t,"x"),e(t+1,"y"))}var i,r,s,o=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,u=new p,l=new p;this.clear();for(var h=0,c=o&&o.length;h<c;h++){var f=o[h],d=f[0],_=d.toLowerCase();i=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var v=i&&i.length;switch(a=d===_,"z"!==r||/[mz]/.test(_)||this.moveTo(u),_){case"m":case"l":for(var m="m"===_,y=0;y<v;y+=2)this[m?"moveTo":"lineTo"](u=n(y)),m&&(l=u,m=!1);s=u;break;case"h":case"v":var x="h"===_?"x":"y";u=u.clone();for(var y=0;y<v;y++)u[x]=e(y,x),this.lineTo(u);s=u;break;case"c":for(var y=0;y<v;y+=6)this.cubicCurveTo(n(y),s=n(y+2),u=n(y+4));break;case"s":for(var y=0;y<v;y+=4)this.cubicCurveTo(/[cs]/.test(r)?u.multiply(2).subtract(s):u,s=n(y),u=n(y+2)),r=_;break;case"q":for(var y=0;y<v;y+=4)this.quadraticCurveTo(s=n(y),u=n(y+2));break;case"t":for(var y=0;y<v;y+=2)this.quadraticCurveTo(s=/[qt]/.test(r)?u.multiply(2).subtract(s):u,u=n(y)),r=_;break;case"a":for(var y=0;y<v;y+=7)this.arcTo(u=n(y+5),new g((+i[y]),(+i[y+1])),+i[y+2],+i[y+4],+i[y+3]);break;case"z":this.closePath(1e-12),u=l}r=_}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),o=r?s:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).touches(t.getBounds(o))?B.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,o,i):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=p.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",s=t[r],o=e[r],a=this[r];if(!s||!o||s.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var u=a.length,l=o.length;if(u<l)for(var h=i?I:L,c=u;c<l;c++)this.add(new h);else u>l&&this[i?"removeSegments":"removeChildren"](l,u);for(var c=0;c<l;c++)a[c].interpolate(s[c],o[c],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=n.length,s=i.length,o=[],a=0;e=!0;for(var u=r-1;u>=0&&e;u--){var l=n[u];e=!1;for(var h=s-1;h>=0&&!e;h--)l.compare(i[h])&&(o[h]||(o[h]=!0,a++),e=!0)}e=e&&a===s}return e}}),L=z.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==r||t.x===r&&t.point===r?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=r,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&a.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function yt(t){if(yt.base.call(this,t),8&t){if(this._length=this._area=r,16&t)this._version++;else if(this._curves)for(var e=0,n=this._curves.length;e<n;e++)this._curves[e]._changed()}else 32&t&&(this._bounds=r)},getStyle:function(){var t=this._parent;return(t instanceof D?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),n=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=r,n){var i=t[n-1];"boolean"==typeof i&&(this.setClosed(i),n--),this._add(I.readList(t,0,{},n))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new B(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new B(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function n(e,n){if(e._transformCoordinates(t,_),i=_[0],r=_[1],g)v.push("M"+p.pair(i,r)),g=!1;else if(a=_[2],u=_[3],a===i&&u===r&&l===s&&h===o){if(!n){var c=i-s,f=r-o;v.push(0===c?"v"+p.number(f):0===f?"h"+p.number(c):"l"+p.pair(c,f))}}else v.push("c"+p.pair(l-s,h-o)+" "+p.pair(a-s,u-o)+" "+p.pair(i-s,r-o));s=i,o=r,l=_[4],h=_[5]}var i,r,s,o,a,u,l,h,f=this._segments,d=f.length,p=new c(e),_=new Array(6),g=!0,v=[];if(!d)return"";for(var m=0;m<d;m++)n(f[m]);return this._closed&&d>0&&(n(f[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,e=s?n.length:e,o=0;o<r;o++){var a=t[o];a._path&&(a=t[o]=a.clone()),a._path=this,a._index=e+o,a._selection&&this._updateSelection(a,0,a._selection)}if(s)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var o=e+r,u=n.length;o<u;o++)n[o]._index=o}if(i){var l=this._countCurves(),h=e>0&&e+r-1===l?e-1:e,c=h,f=Math.min(h+r,l);t._curves&&(i.splice.apply(i,[h,0].concat(t._curves)),c+=t._curves.length);for(var o=c;o<f;o++)i.splice(o,0,new B(this,null,null));this._adjustCurves(h,f)}return this._changed(25),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)n=r[s],n._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(I.readList(arguments)):this._add([I.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(I.readList(arguments,1),t):this._add([I.read(arguments,1)],t)[0]},addSegment:function(){return this._add([I.read(arguments)])[0]},insertSegment:function(t){return this._add([I.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(I.readList(t))},insertSegments:function(t,e){return this._add(I.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=a.pick(e,this._segments.length);var i=this._segments,r=this._curves,s=i.length,o=i.splice(t,e-t),u=o.length;if(!u)return o;for(var l=0;l<u;l++){var h=o[l];h._selection&&this._updateSelection(h,h._selection,0),h._index=h._path=null}for(var l=t,c=i.length;l<c;l++)i[l]._index=l;if(r){for(var f=t>0&&e===s+(this._closed?1:0)?t-1:t,r=r.splice(f,u),l=r.length-1;l>=0;l--)r[l]._path=null;n&&(o._curves=r.slice(1)),this._adjustCurves(f,f)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var s=i+1===r;t+=B.getArea(B.getValues(e[i],e[s?0:i+1],null,s&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function xt(t){1&t||this._selectSegments(!1),xt.base.call(this,t)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n;var i=this._segmentSelection+=n-e;i>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time,r=1e-8,s=1-r;i>s&&(n++,i=0);var o=this.getCurves();if(n>=0&&n<o.length){i>=r&&o[n++].divideAtTime(i);var a,u=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),a=this):(a=new L(S.NO_INSERT),a.insertAbove(this),a.copyAttributes(this)),a._add(u,0),this.addSegment(u[0]),a}return null},split:function(t,e){var n,i=e===r?t:(n=this.getCurves()[t])&&n.getLocationAtTime(e);return null!=i?this.splitAt(i):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,n)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,n))r.setHandleOut(o._handleOut),this._add(i.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(o._point,n)&&t.reverse(),s=t.getLastSegment(),a&&a._point.isClose(s._point,n)?(a.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var u=this.getFirstSegment(),l=this.getLastSegment();return u!==l&&u._point.isClose(l._point,n)&&(u.setHandleIn(l._handleIn),l.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(i)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new N(this,t||.25,256,(!0)),n=e.parts,i=n.length,r=[],s=0;s<i;s++)r.push(new I(n[s].curve.slice(0,2)));!this._closed&&i>0&&r.push(new I(n[i-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var e=new F(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function e(t,e){var i=t&&t.index;if(null!=i){var r=t.path;if(r&&r!==n)throw new Error(t._class+" "+i+" of "+r+" is not part of "+n);e&&t instanceof B&&i++}else i="number"==typeof t?t:e;return Math.min(i<0&&u?i%a:i<0?i+a:i,a-1)}var n=this,i=t||{},s=i.type||"asymmetric",o=this._segments,a=o.length,u=this._closed,l=u&&i.from===r&&i.to===r,h=e(i.from,0),c=e(i.to,a-1);if(h>c)if(u)h-=a;else{var f=h;h=c,c=f}if(/^(?:asymmetric|continuous)$/.test(s)){var d="asymmetric"===s,p=Math.min,_=c-h+1,g=_-1,v=l?p(_,4):1,m=v,y=v,x=[];if(u||(m=p(1,h),y=p(1,a-c-1)),g+=m+y,g<=1)return;for(var b=0,w=h-m;b<=g;b++,w++)x[b]=o[(w<0?w+a:w)%a]._point;for(var S=x[0]._x+2*x[1]._x,C=x[0]._y+2*x[1]._y,T=2,P=g-1,A=[S],k=[C],M=[T],O=[],I=[],b=1;b<g;b++){var R=b<P,E=R?1:d?1:2,z=R?4:d?2:7,L=R?4:d?3:8,D=R?2:d?0:1,N=E/T;T=M[b]=z-N,S=A[b]=L*x[b]._x+D*x[b+1]._x-N*S,C=k[b]=L*x[b]._y+D*x[b+1]._y-N*C}O[P]=A[P]/M[P],I[P]=k[P]/M[P];for(var b=g-2;b>=0;b--)O[b]=(A[b]-O[b+1])/M[b],I[b]=(k[b]-I[b+1])/M[b];O[g]=(3*x[g]._x-O[P])/2,I[g]=(3*x[g]._y-I[P])/2;for(var b=m,F=g-y,w=h;b<=F;b++,w++){var j=o[w<0?w+a:w],V=j._point,q=O[b]-V._x,W=I[b]-V._y;(l||b<F)&&j.setHandleOut(q,W),(l||b>m)&&j.setHandleIn(-q,-W)}}else for(var b=h;b<=c;b++)o[b<0?b+a:b].smooth(i,!l&&b===h,!l&&b===c)},toShape:function(t){function e(t,e){var n=h[t],i=n.getNext(),r=h[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function n(t){var e=h[t],n=e.getPrevious(),i=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&i._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(i._point.subtract(e._point))}function i(t){var e=h[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,s=.5522847498307936;if(i.isOrthogonal(r)){var o=e._point,a=n._point,u=new b(o,i,(!0)).intersect(new b(a,r,(!0)),!0);return u&&f.isZero(i.getLength()/u.subtract(o).getLength()-s)&&f.isZero(r.getLength()/u.subtract(a).getLength()-s)}return!1}function s(t,e){return h[t]._point.getDistance(h[e]._point)}if(!this._closed)return null;var o,a,u,l,h=this._segments;if(!this.hasHandles()&&4===h.length&&e(0,2)&&e(1,3)&&n(1)?(o=P.Rectangle,a=new g(s(0,3),s(0,1)),l=h[1]._point.add(h[2]._point).divide(2)):8===h.length&&i(0)&&i(2)&&i(4)&&i(6)&&e(1,5)&&e(3,7)?(o=P.Rectangle,a=new g(s(1,6),s(0,3)),u=a.subtract(new g(s(0,7),s(1,2))).divide(2),l=h[3]._point.add(h[4]._point).divide(2)):4===h.length&&i(0)&&i(1)&&i(2)&&i(3)&&(f.isZero(s(0,2)-s(1,3))?(o=P.Circle,u=s(0,2)/2):(o=P.Ellipse,u=new g(s(2,0)/2,s(3,1)/2)),l=h[1]._point),o){var c=this.getPosition(!0),d=new o({center:c,size:a,radius:u,insert:!1});return d.copyAttributes(this,!0),d._matrix.prepend(this._matrix),d.rotate(l.subtract(c).getAngle()+90),(t===r||t)&&d.insertAbove(this),d}return null},toPath:"#clone",compare:function bt(t){if(!t||t instanceof D)return bt.base.call(this,t);var e=this.getCurves(),n=t.getCurves(),i=e.length,r=n.length;if(!i||!r)return i==r;for(var s,o,a=e[0].getValues(),u=[],l=0,h=0,c=0;c<r;c++){var f=n[c].getValues();u.push(f);var d=B.getOverlaps(a,f);if(d){s=!c&&d[0][0]>0?r-1:c,o=d[0][1];break}}for(var p,_=Math.abs,g=1e-8,f=u[s];a&&f;){var d=B.getOverlaps(a,f);if(d){var v=d[0][0];if(_(v-h)<g){h=d[1][0],1===h&&(a=++l<i?e[l].getValues():null,h=0);var m=d[0][1];if(_(m-o)<g){if(p||(p=[s,m]),o=d[1][1],1===o&&(++s>=r&&(s=0),f=u[s]||n[s].getValues(),o=0),!a)return p[0]===s&&p[1]===o;continue}}}break}return!1},_hitTestSelf:function(t,e,n,i){function r(e,n){return t.subtract(e).divide(n).length<=1}function s(t,n,i){if(!e.selected||n.isSelected()){var s=t._point;if(n!==s&&(n=n.add(s)),r(n,b))return new O(i,_,{segment:t,point:n})}}function o(t,n){return(n||e.segments)&&s(t,t._point,"segment")||!n&&e.handles&&(s(t,t._handleIn,"handle-in")||s(t,t._handleOut,"handle-out"))}function a(t){f.add(t)}function u(e){var n=y||e._index>0&&e._index<m-1;if("round"===(n?l:h))return r(e._point,b);if(f=new L({internal:!0,closed:!0}),n?e.isSmooth()||L._addBevelJoin(e,l,T,c,null,i,a,!0):"square"===h&&L._addSquareCap(e,h,T,null,i,a,!0),!f.isEmpty()){var s;return f.contains(t)||(s=f.getNearestLocation(t))&&r(s.getPoint(),x)}}var l,h,c,f,d,p,_=this,g=this.getStyle(),v=this._segments,m=v.length,y=this._closed,x=e._tolerancePadding,b=x,w=e.stroke&&g.hasStroke(),S=e.fill&&g.hasFill(),C=e.curves,T=w?g.getStrokeWidth()/2:S&&e.tolerance>0||C?0:null;if(null!==T&&(T>0?(l=g.getStrokeJoin(),h=g.getStrokeCap(),c=g.getMiterLimit(),b=b.add(L._getStrokePadding(T,i))):l=h="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(var P=0;P<m;P++)if(p=o(v[P]))return p}else if(p=o(v[0],!0)||o(v[m-1],!0))return p;if(null!==T){if(d=this.getNearestLocation(t)){var A=d.getTime();0===A||1===A&&m>1?u(d.getSegment())||(d=null):r(d.getPoint(),b)||(d=null)}if(!d&&"miter"===l&&m>1)for(var P=0;P<m;P++){var k=v[P];if(t.getDistance(k._point)<=c*T&&u(k)){d=k.getLocation();break}}}return!d&&S&&this._contains(t)||d&&!w&&!C?new O("fill",this):d?new O(w?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},a.each(B._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=p.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var s=n,o=e[i];if(n+=o.getLength(),n>t)return o.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new E(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,n,i){function r(e){var n=u[e],i=u[e+1];s==n&&o==i||(t.beginPath(),t.moveTo(s,o),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,a,0,2*Math.PI,!0),t.fill())}for(var s,o,a=i/2,u=new Array(6),l=0,h=e.length;l<h;l++){var c=e[l],f=c._selection;if(c._transformCoordinates(n,u),s=u[0],o=u[1],2&f&&r(2),4&f&&r(4),t.fillRect(s-a,o-a,i,i),!(1&f)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-a+1,o-a+1,i-2,i-2),t.fillStyle=d}}}function e(t,e,n){function i(e){if(n)e._transformCoordinates(n,p),r=p[0],s=p[1];else{var i=e._point;r=i._x,s=i._y}if(_)t.moveTo(r,s),_=!1;else{if(n)u=p[2],l=p[3];else{var f=e._handleIn;u=r+f._x,l=s+f._y}u===r&&l===s&&h===o&&c===a?t.lineTo(r,s):t.bezierCurveTo(h,c,u,l,r,s)}if(o=r,a=s,n)h=p[4],c=p[5];else{var f=e._handleOut;h=o+f._x,c=a+f._y}}for(var r,s,o,a,u,l,h,c,f=e._segments,d=f.length,p=new Array(6),_=!0,g=0;g<d;g++)i(f[g]);e._closed&&d>0&&i(f[0])}return{_draw:function(t,n,r,s){function o(t){return f[(t%d+d)%d]}var a=n.dontStart,u=n.dontFinish||n.clip,l=this.getStyle(),h=l.hasFill(),c=l.hasStroke(),f=l.getDashArray(),d=!i.support.nativeDash&&c&&f&&f.length;if(a||t.beginPath(),(h||c&&!d||u)&&(e(t,this,s),this._closed&&t.closePath()),!u&&(h||c)&&(this._setStyles(t,n,r),h&&(t.fill(l.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),c)){if(d){a||t.beginPath();var p,_=new N(this,.25,32,(!1),s),g=_.length,v=-l.getDashOffset(),m=0;for(v%=g;v>0;)v-=o(m--)+o(m--);for(;v<g;)p=v+o(m++),(v>0||p>0)&&_.drawPart(t,Math.max(v,0),Math.max(p,0)),v=p+o(m++)}t.stroke()}},_drawSelected:function(n,r){n.beginPath(),e(n,this,r),n.stroke(),t(n,this._segments,r,i.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new I(p.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new I(p.read(arguments))])},cubicCurveTo:function(){var e=p.read(arguments),n=p.read(arguments),i=p.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new I(i,n.subtract(i))])},quadraticCurveTo:function(){var e=p.read(arguments),n=p.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=p.read(arguments),n=p.read(arguments),i=a.pick(a.read(arguments),.5),r=1-i,s=t(this)._point,o=e.subtract(s.multiply(r*r)).subtract(n.multiply(i*i)).divide(2*i*r);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,i,r,s,o=Math.abs,u=Math.sqrt,l=t(this),h=l._point,c=p.read(arguments),d=a.peek(arguments),_=a.pick(d,!0);if("boolean"==typeof _)var v=h.add(c).divide(2),e=v.add(v.subtract(h).rotate(_?-90:90));else if(a.remain(arguments)<=2)e=c,c=p.read(arguments);else{var m=g.read(arguments),y=f.isZero;if(y(m.width)||y(m.height))return this.lineTo(c);var w=a.read(arguments),_=!!a.read(arguments),S=!!a.read(arguments),v=h.add(c).divide(2),C=h.subtract(v).rotate(-w),T=C.x,P=C.y,A=o(m.width),k=o(m.height),M=A*A,O=k*k,R=T*T,B=P*P,E=u(R/M+B/O);if(E>1&&(A*=E,k*=E,M=A*A,O=k*k),E=(M*O-M*B-O*R)/(M*B+O*R),o(E)<1e-12&&(E=0),E<0)throw new Error("Cannot create an arc with the given arguments");n=new p(A*P/k,-k*T/A).multiply((S===_?-1:1)*u(E)).rotate(w).add(v),s=(new x).translate(n).rotate(w).scale(A,k),r=s._inverseTransform(h),i=r.getDirectedAngle(s._inverseTransform(c)),!_&&i>0?i-=360:_&&i<0&&(i+=360)}if(e){var z=new b(h.add(e).divide(2),e.subtract(h).rotate(90),(!0)),L=new b(e.add(c).divide(2),c.subtract(e).rotate(90),(!0)),D=new b(h,c),N=D.getSide(e);if(n=z.intersect(L,!0),!n){if(!N)return this.lineTo(c);throw new Error("Cannot create an arc with the given arguments")}r=h.subtract(n),i=r.getDirectedAngle(c.subtract(n));var F=D.getSide(n);0===F?i=N*o(i):N===F&&(i+=i<0?360:-360)}for(var j=1e-12,V=o(i),q=V>=360?4:Math.ceil((V-j)/90),W=i/q,U=W*Math.PI/360,X=4/3*Math.sin(U)/(1+Math.cos(U)),H=[],Y=0;Y<=q;Y++){var C=c,G=null;if(Y<q&&(G=r.rotate(90).multiply(X),s?(C=s._transformPoint(r),G=s._transformPoint(r.add(G)).subtract(C)):C=n.add(r)),Y){var Z=r.rotate(-90).multiply(X);s&&(Z=s._transformPoint(r.add(Z)).subtract(C)),H.push(new I(C,Z,G))}else l.setHandleOut(G);r=r.rotate(W)}this._add(H)},lineBy:function(){var e=p.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=p.read(arguments),n=p.read(arguments),i=a.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},cubicCurveBy:function(){var e=p.read(arguments),n=p.read(arguments),i=p.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=p.read(arguments),n=p.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(p.read(arguments)),i=a.pick(a.peek(arguments),!0);"boolean"==typeof i?this.arcTo(n,i):this.arcTo(n,e.add(p.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var n=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return L[n](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,s){function o(t){t._transformCoordinates(i,u);for(var e=0;e<2;e++)B._addBounds(l[e],l[e+4],u[e+2],u[e],e,s?s[e]:0,h,c,f);var n=l;l=u,u=n}var a=t[0];if(!a)return new m;for(var u=new Array(6),l=a._transformCoordinates(i,new Array(6)),h=l.slice(0,2),c=h.slice(),f=new Array(2),d=1,p=t.length;d<p;d++)o(t[d]);return e&&o(a),new m(h[0],h[1],c[0]-h[0],c[1]-h[1])},getStrokeBounds:function(t,e,n,i,r){function s(t){p=p.include(t)}function o(t){p=p.unite(b.setCenter(t._point.transform(i)))}function a(t,e){"round"===e||t.isSmooth()?o(t):L._addBevelJoin(t,e,_,x,i,f,s)}function u(t,e){"round"===e?o(t):L._addSquareCap(t,e,_,i,f,s)}var l=n.getStyle(),h=l.hasStroke(),c=l.getStrokeWidth(),f=h&&n._getStrokeMatrix(i,r),d=h&&L._getStrokePadding(c,f),p=L.getBounds(t,e,n,i,r,d);if(!h)return p;for(var _=c/2,v=l.getStrokeJoin(),y=l.getStrokeCap(),x=l.getMiterLimit(),b=new m(new g(d)),w=t.length-(e?0:1),S=1;S<w;S++)a(t[S],v);return e?a(t[0],v):w>0&&(u(t[0],y),u(t[t.length-1],y)),p},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new p(t,0).transform(e),i=new p(0,t).transform(e),r=n.getAngleInRadians(),s=n.getLength(),o=i.getLength(),a=Math.sin(r),u=Math.cos(r),l=Math.tan(r),h=Math.atan2(o*l,s),c=Math.atan2(o,l*s);return[Math.abs(s*Math.cos(h)*u+o*Math.sin(h)*a),Math.abs(o*Math.sin(c)*u+s*Math.cos(c)*a)]},_addBevelJoin:function(t,e,n,i,r,s,o,a){var u=t.getCurve(),l=u.getPrevious(),h=u.getPoint1().transform(r),c=l.getNormalAtTime(1).multiply(n).transform(s),f=u.getNormalAtTime(0).multiply(n).transform(s);if(c.getDirectedAngle(f)<0&&(c=c.negate(),f=f.negate()),a&&o(h),o(h.add(c)),"miter"===e){var d=new b(h.add(c),new p((-c.y),c.x),(!0)).intersect(new b(h.add(f),new p((-f.y),f.x),(!0)),!0);d&&h.getDistance(d)<=i*n&&o(d)}o(h.add(f))},_addSquareCap:function(t,e,n,i,r,s,o){var a=t._point.transform(i),u=t.getLocation(),l=u.getNormal().multiply(n).transform(r);"square"===e&&(o&&(s(a.subtract(l)),s(a.add(l))),a=a.add(l.rotate(0===u.getTime()?-90:90))),s(a.add(l)),s(a.subtract(l))},getHandleBounds:function(t,e,n,i,r){var s,o,a=n.getStyle(),u=r.stroke&&a.hasStroke();if(u){var l=n._getStrokeMatrix(i,r),h=a.getStrokeWidth()/2,c=h;"miter"===a.getStrokeJoin()&&(c=h*a.getMiterLimit()),"square"===a.getStrokeCap()&&(c=Math.max(c,h*Math.SQRT2)),s=L._getStrokePadding(h,l),o=L._getStrokePadding(c,l)}for(var f=new Array(6),d=1/0,p=-d,_=d,g=p,v=0,y=t.length;v<y;v++){var x=t[v];x._transformCoordinates(i,f);for(var b=0;b<6;b+=2){var w=b?s:o,S=w?w[0]:0,C=w?w[1]:0,T=f[b],P=f[b+1],A=T-S,k=T+S,M=P-C,O=P+C;A<d&&(d=A),k>p&&(p=k),M<_&&(_=M),O>g&&(g=O)}}return new m(d,_,p-d,g-_)}}});L.inject({statics:new function(){function t(t,e,n){var i=a.getNamed(n),r=new L(i&&i.insert===!1&&S.NO_INSERT);return r._add(t),r._closed=e,r.set(i)}function e(e,n,r){for(var s=new Array(4),o=0;o<4;o++){var a=i[o];s[o]=new I(a._point.multiply(n).add(e),a._handleIn.multiply(n),a._handleOut.multiply(n))}return t(s,!0,r)}var n=.5522847498307936,i=[new I([-1,0],[0,n],[0,-n]),new I([0,-1],[-n,0],[n,0]),new I([1,0],[0,-n],[0,n]),new I([0,1],[n,0],[-n,0])];return{Line:function(){return t([new I(p.readNamed(arguments,"from")),new I(p.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=p.readNamed(arguments,"center"),n=a.readNamed(arguments,"radius");return e(t,new g(n),arguments)},Rectangle:function(){var e,i=m.readNamed(arguments,"rectangle"),r=g.readNamed(arguments,"radius",0,{readNull:!0}),s=i.getBottomLeft(!0),o=i.getTopLeft(!0),a=i.getTopRight(!0),u=i.getBottomRight(!0);if(!r||r.isZero())e=[new I(s),new I(o),new I(a),new I(u)];else{r=g.min(r,i.getSize(!0).divide(2));var l=r.width,h=r.height,c=l*n,f=h*n;e=[new I(s.add(l,0),null,[-c,0]),new I(s.subtract(0,h),[0,f]),new I(o.add(0,h),null,[0,-f]),new I(o.add(l,0),[-c,0],null),new I(a.subtract(l,0),null,[c,0]),new I(a.add(0,h),[0,-f],null),new I(u.subtract(0,h),null,[0,f]),new I(u.subtract(l,0),[c,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=P._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=p.readNamed(arguments,"from"),e=p.readNamed(arguments,"through"),n=p.readNamed(arguments,"to"),i=a.getNamed(arguments),r=new L(i&&i.insert===!1&&S.NO_INSERT);return r.moveTo(t),r.arcTo(e,n),r.set(i)},RegularPolygon:function(){for(var e=p.readNamed(arguments,"center"),n=a.readNamed(arguments,"sides"),i=a.readNamed(arguments,"radius"),r=360/n,s=n%3===0,o=new p(0,s?-i:i),u=s?-1:.5,l=new Array(n),h=0;h<n;h++)l[h]=new I(e.add(o.rotate((h+u)*r)));return t(l,!0,arguments)},Star:function(){for(var e=p.readNamed(arguments,"center"),n=2*a.readNamed(arguments,"points"),i=a.readNamed(arguments,"radius1"),r=a.readNamed(arguments,"radius2"),s=360/n,o=new p(0,(-1)),u=new Array(n),l=0;l<n;l++)u[l]=new I(e.add(o.rotate(s*l).multiply(l%2?r:i)));return t(u,!0,arguments)}}}});var D=z.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function wt(t,e){var n=e,i=n[0];i&&"number"==typeof i[0]&&(n=[n]);for(var r=e.length-1;r>=0;r--){var s=n[r];n!==e||s instanceof L||(n=a.slice(n)),Array.isArray(s)?n[r]=new L({segments:s,insert:!1}):s instanceof D&&(n.splice.apply(n,[r,1].concat(s.removeChildren())),s.remove())}return wt.base.call(this,t,n)},reduce:function St(t){for(var e=this._children,n=e.length-1;n>=0;n--){var i=e[n].reduce(t);i.isEmpty()&&i.remove()}if(!e.length){var i=new L(S.NO_INSERT);return i.copyAttributes(this),i.insertAbove(this),this.remove(),i}return St.base.call(this)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push.apply(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var o=n[r],a=o._matrix;i.push(o.getPathData(t&&!a.isIdentity()?t.appended(a):t,e))}return i.join("")},_hitTestChildren:function Ct(t,e,n){return Ct.base.call(this,t,e["class"]===L||"path"===e.type?e:a.set({},e,{fill:!1}),n)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,o=r.length;s<o;s++)r[s].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var a=this._style;a.hasFill()&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var o=i[r],a=o._matrix;n[o._id]||o._drawSelected(t,a.isIdentity()?e:e.appended(a))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return a.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new L(S.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=p.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},a.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,r=0,s=i.length;r<s;r++)n=i[r][t](e)||n;return n}},{}));z.inject(new function(){function t(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function e(t,e,n,i,r,s){var o=new t(S.NO_INSERT);return o.addChildren(e,!0),n&&(o=o.reduce({simplify:!0})),s&&s.insert===!1||o.insertAbove(r&&i.isSibling(r)&&i.getIndex()<r.getIndex()?r:i),o.copyAttributes(i,!0),o}function n(n,r,s,o){function a(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];x.push.apply(x,i._segments),b.push.apply(b,i.getCurves()),i._overlapsOnly=!0}}if(o&&o.stroke&&/^(subtract|intersect)$/.test(s))return i(n,r,"subtract"===s);var h=t(n,!0),f=r&&n!==r&&t(r,!0),p=v[s];p[s]=!0,f&&(p.subtract||p.exclude)^(f.isClockwise()^h.isClockwise())&&f.reverse();var _,g=l(E.expand(h.getCrossings(f))),m=h._children||[h],y=f&&(f._children||[f]),x=[],b=[];if(g.length){a(m),y&&a(y);for(var w=0,S=g.length;w<S;w++)c(g[w]._segment,h,f,b,p);for(var w=0,S=x.length;w<S;w++){var C=x[w],T=C._intersection;C._winding||c(C,h,f,b,p),T&&T._overlap||(C._path._overlapsOnly=!1)}_=d(x,p)}else _=u(y?m.concat(y):m.slice(),function(t){return!!p[t]});return e(D,_,!0,n,r,o)}function i(n,i,r){function s(t){if(a.contains(t.getPointAt(t.getLength()/2))^r)return l.unshift(t),!0}for(var o=t(n),a=t(i),u=o.getCrossings(a),l=[],h=u.length-1;h>=0;h--){var c=u[h].split();c&&(s(c)&&c.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0))}return s(o),e(C,l,!1,n,i)}function s(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function o(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function u(t,e,n){var i=t&&t.length;if(i){var r=a.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),s=t.slice().sort(function(t,e){return g(e.getArea())-g(t.getArea())}),o=s[0];null==n&&(n=o.isClockwise());for(var u=0;u<i;u++){for(var l=s[u],h=r[l._id],c=l.getInteriorPoint(),f=0,d=u-1;d>=0;d--){var p=s[d];if(p.contains(c)){var _=r[p._id];f=_.winding,h.winding+=f,h.container=_.exclude?_.container:p;break}}if(e(h.winding)===e(f))h.exclude=!0,t[h.index]=null;else{var v=h.container;l.setClockwise(v?!v.isClockwise():n);
}}}return t}function l(t,e,n){function i(t){return t._path._id+"."+t._segment1._index}for(var r,a,u,l=e&&[],h=1e-8,c=1-h,f=!1,d=n||[],p=n&&{},_=(n&&n.length)-1;_>=0;_--){var g=n[_];g._path&&(p[i(g)]=!0)}for(var _=t.length-1;_>=0;_--){var v,m=t[_],y=m._time,x=y,b=e&&!e(m),g=m._curve;if(g&&(g!==a?(f=!g.hasHandles()||p&&p[i(g)],r=[],u=null,a=g):u>=h&&(y/=u)),b)r&&r.push(m);else{if(e&&l.unshift(m),u=x,y<h)v=g._segment1;else if(y>c)v=g._segment2;else{var w=g.divideAtTime(y,!0);f&&d.push(g,w),v=w._segment1;for(var S=r.length-1;S>=0;S--){var C=r[S];C._time=(C._time-y)/(1-y)}}m._setSegment(v);var T=v._intersection,P=m._intersection;if(T){s(T,P);for(var A=T;A;)s(A._intersection,T),A=A._next}else v._intersection=P}}return n||o(d),l||t}function h(t,e,n,i,r){function s(s){var o=s[c+0],u=s[c+6];if(!(v<p(o,u)||v>_(o,u))){var f=s[l+0],g=s[l+2],m=s[l+4],A=s[l+6];if(o===u)return void((f<b&&A>x||A<b&&f>x)&&(C=!0));var k=v===o?0:v===u?1:x>_(f,g,m,A)||b<p(f,g,m,A)?1:1===B.solveCubic(s,c,v,P,0,1)?P[0]:.5,M=0===k?f:1===k?A:B.getPoint(s,k)[n?"y":"x"],O=o>u?1:-1,I=a[c]>a[c+6]?1:-1,R=a[l+6];return v!==o?(M<x?w+=O:M>b?S+=O:C=!0,M>d-y&&M<d+y&&(T/=2)):(O!==I?f<x?w+=O:f>b&&(S+=O):f!=R&&(R<b&&M>b?(S+=O,C=!0):R>x&&M<x&&(w+=O,C=!0)),T=0),a=s,!r&&M>x&&M<b&&0===B.getTangent(s,k)[n?"x":"y"]&&h(t,e,n?0:1,i,!0)}}function o(t){var e=t[c+0],i=t[c+2],r=t[c+4],o=t[c+6];if(v<=_(e,i,r,o)&&v>=p(e,i,r,o))for(var a,u=t[l+0],h=t[l+2],f=t[l+4],d=t[l+6],g=x>_(u,h,f,d)||b<p(u,h,f,d)?[t]:B.getMonoCurves(t,n),m=0,y=g.length;m<y;m++)if(a=s(g[m]))return a}for(var a,u,l=n?1:0,c=1^l,f=[t.x,t.y],d=f[l],v=f[c],m=1e-9,y=1e-6,x=d-m,b=d+m,w=0,S=0,C=!1,T=1,P=[],A=0,k=e.length;A<k;A++){var M,O=e[A],I=O._path,R=O.getValues();if(!(A&&e[A-1]._path===I||(a=null,I._closed||(u=B.getValues(I.getLastCurve().getSegment2(),O.getSegment1(),null,!i),u[c]!==u[c+6]&&(a=u)),a))){a=R;for(var E=I.getLastCurve();E&&E!==O;){var z=E.getValues();if(z[c]!==z[c+6]){a=z;break}E=E.getPrevious()}}if(M=o(R))return M;if(A+1===k||e[A+1]._path!==I){if(u&&(M=o(u)))return M;u=null}}return w=g(w),S=g(S),{winding:_(w,S),windingL:w,windingR:S,quality:T,onPath:C}}function c(t,e,n,i,r){var s,o=[],a=t,u=0;do{var l=t.getCurve(),c=l.getLength();o.push({segment:t,curve:l,length:c}),u+=c,t=t.getNext()}while(t&&!t._intersection&&t!==a);for(var d=[.5,.25,.75],p={winding:0,quality:0},s=p,_=1e-8,v=1-_,m=0;m<d.length&&s.quality<.5;m++)for(var c=u*d[m],y=0,x=o.length;y<x;y++){var b=o[y],w=b.length;if(c<=w){var l=b.curve,S=l._path,C=S._parent,T=f.clamp(l.getTimeAt(c),_,v),P=l.getPointAtTime(T),A=g(l.getTangentAtTime(T).normalize().y)<Math.SQRT1_2?1:0;C instanceof D&&(S=C);var k=r.subtract&&n&&(S===e&&n._getWinding(P,A,!0).winding||S===n&&!e._getWinding(P,A,!0).winding)?p:h(P,i,A,!0);k.quality>s.quality&&(s=k);break}c-=w}for(var y=o.length-1;y>=0;y--)o[y].segment._winding=s}function d(t,e){function n(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function i(t){if(t)for(var e=0,n=o.length;e<n;e++)if(t===o[e])return!0;return!1}function r(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function s(t,e){function r(r,s){for(;r&&r!==s;){var a=r._segment,l=a._path,h=a.getNext()||l&&l.getFirstSegment(),c=h&&h._intersection;a!==t&&(i(a)||i(h)||h&&n(a)&&(n(h)||c&&n(c._segment)))&&u.push(a),e&&o.push(a),r=r._next}}var s=t._intersection,a=s,u=[];if(e&&(o=[t]),s){for(r(s);s&&s._prev;)s=s._prev;r(s,a)}return u}var o,a=[];t.sort(function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),s=!(!i||!i._overlap),o=t._path,a=e._path;return r^s?r?1:-1:!n^!i?n?1:-1:o!==a?o._id-a._id:t._index-e._index});for(var u=0,l=t.length;u<l;u++){var h,c,f,d=t[u],p=n(d),_=null,g=!1,v=!0,m=[];if(p&&d._path._overlapsOnly){var y=d._path,x=d._intersection._segment._path;y.compare(x)&&(y.getArea()&&a.push(y.clone(!1)),r(y),r(x),p=!1)}for(;p;){var b=!_,w=s(d,b),C=w.shift(),g=!b&&(i(d)||i(C)),T=!g&&C;if(b&&(_=new L(S.NO_INSERT),h=null),g){(d.isFirst()||d.isLast())&&(v=d._path._closed),d._visited=!0;break}if(T&&h&&(m.push(h),h=null),h||(T&&w.push(d),h={start:_._segments.length,crossings:w,visited:c=[],handleIn:f}),T&&(d=C),!n(d)){_.removeSegments(h.start);for(var P=0,A=c.length;P<A;P++)c[P]._visited=!1;c.length=0;do d=h&&h.crossings.shift(),d||(h=m.pop(),h&&(c=h.visited,f=h.handleIn));while(h&&!n(d));if(!d)break}var k=d.getNext();_.add(new I(d._point,f,k&&d._handleOut)),d._visited=!0,c.push(d),d=k||d._path.getFirstSegment(),f=k&&k._handleIn}g&&(v&&(_.firstSegment.setHandleIn(f),_.setClosed(v)),0!==_.getArea()&&a.push(_))}return a}var p=Math.min,_=Math.max,g=Math.abs,v={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,n){return h(t,this.getCurves(),e,n)},unite:function(t,e){return n(this,t,"unite",e)},intersect:function(t,e){return n(this,t,"intersect",e)},subtract:function(t){return n(this,t,"subtract")},exclude:function(t,e){return n(this,t,"exclude",e)},divide:function(t,n){return e(C,[this.subtract(t,n),this.intersect(t,n)],!0,this,t,n)},resolveCrossings:function(){function t(t){var e=t&&t._intersection;return e&&e._overlap}var e=this._children,n=e||[this],i=!1,r=!1,s=this.getIntersections(null,function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(r=!0)}),u=i&&r&&[];if(s=E.expand(s),i)for(var h=l(s,function(t){return t.hasOverlap()},u),c=h.length-1;c>=0;c--){var f=h[c]._segment,p=f.getPrevious(),_=f.getNext();t(p)&&t(_)&&(f.remove(),p._handleOut._set(0,0),_._handleIn._set(0,0),p===f||p.getCurve().hasLength()||(_._handleIn.set(p._handleIn),p.remove()))}r&&(l(s,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,s=i._segment;return!!(e&&r&&e._path&&r._path)||(n&&(n._intersection=null),void(s&&(s._intersection=null)))},u),u&&o(u),n=d(a.each(n,function(t){this.push.apply(this,t._segments)},[])));var g,v=n.length;return v>1&&e?(n!==e&&this.setChildren(n),g=this):1!==v||e||(n[0]!==this&&this.setSegments(n[0].removeSegments()),g=this),g||(g=new D(S.NO_INSERT),g.addChildren(n),g=g.reduce(),g.copyAttributes(this),this.replaceWith(g)),g},reorient:function(t,e){var n=this._children;return n&&n.length?this.setChildren(u(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==r&&this.setClockwise(e),this},getInteriorPoint:function(){var t=this.getBounds(),e=t.getCenter(!0);if(!this.contains(e)){for(var n=this.getCurves(),i=e.y,r=[],s=[],o=0,a=n.length;o<a;o++){var u=n[o].getValues(),l=u[1],h=u[3],c=u[5],f=u[7];if(i>=p(l,h,c,f)&&i<=_(l,h,c,f))for(var d=B.getMonoCurves(u),g=0,v=d.length;g<v;g++){var m=d[g],y=m[1],x=m[7];if(y!==x&&(i>=y&&i<=x||i>=x&&i<=y)){var b=i===y?m[0]:i===x?m[6]:1===B.solveCubic(m,1,i,s,0,1)?B.getPoint(m,s[0]).x:(m[0]+m[6])/2;r.push(b)}}}r.length>1&&(r.sort(function(t,e){return t-e}),e.x=(r[0]+r[1])/2)}return e}}});var N=a.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){function s(t,e){var n=B.getValues(t,e,r);u.push(n),o(n,t._index,0,1)}function o(t,n,r,s){if(!(s-r>c)||i&&B.isStraight(t)||B.isFlatEnough(t,e||.25)){var a=t[6]-t[0],u=t[7]-t[1],f=Math.sqrt(a*a+u*u);f>0&&(h+=f,l.push({offset:h,curve:t,index:n,time:s}))}else{var d=B.subdivide(t,.5),p=(r+s)/2;o(d[0],n,r,p),o(d[1],n,p,s)}}for(var a,u=[],l=[],h=0,c=1/(n||32),f=t._segments,d=f[0],p=1,_=f.length;p<_;p++)a=f[p],s(d,a),d=a;t._closed&&s(a,f[0]),this.curves=u,this.parts=l,this.length=h,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var s=n[e];if(s.offset>=t){this.index=e;var o=n[e-1],a=o&&o.index===s.index?o.time:0,u=o?o.offset:0;return{index:s.index,time:a+(s.time-a)*(t-u)/(s.offset-u)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),s=i.index,o=r.index;s<=o;s++){var a=B.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&t.moveTo(a[0],a[1]),t.bezierCurveTo.apply(t,a.slice(2))}}},a.each(B._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return B[t](this.curves[n.index],n.time)}},{})),F=a.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,s=0,o=i.length;s<o;s++){var a=i[s].point;e&&e.equals(a)||n.push(e=a.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new I(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,s){var o=this.points;if(i-n===1){var a=o[n],u=o[i],l=a.getDistance(u)/3;return void this.addCurve(t,[a,a.add(r.normalize(l)),u.add(s.normalize(l)),u])}for(var h,c=this.chordLengthParameterize(n,i),f=Math.max(e,e*e),d=!0,p=0;p<=4;p++){var _=this.generateBezier(n,i,c,r,s),g=this.findMaxError(n,i,_,c);if(g.error<e&&d)return void this.addCurve(t,_);if(h=g.index,g.error>=f)break;d=this.reparameterize(n,i,c,_),f=g.error}var v=o[h-1].subtract(o[h+1]);this.fitCubic(t,e,n,h,r,v),this.fitCubic(t,e,h,i,v.negate(),s)},addCurve:function(t,e){var n=t[t.length-1];n.setHandleOut(e[1].subtract(e[0])),t.push(new I(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var s=1e-12,o=Math.abs,a=this.points,u=a[t],l=a[e],h=[[0,0],[0,0]],c=[0,0],f=0,d=e-t+1;f<d;f++){var p=n[f],_=1-p,g=3*p*_,v=_*_*_,m=g*_,y=g*p,x=p*p*p,b=i.normalize(m),w=r.normalize(y),S=a[t+f].subtract(u.multiply(v+m)).subtract(l.multiply(y+x));h[0][0]+=b.dot(b),h[0][1]+=b.dot(w),h[1][0]=h[0][1],h[1][1]+=w.dot(w),c[0]+=b.dot(S),c[1]+=w.dot(S)}var C,T,P=h[0][0]*h[1][1]-h[1][0]*h[0][1];if(o(P)>s){var A=h[0][0]*c[1]-h[1][0]*c[0],k=c[0]*h[1][1]-c[1]*h[0][1];C=k/P,T=A/P}else{var M=h[0][0]+h[0][1],O=h[1][0]+h[1][1];C=T=o(M)>s?c[0]/M:o(O)>s?c[1]/O:0}var I,R,B=l.getDistance(u),E=s*B;if(C<E||T<E)C=T=B/3;else{var z=l.subtract(u);I=i.normalize(C),R=r.normalize(T),I.dot(z)-R.dot(z)>B*B&&(C=T=B/3,I=R=null)}return[u,u.add(I||i.normalize(C)),l.add(R||r.normalize(T)),l]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);for(var r=1,s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(var s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var o=this.evaluate(3,t,n),a=this.evaluate(2,i,n),u=this.evaluate(1,r,n),l=o.subtract(e),h=a.dot(a)+l.dot(u);return f.isZero(h)?n:n-l.dot(a)/h},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;o<e;o++){var a=this.evaluate(3,n,i[o-t]),u=a.subtract(this.points[o]),l=u.x*u.x+u.y*u.y;l>=s&&(s=l,r=o)}return{error:s,index:r}}}),j=S.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&a.isPlainObject(t)&&t.x===r&&t.y===r;this._initialize(e&&t,!e&&p.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),V=j.extend({_class:"PointText",initialize:function(){j.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new _(t.x,t.y,this,"setPoint")},setPoint:function(){var t=p.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,s=r.hasFill(),o=r.hasStroke(),a=r.getLeading(),u=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var l=0,h=i.length;l<h;l++){t.shadowColor=u;var c=i[l];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(c,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),o=n.getLeading(),a=this.getView().getTextWidth(n.getFontStyle(),i),u=0;"left"!==s&&(u-=a/("center"===s?2:1));var l=new m(u,r?-.75*o:0,a,r*o);return t?t._transformBounds(l,l):l}}),q=a.extend(new function(){function t(t){var n,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(i){n=[0,0,0];for(var o=0;o<3;o++){var a=i[o+1];n[o]=parseInt(1==a.length?a+a:a,16)/255}}else if(i=t.match(/^rgba?\((.*)\)$/)){n=i[1].split(",");for(var o=0,u=n.length;o<u;o++){var a=+n[o];n[o]=o<3?a/255:a}}else if(s){var l=r[t];if(!l){e||(e=it.getContext(1,1),e.globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var h=e.getImageData(0,0,1,1).data;l=r[t]=[h[0]/255,h[1]/255,h[2]/255]}n=l.slice()}else n=[0,0,0];return n}var e,n={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},r={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],u={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4);return[o,0===i?0:s/i,i]},"hsb-rgb":function(t,e,n){t=(t/60%6+6)%6;var i=Math.floor(t),r=t-i,i=o[i],s=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[s[i[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s,a=o?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),u=(i+r)/2,l=o?0:u<.5?s/(i+r):s/(2-i-r);return[a,l,u]},"hsl-rgb":function(t,e,n){if(t=(t/360%1+1)%1,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=[],a=0;a<3;a++){var u=i[a];u<0&&(u+=1),u>1&&(u-=1),o[a]=6*u<1?s+6*(r-s)*u:2*u<1?r:3*u<2?s+(r-s)*(2/3-u)*6:s}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return a.each(n,function(t,e){i[e]=[],a.each(t,function(t,r){var s=a.capitalize(t),o=/^(hue|saturation)$/.test(t),u=i[e][r]="gradient"===t?function(t){var e=this._components[0];return t=W.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return p.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(e)[r]},this["set"+s]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=n[e],this._type=e),this._components[r]=u.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function l(e){var r,s,o,u,h=arguments,c=this.__read,f=0;Array.isArray(e)&&(h=e,e=h[0]);var d=null!=e&&typeof e;if("string"===d&&e in n&&(r=e,e=h[1],Array.isArray(e)?(s=e,o=h[2]):(c&&(f=1),h=a.slice(h,1),d=typeof e)),!s){if(u="number"===d?h:"object"===d&&null!=e.length?e:null){r||(r=u.length>=3?"rgb":"gray");var p=n[r].length;o=u[p],c&&(f+=u===arguments?p+(null!=o?1:0):1),u.length>p&&(u=a.slice(u,0,p))}else if("string"===d)r="rgb",s=t(e),4===s.length&&(o=s[3],s.length--);else if("object"===d)if(e.constructor===l){if(r=e._type,s=e._components.slice(),o=e._alpha,"gradient"===r)for(var _=1,g=s.length;_<g;_++){var v=s[_];v&&(s[_]=v.clone())}}else if(e.constructor===W)r="gradient",u=h;else{r="hue"in e?"lightness"in e?"hsl":"hsb":"gradient"in e||"stops"in e||"radial"in e?"gradient":"gray"in e?"gray":"rgb";var m=n[r],y=i[r];this._components=s=[];for(var _=0,g=m.length;_<g;_++){var x=e[m[_]];null==x&&!_&&"gradient"===r&&"stops"in e&&(x={stops:e.stops,radial:e.radial}),x=y[_].call(this,x),null!=x&&(s[_]=x)}o=e.alpha}c&&r&&(f=1)}if(this._type=r||"rgb",!s){this._components=s=[];for(var y=i[this._type],_=0,g=y.length;_<g;_++){var x=y[_].call(this,u&&u[_]);null!=x&&(s[_]=x)}}return this._components=s,this._properties=n[this._type],this._alpha=o,c&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return a.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=u[this._type+"-"+t])?e.apply(this,this._components):u["rgb-"+t].apply(this,u[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new q(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=n[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=a.isPlainValue(t,!0)?q.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&a.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=c.instance,r=0,s=t.length;r<s;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(n?o:i.number(o)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var n=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;return n=[e(n[0]),e(n[1]),e(n[2])],i<1&&n.push(i<0?0:i),t?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var e,n=this._components,i=n[0],r=i._stops,s=n[1],o=n[2];if(i._radial){var a=o.getDistance(s),u=n[3];if(u){var l=u.subtract(s);l.getLength()>a&&(u=s.add(l.normalize(a-.1)))}var h=u||s;e=t.createRadialGradient(h.x,h.y,0,s.x,s.y,a)}else e=t.createLinearGradient(s.x,s.y,o.x,o.y);for(var c=0,f=r.length;c<f;c++){var d=r[c],p=d._offset;e.addColorStop(null==p?c/(f-1):p,d._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:n,random:function(){var t=Math.random;return new q(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return a.each(t,function(t,e){this[e]=function(e){e=q.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,o=i.length;s<o;s++)r[s]=t(i[s],r[s]);return new q(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),W=a.extend({_class:"Gradient",initialize:function(t,e){this._id=d.get(),t&&a.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return a.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;e!=-1&&(this._owners.splice(e,1),this._owners.length||(this._owners=r))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new W(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var n=0,i=e.length;n<i;n++)e[n]._owner=r;e=this._stops=U.readList(t,0,{clone:!0});for(var n=0,i=e.length;n<i;n++)e[n]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),U=a.extend({_class:"GradientStop",initialize:function(t,e){var n=t,i=e;"object"==typeof t&&e===r&&(Array.isArray(t)&&"number"!=typeof t[0]?(n=t[0],i=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(n=t.color,i=t.offset||t.rampPoint||0)),this.setColor(n),this.setOffset(i)},clone:function(){return new U(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return a.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=q.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),X=a.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new p,selectedColor:null},e=a.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),n=a.set({},e,{fillColor:new q}),s={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},o={beans:!0},u={_class:"Style",beans:!0,initialize:function(r,s,o){this._values={},this._owner=s,this._project=s&&s._project||o||i.project,this._defaults=!s||s instanceof C?e:s instanceof j?n:t,r&&this.set(r)}};return a.each(e,function(t,e){var n=/Color$/.test(e),i="shadowOffset"===e,l=a.capitalize(e),h=s[e],c="set"+l,f="get"+l;u[c]=function(t){var i=this._owner,s=i&&i._children;if(s&&s.length>0&&!(i instanceof D))for(var o=0,a=s.length;o<a;o++)s[o]._style[c](t);else if(e in this._defaults){var u=this._values[e];u!==t&&(n&&(u&&u._owner!==r&&(u._owner=r),t&&t.constructor===q&&(t._owner&&(t=t.clone()),t._owner=i)),this._values[e]=t,i&&i._changed(h||65))}},u[f]=function(t){var s,o=this._owner,u=o&&o._children;if(e in this._defaults&&(!u||!u.length||t||o instanceof D)){var s=this._values[e];if(s===r)s=this._defaults[e],s&&s.clone&&(s=s.clone());else{var l=n?q:i?p:null;!l||s&&s.constructor===l||(this._values[e]=s=l.read([s],0,{readNull:!0,clone:!0}),s&&n&&(s._owner=o))}}else if(u)for(var h=0,c=u.length;h<c;h++){var d=u[h]._style[f]();if(h){if(!a.equals(s,d))return r}else s=d}return s},o[f]=function(t){return this._style[f](t)},o[c]=function(t){this._style[c](t)}}),a.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,i="set"+e;u[n]=o[n]="#get"+t,u[i]=o[i]="#set"+t}),S.inject(o),u},{set:function(t){this._values={};var e=t instanceof X,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,n){var i=t._values,s=e._values,o=e._defaults;for(var u in i){var l=i[u],h=s[u];if(!(n&&u in s||a.equals(l,h===r?o[u]:h)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function Tt(){var t=Tt.base.call(this),e=this.getFontSize();return/pt|em|%|px/.test(e)&&(e=this.getView().getPixelSize(e)),null!=t?t:1.2*e}}),H=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var a=r[o],u=a?a+s:e;if(u in t){if(!n)return t[u];t[u]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(o){n={left:0,top:0,width:0,height:0}}var a=n.left-(s.clientLeft||r.clientLeft||0),u=n.top-(s.clientTop||r.clientTop||0);if(!e){var l=i.defaultView;a+=l.pageXOffset||s.scrollLeft||r.scrollLeft,u+=l.pageYOffset||s.scrollTop||r.scrollTop}return new m(a,u,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new m(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return H.getBounds(t,e).getPoint()},getSize:function(t){return H.getBounds(t,!0).getSize()},isInvisible:function(t){return H.getSize(t).equals(new g(0,0))},isInView:function(t){return!H.isInvisible(t)&&H.getViewportBounds(t).intersects(H.getBounds(t,!0))},isInserted:function(t){return o.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},Y={add:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.addEventListener(r[s],i,!1)},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new p(e.pageX||e.clientX+o.documentElement.scrollLeft,e.pageY||e.clientY+o.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return Y.getPoint(t).subtract(H.getOffset(e||Y.getTarget(t)))}};Y.requestAnimationFrame=new function(){function t(){var e=r;r=[];for(var s=0,o=e.length;s<o;s++)e[s]();i=n&&r.length,i&&n(t)}var e,n=H.getPrefixed(s,"requestAnimationFrame"),i=!1,r=[];return function(s){r.push(s),n?i||(n(t),i=!0):e||(e=setInterval(t,1e3/60))}};var G=a.extend(u,{_class:"View",initialize:function Pt(t,e){function n(t){return e[t]||parseInt(e.getAttribute(t),10)}function r(){var t=H.getSize(e);return t.isNaN()||t.isZero()?new g(n("width"),n("height")):t}var a;if(s&&e){this._id=e.getAttribute("id"),null==this._id&&e.setAttribute("id",this._id="view-"+Pt._id++),Y.add(e,this._viewEvents);var u="none";if(H.setPrefixed(e.style,{userDrag:u,userSelect:u,touchCallout:u,contentZooming:u,tapHighlightColor:"rgba(0,0,0,0)"}),l.hasAttribute(e,"resize")){var h=this;Y.add(s,this._windowEvents={resize:function(){h.setViewSize(r())}})}if(a=r(),l.hasAttribute(e,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var c=this._stats.domElement,f=c.style,d=H.getOffset(e);f.position="absolute",f.left=d.x+"px",f.top=d.y+"px",o.body.appendChild(c)}}else a=new g(e),e=null;this._project=t,this._scope=t._scope,this._element=e,this._pixelRatio||(this._pixelRatio=s&&s.devicePixelRatio||1),this._setElementSize(a.width,a.height),this._viewSize=a,Pt._views.push(this),Pt._viewsById[this._id]=this,(this._matrix=new x)._owner=this,Pt._focused||(Pt._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={"native":{},virtual:{}},this._autoUpdate=!i.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;G._focused===this&&(G._focused=null),G._views.splice(G._views.indexOf(this),1),delete G._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),Y.remove(this._element,this._viewEvents),Y.remove(s,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:a.each(S._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;Y.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;H.getPrefixed(o,"hidden")&&"true"!==l.getAttribute(e,"keepalive")||!H.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){i=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new a({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1===++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0===--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new a(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=r},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new v(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=g.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new m(new p,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return H.isInView(this._element)},isInserted:function(){return H.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var i=n.parentNode,r=o.createElement("div");r.style.fontSize=t,i.appendChild(r),e=parseFloat(H.getStyles(r).fontSize),i.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},a.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?a:p).read(arguments),i=p.read(arguments,0,{readNull:!0});return this.transform((new x)[t](n,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new x;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=p.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new x).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e);
},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return e?new _(e.x,e.y,this,"setScaling"):r},setScaling:function(){var t=this.getScaling(),e=p.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(p.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(p.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(p.read(arguments))},getEventPoint:function(t){return this.viewToProject(Y.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){o&&"string"==typeof e&&(e=o.getElementById(e));var n=s?Z:G;return new n(t,e)}}},new function(){function t(t){var e=Y.getTarget(t);return e.getAttribute&&G._viewsById[e.getAttribute("id")]}function e(){var t=G._focused;if(!t||!t.isVisible())for(var e=0,n=G._views.length;e<n;e++)if((t=G._views[e]).isVisible()){G._focused=l=t;break}}function n(t,e,n){t._handleMouseEvent("mousemove",e,n)}function r(t,e,n,i,r,s,o){function a(t,n){if(t.responds(n)){if(u||(u=new Q(n,i,r,e||t,s?r.subtract(s):null)),t.emit(n,u)&&(A=!0,u.prevented&&(k=!0),u.stopped))return l=!0}else{var o=M[n];if(o)return a(t,o)}}for(var u,l=!1;t&&t!==o&&!a(t,n);)t=t._parent;return l}function a(t,e,n,i,s,o){return t._project.removeOn(n),k=A=!1,S&&r(S,null,n,i,s,o)||e&&e!==S&&!e.isDescendant(S)&&r(e,null,M[n]||n,i,s,o,S)||r(t,S||e||t,n,i,s,o)}if(s){var u,l,h,c,f,d=!1,p=!1,_=s.navigator;_.pointerEnabled||_.msPointerEnabled?(h="pointerdown MSPointerDown",c="pointermove MSPointerMove",f="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",c="touchmove",f="touchend touchcancel","ontouchstart"in s&&_.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",c+=" mousemove",f+=" mouseup"));var g={},v={mouseout:function(t){var e=G._focused,i=Y.getRelatedTarget(t);if(e&&(!i||"HTML"===i.nodeName)){var r=Y.getOffset(t,e._element),s=r.x,o=Math.abs,a=o(s),u=1<<25,l=a-u;r.x=o(l)<a?l*(s<0?-1:1):s,n(e,t,e.viewToProject(r))}},scroll:e};g[h]=function(e){var n=G._focused=t(e);d||(d=!0,n._handleMouseEvent("mousedown",e))},v[c]=function(i){var r=G._focused;if(!p){var s=t(i);s?r!==s&&(r&&n(r,i),u||(u=r),r=G._focused=l=s):l&&l===r&&(u&&!u.isInserted()&&(u=null),r=G._focused=u,u=null,e())}r&&n(r,i)},v[h]=function(){p=!0},v[f]=function(t){var e=G._focused;e&&d&&e._handleMouseEvent("mouseup",t),p=d=!1},Y.add(o,v),Y.add(s,{load:e});var m,y,x,b,w,S,C,T,P,A=!1,k=!1,M={doubleclick:"click",mousedrag:"mousemove"},O=!1,I={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:g,_handleMouseEvent:function(t,e,n){function i(t){return s.virtual[t]||h.responds(t)||l&&l.responds(t)}var s=this._itemEvents,o=s["native"][t],u="mousemove"===t,l=this._scope.tool,h=this;u&&d&&i("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),f=o&&c&&h._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),p=f&&f.item||null,_=!1,g={};g[t.substr(5)]=!0,o&&p!==w&&(w&&r(w,null,"mouseleave",e,n),p&&r(p,null,"mouseenter",e,n),w=p),O^c&&(r(this,null,c?"mouseenter":"mouseleave",e,n),m=c?this:null,_=!0),!c&&!g.drag||n.equals(x)||(a(this,p,u?t:"mousemove",e,n,x),_=!0),O=c,(g.down&&c||g.up&&y)&&(a(this,p,t,e,n,y),g.down?(P=p===C&&Date.now()-T<300,b=C=p,S=!k&&p,y=n):g.up&&(k||p!==b||(T=Date.now(),a(this,p,P?"doubleclick":"click",e,n,y),P=!1),b=S=null),O=!1,_=!0),x=n,_&&l&&(A=l._handleMouseEvent(t,e,n,g)||A),(A&&!g.move||g.down&&i("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,r){function s(s){s.responds(t)&&(i=a,s.emit(t,o=o||new J(t,e,n,r)))}var o,a=this._scope,u=a.tool;this.isVisible()&&(s(this),u&&u.responds(t)&&s(u))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n["native"],r=n.virtual;for(var s in I)i[s]=(i[s]||0)+(I[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:e}}}}),Z=G.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof s.HTMLCanvasElement)){var n=g.read(arguments,1);if(n.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+a.slice(arguments,1));e=it.getCanvas(n)}var i=this._context=e.getContext("2d");if(i.save(),this._pixelRatio=1,!/^off|false$/.test(l.getAttribute(e,"hidpi"))){var r=s.devicePixelRatio||1,o=H.getPrefixed(i,"backingStorePixelRatio")||1;this._pixelRatio=r/o}G.call(this,t,e),this._needsUpdate=!0},remove:function At(){return this._context.restore(),At.base.call(this)},_setElementSize:function kt(t,e){var n=this._pixelRatio;if(kt.base.call(this,t*n,e*n),1!==n){var i=this._element,r=this._context;if(!l.hasAttribute(i,"resize")){var s=i.style;s.width=t+"px",s.height=e+"px"}r.restore(),r.save(),r.scale(n,n)}},getPixelSize:function Mt(t){var e,n=i.agent;if(n&&n.firefox)e=Mt.base.call(this,t);else{var r=this._context,s=r.font;r.font=t+" serif",e=parseFloat(r.font),r.font=s}return e},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,o=e.length;s<o;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),$=a.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return K.modifiers}}),J=$.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),K=new function(){function t(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e?String.fromCharCode(t.keyCode):e,u[e]||(e.length>1?a.hyphenate(e):e.toLowerCase())}function e(t,r,s,o){var u,l=G._focused;if(h[r]=t,t?c[r]=s:delete c[r],r.length>1&&(u=a.camelize(r))in f){f[u]=t;var d=i&&i.agent;if("meta"===u&&d&&d.mac)if(t)n={};else{for(var p in n)p in c&&e(!1,p,n[p],o);n=null}}else t&&n&&(n[r]=s);l&&l._handleKeyEvent(t?"keydown":"keyup",o,r,s)}var n,r,u={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},l={tab:"\t",space:" ",enter:"\r"},h={},c={},f=new a({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=i&&i.agent;return t&&t.mac?this.meta:this.control}}});return Y.add(o,{keydown:function(n){var s=t(n),o=i&&i.agent;s.length>1||o&&o.chrome&&(n.altKey||o.mac&&n.metaKey||!o.mac&&n.ctrlKey)?e(!0,s,l[s]||(s.length>1?"":s),n):r=s},keypress:function(n){if(r){var i=t(n),s=n.charCode,o=s>=32?String.fromCharCode(s):i.length>1?"":i;i!==r&&(i=o.toLowerCase()),e(!0,i,o,n),r=null}},keyup:function(n){var i=t(n);i in c&&e(!1,i,c[i],n)}}),Y.add(s,{blur:function(t){for(var n in c)e(!1,n,c[n],t)}}),{modifiers:f,isDown:function(t){return!!h[t]}}},Q=$.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),tt=$.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t?t:e?e.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),et=h.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){h.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,r){function s(t,e){var i=n,s=a?f._point:f._downPoint||i;if(a){if(f._moveCount&&i.equals(s))return!1;if(s&&(null!=t||null!=e)){var o=i.subtract(s),u=o.getLength();if(u<(t||0))return!1;e&&(i=s.add(o.normalize(Math.min(u,e))))}f._moveCount++}return f._point=i,f._lastPoint=s||i,r.down&&(f._moveCount=-1,f._downPoint=i,f._downCount++),!0}function o(){u&&(c=f.emit(t,new tt(f,t,e))||c)}i=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var a=r.move||r.drag,u=this.responds(t),l=this.minDistance,h=this.maxDistance,c=!1,f=this;if(r.down)s(),o();else if(r.up)s(null,h),o();else if(u)for(;s(l,h);)o();return c}}),nt={request:function(t){var e=new n.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,a.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var n=e.status;0===n||200===n?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var n=e.status,i='Could not load "'+t.url+'" (Status: '+n+")";if(!t.onError)throw new Error(i);t.onError(i,n)},e.send(null)}},it={canvases:[],getCanvas:function(t,e){if(!s)return null;var n,i=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?n=this.canvases.pop():(n=o.createElement("canvas"),i=!1);var r=n.getContext("2d");if(!r)throw new Error("Canvas "+n+" is unable to provide a 2D context.");return n.width===t&&n.height===e?i&&r.clearRect(0,0,t+1,e+1):(n.width=t,n.height=e),r.save(),n},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},rt=new function(){function t(t,e,n){return.2989*t+.587*e+.114*n}function e(e,n,i,r){var s=r-t(e,n,i);d=e+s,p=n+s,_=i+s;var r=t(d,p,_),o=g(d,p,_),a=v(d,p,_);if(o<0){var u=r-o;d=r+(d-r)*r/u,p=r+(p-r)*r/u,_=r+(_-r)*r/u}if(a>255){var l=255-r,h=a-r;d=r+(d-r)*l/h,p=r+(p-r)*l/h,_=r+(_-r)*l/h}}function n(t,e,n){return v(t,e,n)-g(t,e,n)}function i(t,e,n,i){var r,s=[t,e,n],o=v(t,e,n),a=g(t,e,n);a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2,r=0===g(a,o)?1===v(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*i/(s[o]-s[a]),s[o]=i):s[r]=s[o]=0,s[a]=0,d=s[0],p=s[1],_=s[2]}var r,s,o,u,l,h,c,f,d,p,_,g=Math.min,v=Math.max,m=Math.abs,y={multiply:function(){d=l*r/255,p=h*s/255,_=c*o/255},screen:function(){d=l+r-l*r/255,p=h+s-h*s/255,_=c+o-c*o/255},overlay:function(){d=l<128?2*l*r/255:255-2*(255-l)*(255-r)/255,p=h<128?2*h*s/255:255-2*(255-h)*(255-s)/255,_=c<128?2*c*o/255:255-2*(255-c)*(255-o)/255},"soft-light":function(){var t=r*l/255;d=t+l*(255-(255-l)*(255-r)/255-t)/255,t=s*h/255,p=t+h*(255-(255-h)*(255-s)/255-t)/255,t=o*c/255,_=t+c*(255-(255-c)*(255-o)/255-t)/255},"hard-light":function(){d=r<128?2*r*l/255:255-2*(255-r)*(255-l)/255,p=s<128?2*s*h/255:255-2*(255-s)*(255-h)/255,_=o<128?2*o*c/255:255-2*(255-o)*(255-c)/255},"color-dodge":function(){d=0===l?0:255===r?255:g(255,255*l/(255-r)),p=0===h?0:255===s?255:g(255,255*h/(255-s)),_=0===c?0:255===o?255:g(255,255*c/(255-o))},"color-burn":function(){d=255===l?255:0===r?0:v(0,255-255*(255-l)/r),p=255===h?255:0===s?0:v(0,255-255*(255-h)/s),_=255===c?255:0===o?0:v(0,255-255*(255-c)/o)},darken:function(){d=l<r?l:r,p=h<s?h:s,_=c<o?c:o},lighten:function(){d=l>r?l:r,p=h>s?h:s,_=c>o?c:o},difference:function(){d=l-r,d<0&&(d=-d),p=h-s,p<0&&(p=-p),_=c-o,_<0&&(_=-_)},exclusion:function(){d=l+r*(255-l-l)/255,p=h+s*(255-h-h)/255,_=c+o*(255-c-c)/255},hue:function(){i(r,s,o,n(l,h,c)),e(d,p,_,t(l,h,c))},saturation:function(){i(l,h,c,n(r,s,o)),e(d,p,_,t(l,h,c))},luminosity:function(){e(l,h,c,t(r,s,o))},color:function(){e(r,s,o,t(l,h,c))},add:function(){d=g(l+r,255),p=g(h+s,255),_=g(c+o,255)},subtract:function(){d=v(l-r,0),p=v(h-s,0),_=v(c-o,0)},average:function(){d=(l+r)/2,p=(h+s)/2,_=(c+o)/2},negation:function(){d=255-m(255-r-l),p=255-m(255-s-h),_=255-m(255-o-c)}},x=this.nativeModes=a.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),b=it.getContext(1,1);b&&(a.each(y,function(t,e){var n="darken"===e,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(r){}b.restore(),x[e]=i}),it.release(b)),this.process=function(t,e,n,i,a){var g=e.canvas,v="normal"===t;if(v||x[t])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,v||(n.globalCompositeOperation=t),n.drawImage(g,a.x,a.y),n.restore();else{var m=y[t];if(!m)return;for(var b=n.getImageData(a.x,a.y,g.width,g.height),w=b.data,S=e.getImageData(0,0,g.width,g.height).data,C=0,T=w.length;C<T;C+=4){r=S[C],l=w[C],s=S[C+1],h=w[C+1],o=S[C+2],c=w[C+2],u=S[C+3],f=w[C+3],m();var P=u*i/255,A=1-P;w[C]=P*d+A*l,w[C+1]=P*p+A*h,w[C+2]=P*_+A*c,w[C+3]=u*i+A*f}n.putImageData(b,a.x,a.y)}}},st=new function(){function t(t,e,r){return n(o.createElementNS(i,t),e,r)}function e(t,e){var n=a[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i}function n(t,e,n){for(var i in e){var r=e[i],s=a[i];"number"==typeof r&&n&&(r=n.number(r)),s?t.setAttributeNS(s,i,r):t.setAttribute(i,r)}return t}var i="http://www.w3.org/2000/svg",r="http://www.w3.org/2000/xmlns",s="http://www.w3.org/1999/xlink",a={href:s,xlink:r,xmlns:r+"/","xmlns:xlink":r+"/"};return{svg:i,xmlns:r,xlink:s,create:t,get:e,set:n}},ot=a.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{"true":"none","false":"non-scaling-stroke"},function(t,e){return!e&&(t instanceof z||t instanceof P||t instanceof j)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=a.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&a.each(i,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});return new function(){function t(t,e,n){var i=new a,r=t.getTranslation();if(e){t=t._shiftless();var s=t._inverseTransform(r);i[n?"cx":"x"]=s.x,i[n?"cy":"y"]=s.y,r=null}if(!t.isIdentity()){var o=t.decompose();if(o){var u=[],l=o.rotation,h=o.scaling,c=o.skewing;r&&!r.isZero()&&u.push("translate("+C.point(r)+")"),l&&u.push("rotate("+C.number(l)+")"),f.isZero(h.x-1)&&f.isZero(h.y-1)||u.push("scale("+C.point(h)+")"),c&&c.x&&u.push("skewX("+C.number(c.x)+")"),c&&c.y&&u.push("skewY("+C.number(c.y)+")"),i.transform=u.join(" ")}else i.transform="matrix("+t.getValues().join(",")+")"}return i}function e(e,n){for(var i=t(e._matrix),r=e._children,s=st.create("g",i,C),o=0,a=r.length;o<a;o++){var u=r[o],l=y(u,n);if(l)if(u.isClipMask()){var h=st.create("clipPath");h.appendChild(l),g(u,h,"clip"),st.set(s,{"clip-path":"url(#"+h.id+")"})}else s.appendChild(l)}return s}function i(e,n){var i=t(e._matrix,!0),r=e.getSize(),s=e.getImage();return i.x-=r.width/2,i.y-=r.height/2,i.width=r.width,i.height=r.height,i.href=n.embedImages===!1&&s&&s.src||e.toDataURL(),st.create("image",i,C)}function r(e,n){var i=n.matchShapes;if(i){var r=e.toShape(!1);if(r)return s(r,n)}var o,a=e._segments,u=a.length,l=t(e._matrix);if(i&&u>=2&&!e.hasHandles())if(u>2){o=e._closed?"polygon":"polyline";for(var h=[],c=0;c<u;c++)h.push(C.point(a[c]._point));l.points=h.join(" ")}else{o="line";var f=a[0]._point,d=a[1]._point;l.set({x1:f.x,y1:f.y,x2:d.x,y2:d.y})}else o="path",l.d=e.getPathData(null,n.precision);return st.create(o,l,C)}function s(e){var n=e._type,i=e._radius,r=t(e._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var s=e._size,o=s.width,a=s.height;r.x-=o/2,r.y-=a/2,r.width=o,r.height=a,i.isZero()&&(i=null)}return i&&("circle"===n?r.r=i:(r.rx=i.width,r.ry=i.height)),st.create(n,r,C)}function o(e,n){var i=t(e._matrix),r=e.getPathData(null,n.precision);return r&&(i.d=r),st.create("path",i,C)}function u(e,n){var i=t(e._matrix,!0),r=e._definition,s=_(r,"symbol"),o=r._item,a=o.getBounds();return s||(s=st.create("symbol",{viewBox:C.rectangle(a)}),s.appendChild(y(o,n)),g(r,s,"symbol")),i.href="#"+s.id,i.x+=a.x,i.y+=a.y,i.width=a.width,i.height=a.height,i.overflow="visible",st.create("use",i,C)}function l(t){var e=_(t,"color");if(!e){var n,i=t.getGradient(),r=i._radial,s=t.getOrigin(),o=t.getDestination();if(r){n={cx:s.x,cy:s.y,r:s.getDistance(o)};var a=t.getHighlight();a&&(n.fx=a.x,n.fy=a.y)}else n={x1:s.x,y1:s.y,x2:o.x,y2:o.y};n.gradientUnits="userSpaceOnUse",e=st.create((r?"radial":"linear")+"Gradient",n,C);for(var u=i._stops,l=0,h=u.length;l<h;l++){var c=u[l],f=c._color,d=f.getAlpha(),p=c._offset;n={offset:null==p?l/(h-1):p},f&&(n["stop-color"]=f.toCSS(!0)),d<1&&(n["stop-opacity"]=d),e.appendChild(st.create("stop",n,C))}g(t,e,"color")}return"url(#"+e.id+")"}function h(e){var n=st.create("text",t(e._matrix,!0),C);return n.textContent=e._content,n}function p(t,e,n){var i={},r=!n&&t.getParent(),s=[];return null!=t._name&&(i.id=t._name),a.each(ot,function(e){var n=e.get,o=e.type,u=t[n]();if(e.exportFilter?e.exportFilter(t,u):!r||!a.equals(r[n](),u)){if("color"===o&&null!=u){var h=u.getAlpha();h<1&&(i[e.attribute+"-opacity"]=h)}"style"===o?s.push(e.attribute+": "+u):i[e.attribute]=null==u?"none":"color"===o?u.gradient?l(u,t):u.toCSS(!0):"array"===o?u.join(","):"lookup"===o?e.toSVG[u]:u}}),s.length&&(i.style=s.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),st.set(e,i,C)}function _(t,e){return T||(T={ids:{},svgs:{}}),t&&T.svgs[e+"-"+(t._id||t.__id||(t.__id=d.get("svg")))]}function g(t,e,n){T||_();var i=T.ids[n]=(T.ids[n]||0)+1;e.id=n+"-"+i,T.svgs[n+"-"+(t._id||t.__id)]=e}function v(t,e){var i=t,r=null;if(T){i="svg"===t.nodeName.toLowerCase()&&t;for(var s in T.svgs)r||(i||(i=st.create("svg"),i.appendChild(t)),r=i.insertBefore(st.create("defs"),i.firstChild)),r.appendChild(T.svgs[s]);T=null}return e.asString?(new n.XMLSerializer).serializeToString(i):i}function y(t,e,n){var i=P[t._class],r=i&&i(t,e);if(r){var s=e.onExport;s&&(r=s(t,r,e)||r);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&r.setAttribute("data-paper-data",o)}return r&&p(t,r,n)}function b(t){return t||(t={}),C=new c(t.precision),t}var C,T,P={Group:e,Layer:e,Raster:i,Path:r,Shape:s,CompoundPath:o,SymbolItem:u,PointText:h};S.inject({exportSVG:function(t){return t=b(t),v(y(this,t,!0),t)}}),w.inject({exportSVG:function(e){e=b(e);var n=this._children,i=this.getView(),r=a.pick(e.bounds,"view"),s=e.matrix||"view"===r&&i._matrix,o=s&&x.read([s]),u="view"===r?new m([0,0],i.getViewSize()):"content"===r?S._getBounds(n,o,{stroke:!0}):m.read([r],0,{readNull:!0}),l={version:"1.1",xmlns:st.svg,"xmlns:xlink":st.xlink};u&&(l.width=u.width,l.height=u.height,(u.x||u.y)&&(l.viewBox=C.rectangle(u)));var h=st.create("svg",l,C),c=h;o&&!o.isIdentity()&&(c=h.appendChild(st.create("g",t(o),C)));for(var f=0,d=n.length;f<d;f++)c.appendChild(y(n[f],e,!0));return v(h,e)}})},new function(){function t(t,e,n,i,r){var s=st.get(t,e),o=null==s?i?null:n?"":0:n?s:parseFloat(s);return/%\s*$/.test(s)?o/100*(r?1:I[/x|^width/.test(e)?"width":"height"]):o}function e(e,n,i,r,s){return n=t(e,n||"x",!1,r,s),i=t(e,i||"y",!1,r,s),!r||null!=n&&null!=i?new p(n,i):null}function u(e,n,i,r,s){return n=t(e,n||"width",!1,r,s),i=t(e,i||"height",!1,r,s),!r||null!=n&&null!=i?new g(n,i):null}function l(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?T(t)||t:"lookup"===e?n[t]:t}function h(t,e,n,i){var r=t.childNodes,s="clippath"===e,o="defs"===e,a=new C,u=a._project,l=u._currentStyle,h=[];if(s||o||(a=b(a,t,i),u._currentStyle=a._style.clone()),i)for(var c=t.querySelectorAll("defs"),f=0,d=c.length;f<d;f++)k(c[f],n,!1);for(var f=0,d=r.length;f<d;f++){var p,_=r[f];1!==_.nodeType||/^defs$/i.test(_.nodeName)||!(p=k(_,n,!1))||p instanceof M||h.push(p)}return a.addChildren(h),s&&(a=b(a.reduce(),t,i)),u._currentStyle=l,(s||o)&&(a.remove(),a=null),a}function c(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new p(parseFloat(n[r]),parseFloat(n[r+1])));var o=new L(i);return"polygon"===e&&o.closePath(),o}function f(t){return z.create(t.getAttribute("d"))}function d(n,i){var r,s=(t(n,"href",!0)||"").substring(1),o="radialgradient"===i;if(s)r=R[s].getGradient(),r._radial^o&&(r=r.clone(),r._radial=o);else{for(var a=n.childNodes,u=[],l=0,h=a.length;l<h;l++){var c=a[l];1===c.nodeType&&u.push(b(new U,c))}r=new W(u,o)}var f,d,p,_="userSpaceOnUse"!==t(n,"gradientUnits",!0);o?(f=e(n,"cx","cy",!1,_),d=f.add(t(n,"r",!1,!1,_),0),p=e(n,"fx","fy",!0,_)):(f=e(n,"x1","y1",!1,_),d=e(n,"x2","y2",!1,_));var g=b(new q(r,f,d,p),n);return g._scaleToBounds=_,null}function _(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new x,o=0,a=r.length;o<a;o++){var u=r[o];if(!u)break;for(var l=u.split(/\(\s*/),h=l[0],c=l[1].split(/[\s,]+/g),f=0,d=c.length;f<d;f++)c[f]=parseFloat(c[f]);switch(h){case"matrix":s.append(new x(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function v(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}function y(t,e,n){var i=t.attributes[e],s=i&&i.value;if(!s){var o=a.camelize(e);s=t.style[o],s||n.node[o]===n.parent[o]||(s=n.node[o])}return s?"none"===s?null:s:r}function b(t,e,n){var i=e.parentNode,s={node:H.getStyles(e)||{},parent:!n&&!/^defs$/i.test(i.tagName)&&H.getStyles(i)||{}};return a.each(E,function(n,i){var o=y(e,i,s);t=o!==r&&n(t,o,i,e,s)||t}),t}function T(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),n=e&&e[1],i=n&&R[s?n.replace(s.location.href.split("#")[0]+"#",""):n];return i&&i._scaleToBounds&&(i=i.clone(),i._scaleToBounds=!0),i}function k(t,e,n){var r,s,l,h=t.nodeName.toLowerCase(),c="#document"!==h,f=o.body;n&&c&&(I=u(t,null,null,!0)||i.getView().getSize(),r=st.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=t.parentNode,l=t.nextSibling,r.appendChild(t),f.appendChild(r));var d=i.settings,p=d.applyMatrix,_=d.insertItems;d.applyMatrix=!1,d.insertItems=!1;var g=B[h],v=g&&g(t,h,e,n)||null;if(d.insertItems=_,d.applyMatrix=p,v){!c||v instanceof C||(v=b(v,t,n));var m=e.onImport,y=c&&t.getAttribute("data-paper-data");m&&(v=m(t,v,e)||v),e.expandShapes&&v instanceof P&&(v.remove(),v=v.toPath()),y&&(v._data=JSON.parse(y))}return r&&(f.removeChild(r),s&&(l?s.insertBefore(t,l):s.appendChild(t))),n&&(R={},v&&a.pick(e.applyMatrix,p)&&v.matrix.apply(!0,!0)),v}function O(t,e,s){function a(o){try{var a="object"==typeof o?o:(new n.DOMParser).parseFromString(o,"image/svg+xml");if(!a.nodeName)throw a=null,new Error("Unsupported SVG source: "+t);i=l,h=k(a,e,!0),e&&e.insert===!1||s._insertItem(r,h);var c=e.onLoad;c&&c(h,o)}catch(f){u(f)}}function u(t,n){var i=e.onError;if(!i)throw new Error(t);i(t,n)}if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var l=i,h=null;if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){a(c.result)},c.onerror=function(){u(c.error)},c.readAsText(t)}a(t)}else{var f=o.getElementById(t);f?a(f):nt.request({url:t,async:!0,onLoad:a,onError:u})}return h}var I,R={},B={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,o=r.length;s<o;s++){var a=r[s];if(1===a.nodeType)return k(a,n,i)}},g:h,svg:h,clippath:h,polygon:c,polyline:c,path:f,lineargradient:d,radialgradient:d,image:function(n){var i=new A(t(n,"href",!0));return i.on("load",function(){var t=u(n);this.setSize(t);var i=this._matrix._transformPoint(e(n).add(t.divide(2)));this.translate(i)}),i},symbol:function(t,e,n,i){return new M(h(t,e,n,i),(!0))},defs:h,use:function(n){var i=(t(n,"href",!0)||"").substring(1),r=R[i],s=e(n);return r?r instanceof M?r.place(s):r.clone().translate(s):null},circle:function(n){return new P.Circle(e(n,"cx","cy"),t(n,"r"))},ellipse:function(t){return new P.Ellipse({center:e(t,"cx","cy"),radius:u(t,"rx","ry")})},rect:function(t){return new P.Rectangle(new m(e(t),u(t)),u(t,"rx","ry"))},line:function(t){return new L.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var n=new V(e(t).add(e(t,"dx","dy")));return n.setContent(t.textContent.trim()||""),n}},E=a.set(a.each(ot,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](l(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i){if(i._scaleToBounds){var r=e.getBounds();i.transform((new x).translate(r.getPoint()).scale(r.getSize()))}e instanceof P&&i.transform((new x).translate(e.getPosition(!0).negate()))}}}},{}),{id:function(t,e){R[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=T(e);if(n){if(n=n.clone(),n.setClipMask(!0),!(t instanceof C))return new C(n,t);t.insertChild(0,n)}},gradientTransform:_,transform:_,"fill-opacity":v,"stroke-opacity":v,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,r){var s,o,a=new m(l(e,"array")),h=u(i,null,null,!0);if(t instanceof C){var c=h?h.divide(a.getSize()):1,o=(new x).scale(c).translate(a.getPoint().negate());s=t}else t instanceof M&&(h&&a.setSize(h),s=t._item);if(s){if("visible"!==y(i,"overflow",r)){var f=new P.Rectangle(a);f.setClipMask(!0),s.addChild(f)}o&&s.transform(o)}}});S.inject({importSVG:function(t,e){return O(t,e,this)}}),w.inject({importSVG:function(t,e){return this.activate(),O(t,e,this)}})},a.exports.PaperScript=function(){function t(t,e,n){var i=x[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function r(t,e){var n=b[t];if(n&&e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function u(t,e){return y.acorn.parse(t,e)}function h(t,e){function r(t){for(var e=0,n=p.length;e<n;e++){var i=p[e];if(i[0]>=t)break;t+=i[1]}return t}function a(e){return t.substring(r(e.range[0]),r(e.range[1]))}function l(e,n){return t.substring(r(e.range[1]),r(n.range[0]))}function h(e,n){for(var i=r(e.range[0]),s=r(e.range[1]),o=0,a=p.length-1;a>=0;a--)if(i>p[a][0]){o=a+1;break}p.splice(o,0,[i,n.length-s+i]),t=t.substring(0,i)+n+t.substring(s)}function c(t,e){if(t){for(var n in t)if("range"!==n&&"loc"!==n){var i=t[n];if(Array.isArray(i))for(var r=0,s=i.length;r<s;r++)c(i[r],t);else i&&"object"==typeof i&&c(i,t)}switch(t.type){case"UnaryExpression":if(t.operator in b&&"Literal"!==t.argument.type){var o=a(t.argument);h(t,'$__("'+t.operator+'", '+o+")")}break;case"BinaryExpression":if(t.operator in x&&"Literal"!==t.left.type){var u=a(t.left),f=a(t.right),d=l(t.left,t.right),p=t.operator;h(t,"__$__("+u+","+d.replace(new RegExp("\\"+p),'"'+p+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var _=e&&e.type;if(!("ForStatement"===_||"BinaryExpression"===_&&/^[=!<>]/.test(e.operator)||"MemberExpression"===_&&e.computed))if("UpdateExpression"===t.type){var o=a(t.argument),g="__$__("+o+', "'+t.operator[0]+'", 1)',v=o+" = "+g;t.prefix||"AssignmentExpression"!==_&&"VariableDeclarator"!==_||(a(e.left||e.id)===o&&(v=g),v=o+"; "+v),h(t,v)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var u=a(t.left),f=a(t.right),g=u+" = __$__("+u+', "'+t.operator[0]+'", '+f+")";h(t,/^\(.*\)$/.test(a(t))?"("+g+")":g)}}}}function f(t){var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var i=31&t;t>>=5,t&&(i|=32),e+=n[i]}return e}if(!t)return"";e=e||{};var d,p=[],_=e.url||"",g=i.agent,v=g.versionNumber,m=!1,y=e.sourceMaps,w=e.source||t,S=/\r\n|\n|\r/gm,C=e.offset||0;if(y&&(g.chrome&&v>=30||g.webkit&&v>=537.76||g.firefox&&v>=23||g.node)){if(g.node)C-=2;else if(s&&_&&!s.location.href.indexOf(_)){var T=o.getElementsByTagName("html")[0].innerHTML;C=T.substr(0,T.indexOf(t)+1).match(S).length+1}m=C>0&&!(g.chrome&&v>=36||g.safari&&v>=600||g.firefox&&v>=40||g.node);var P=["AA"+f(m?0:C)+"A"];P.length=(t.match(S)||[]).length+1+(m?C:0),d={version:3,file:_,names:[],mappings:P.join(";AACA"),sourceRoot:"",sources:[_],sourcesContent:[w]}}return c(u(t,{ranges:!0})),d&&(m&&(t=new Array(C+1).join("\n")+t),/^(inline|both)$/.test(y)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+n.btoa(unescape(encodeURIComponent(JSON.stringify(d))))),t+="\n//# sourceURL="+(_||"paperscript")),{url:_,source:w,code:t,map:d}}function c(e,n,s){function u(t,n){for(var i in t)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(e)||(g.push(i),v.push(t[i]))}i=n;var l,c=n.getView(),f=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(e)&&!/\bnew\s+Tool\b/.test(e)?new et:null,d=f?f._events:[],_=["onFrame","onResize"].concat(d),g=[],v=[],m="object"==typeof e?e:h(e,s);e=m.code,u({__$__:t,$__:r,paper:n,view:c,tool:f},!0),u(n),_=a.each(_,function(t){new RegExp("\\s+"+t+"\\b").test(e)&&(g.push(t),this.push(t+": "+t))},[]).join(", "),_&&(e+="\nreturn { "+_+" };");var y=i.agent;if(o&&(y.chrome||y.firefox&&y.versionNumber<40)){var x=o.createElement("script"),b=o.head||o.getElementsByTagName("head")[0];
y.firefox&&(e="\n"+e),x.appendChild(o.createTextNode("paper._execute = function("+g+") {"+e+"\n}")),b.appendChild(x),l=i._execute,delete i._execute,b.removeChild(x)}else l=Function(g,e);var w=l.apply(n,v)||{};return a.each(d,function(t){var e=w[t];e&&(f[t]=e)}),c&&(w.onResize&&c.setOnResize(w.onResize),c.emit("resize",{size:c.size,delta:new p}),w.onFrame&&c.setOnFrame(w.onFrame),c.requestUpdate()),m}function f(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==l.getAttribute(t,"ignore")){var e=l.getAttribute(t,"canvas"),n=o.getElementById(e),i=t.src||t.getAttribute("data-src"),r=l.hasAttribute(t,"async"),s="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var a=l.get(n.getAttribute(s))||(new l).setup(n);return n.setAttribute(s,a._id),i?nt.request({url:i,async:r,mimeType:"text/plain",onLoad:function(t){c(t,a,i)}}):c(t.innerHTML,a,t.baseURI),t.setAttribute("data-paper-ignore","true"),a}}function d(){a.each(o&&o.getElementsByTagName("script"),f)}function _(t){return t?f(t):d()}var v,m,y=this;!function(t,n){return"object"==typeof v&&"object"==typeof e?n(v):"function"==typeof m&&m.amd?m(["exports"],n):void n(t.acorn||(t.acorn={}))}(this,function(t){"use strict";function e(t){ct=t||{};for(var e in _t)Object.prototype.hasOwnProperty.call(ct,e)||(ct[e]=_t[e]);pt=ct.sourceFile||null}function n(t,e){var n=gt(ft,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=vt,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var s=0;s<i.length;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),n+="switch(str.length){";for(var r=0;r<i.length;++r){var o=i[r];n+="case "+o[0].length+":",e(o)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=Tt,this.column=vt-Pt}function s(){Tt=1,vt=Pt=0,Ct=!0,l()}function o(t,e){yt=vt,ct.locations&&(bt=new r),wt=t,l(),St=e,Ct=t.beforeExpr}function a(){var t=ct.onComment&&ct.locations&&new r,e=vt,i=ft.indexOf("*/",vt+=2);if(i===-1&&n(vt-2,"Unterminated comment"),vt=i+2,ct.locations){$e.lastIndex=e;for(var s;(s=$e.exec(ft))&&s.index<vt;)++Tt,Pt=s.index+s[0].length}ct.onComment&&ct.onComment(!0,ft.slice(e+2,i),e,vt,t,ct.locations&&new r)}function u(){for(var t=vt,e=ct.onComment&&ct.locations&&new r,n=ft.charCodeAt(vt+=2);vt<dt&&10!==n&&13!==n&&8232!==n&&8233!==n;)++vt,n=ft.charCodeAt(vt);ct.onComment&&ct.onComment(!1,ft.slice(t+2,vt),t,vt,e,ct.locations&&new r)}function l(){for(;vt<dt;){var t=ft.charCodeAt(vt);if(32===t)++vt;else if(13===t){++vt;var e=ft.charCodeAt(vt);10===e&&++vt,ct.locations&&(++Tt,Pt=vt)}else if(10===t||8232===t||8233===t)++vt,ct.locations&&(++Tt,Pt=vt);else if(t>8&&t<14)++vt;else if(47===t){var e=ft.charCodeAt(vt+1);if(42===e)a();else{if(47!==e)break;u()}}else if(160===t)++vt;else{if(!(t>=5760&&Ue.test(String.fromCharCode(t))))break;++vt}}}function h(){var t=ft.charCodeAt(vt+1);return t>=48&&t<=57?C(!0):(++vt,o(xe))}function c(){var t=ft.charCodeAt(vt+1);return Ct?(++vt,b()):61===t?x(Ce,2):x(we,1)}function f(){var t=ft.charCodeAt(vt+1);return 61===t?x(Ce,2):x(Le,1)}function d(t){var e=ft.charCodeAt(vt+1);return e===t?x(124===t?Ae:ke,2):61===e?x(Ce,2):x(124===t?Me:Ie,1)}function p(){var t=ft.charCodeAt(vt+1);return 61===t?x(Ce,2):x(Oe,1)}function _(t){var e=ft.charCodeAt(vt+1);return e===t?45==e&&62==ft.charCodeAt(vt+2)&&Ze.test(ft.slice(kt,vt))?(vt+=3,u(),l(),y()):x(Te,2):61===e?x(Ce,2):x(ze,1)}function g(t){var e=ft.charCodeAt(vt+1),n=1;return e===t?(n=62===t&&62===ft.charCodeAt(vt+2)?3:2,61===ft.charCodeAt(vt+n)?x(Ce,n+1):x(Ee,n)):33==e&&60==t&&45==ft.charCodeAt(vt+2)&&45==ft.charCodeAt(vt+3)?(vt+=4,u(),l(),y()):(61===e&&(n=61===ft.charCodeAt(vt+2)?3:2),x(Be,n))}function v(t){var e=ft.charCodeAt(vt+1);return 61===e?x(Re,61===ft.charCodeAt(vt+2)?3:2):x(61===t?Se:Pe,1)}function m(t){switch(t){case 46:return h();case 40:return++vt,o(_e);case 41:return++vt,o(ge);case 59:return++vt,o(me);case 44:return++vt,o(ve);case 91:return++vt,o(ce);case 93:return++vt,o(fe);case 123:return++vt,o(de);case 125:return++vt,o(pe);case 58:return++vt,o(ye);case 63:return++vt,o(be);case 48:var e=ft.charCodeAt(vt+1);if(120===e||88===e)return S();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return C(!1);case 34:case 39:return T(t);case 47:return c(t);case 37:case 42:return f();case 124:case 38:return d(t);case 94:return p();case 43:case 45:return _(t);case 60:case 62:return g(t);case 61:case 33:return v(t);case 126:return x(Pe,1)}return!1}function y(t){if(t?vt=mt+1:mt=vt,ct.locations&&(xt=new r),t)return b();if(vt>=dt)return o(Nt);var e=ft.charCodeAt(vt);if(Je(e)||92===e)return k();var i=m(e);if(i===!1){var s=String.fromCharCode(e);if("\\"===s||Ye.test(s))return k();n(vt,"Unexpected character '"+s+"'")}return i}function x(t,e){var n=ft.slice(vt,vt+e);vt+=e,o(t,n)}function b(){for(var t,e,i="",r=vt;;){vt>=dt&&n(r,"Unterminated regular expression");var s=ft.charAt(vt);if(Ze.test(s)&&n(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++vt}var i=ft.slice(r,vt);++vt;var a=A();a&&!/^[gmsiy]*$/.test(a)&&n(r,"Invalid regexp flag");try{var u=new RegExp(i,a)}catch(l){l instanceof SyntaxError&&n(r,l.message),n(l)}return o(zt,u)}function w(t,e){for(var n=vt,i=0,r=0,s=null==e?1/0:e;r<s;++r){var o,a=ft.charCodeAt(vt);if(o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0,o>=t)break;++vt,i=i*t+o}return vt===n||null!=e&&vt-n!==e?null:i}function S(){vt+=2;var t=w(16);return null==t&&n(mt+2,"Expected hexadecimal number"),Je(ft.charCodeAt(vt))&&n(vt,"Identifier directly after number"),o(Et,t)}function C(t){var e=vt,i=!1,r=48===ft.charCodeAt(vt);t||null!==w(10)||n(e,"Invalid number"),46===ft.charCodeAt(vt)&&(++vt,w(10),i=!0);var s=ft.charCodeAt(vt);69!==s&&101!==s||(s=ft.charCodeAt(++vt),43!==s&&45!==s||++vt,null===w(10)&&n(e,"Invalid number"),i=!0),Je(ft.charCodeAt(vt))&&n(vt,"Identifier directly after number");var a,u=ft.slice(e,vt);return i?a=parseFloat(u):r&&1!==u.length?/[89]/.test(u)||Rt?n(e,"Invalid number"):a=parseInt(u,8):a=parseInt(u,10),o(Et,a)}function T(t){vt++;for(var e="";;){vt>=dt&&n(mt,"Unterminated string constant");var i=ft.charCodeAt(vt);if(i===t)return++vt,o(Lt,e);if(92===i){i=ft.charCodeAt(++vt);var r=/^[0-7]+/.exec(ft.slice(vt,vt+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,-1);if("0"===r&&(r=null),++vt,r)Rt&&n(vt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),vt+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(P(2));break;case 117:e+=String.fromCharCode(P(4));break;case 85:e+=String.fromCharCode(P(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\x0B";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===ft.charCodeAt(vt)&&++vt;case 10:ct.locations&&(Pt=vt,++Tt);break;default:e+=String.fromCharCode(i)}}else 13!==i&&10!==i&&8232!==i&&8233!==i||n(mt,"Unterminated string constant"),e+=String.fromCharCode(i),++vt}}function P(t){var e=w(16,t);return null===e&&n(mt,"Bad character escape sequence"),e}function A(){Ne=!1;for(var t,e=!0,i=vt;;){var r=ft.charCodeAt(vt);if(Ke(r))Ne&&(t+=ft.charAt(vt)),++vt;else{if(92!==r)break;Ne||(t=ft.slice(i,vt)),Ne=!0,117!=ft.charCodeAt(++vt)&&n(vt,"Expecting Unicode escape sequence \\uXXXX"),++vt;var s=P(4),o=String.fromCharCode(s);o||n(vt-1,"Invalid Unicode escape"),(e?Je(s):Ke(s))||n(vt-4,"Invalid Unicode escape"),t+=o}e=!1}return Ne?t:ft.slice(i,vt)}function k(){var t=A(),e=Dt;return!Ne&&We(t)&&(e=he[t]),o(e,t)}function M(){At=mt,kt=yt,Mt=bt,y()}function O(t){if(Rt=t,vt=mt,ct.locations)for(;vt<Pt;)Pt=ft.lastIndexOf("\n",Pt-2)+1,--Tt;l(),y()}function I(){this.type=null,this.start=mt,this.end=null}function R(){this.start=xt,this.end=null,null!==pt&&(this.source=pt)}function B(){var t=new I;return ct.locations&&(t.loc=new R),ct.directSourceFile&&(t.sourceFile=ct.directSourceFile),ct.ranges&&(t.range=[mt,0]),t}function E(t){var e=new I;return e.start=t.start,ct.locations&&(e.loc=new R,e.loc.start=t.loc.start),ct.ranges&&(e.range=[t.range[0],0]),e}function z(t,e){return t.type=e,t.end=kt,ct.locations&&(t.loc.end=Mt),ct.ranges&&(t.range[1]=kt),t}function L(t){return ct.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function D(t){if(wt===t)return M(),!0}function N(){return!ct.strictSemicolons&&(wt===Nt||wt===pe||Ze.test(ft.slice(kt,mt)))}function F(){D(me)||N()||V()}function j(t){wt===t?M():V()}function V(){n(mt,"Unexpected token")}function q(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),Rt&&"Identifier"===t.type&&qe(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function W(t){At=kt=vt,ct.locations&&(Mt=new r),Ot=Rt=null,It=[],y();var e=t||B(),n=!0;for(t||(e.body=[]);wt!==Nt;){var i=U();e.body.push(i),n&&L(i)&&O(!0),n=!1}return z(e,"Program")}function U(){(wt===we||wt===Ce&&"/="==St)&&y(!0);var t=wt,e=B();switch(t){case Ft:case qt:M();var i=t===Ft;D(me)||N()?e.label=null:wt!==Dt?V():(e.label=ht(),F());for(var r=0;r<It.length;++r){var s=It[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===It.length&&n(e.start,"Unsyntactic "+t.keyword),z(e,i?"BreakStatement":"ContinueStatement");case Wt:return M(),F(),z(e,"DebuggerStatement");case Xt:return M(),It.push(Qe),e.body=U(),It.pop(),j(ne),e.test=X(),F(),z(e,"DoWhileStatement");case Gt:if(M(),It.push(Qe),j(_e),wt===me)return Y(e,null);if(wt===ee){var o=B();return M(),Z(o,!0),z(o,"VariableDeclaration"),1===o.declarations.length&&D(le)?G(e,o):Y(e,o)}var o=$(!1,!0);return D(le)?(q(o),G(e,o)):Y(e,o);case Zt:return M(),ut(e,!0);case $t:return M(),e.test=X(),e.consequent=U(),e.alternate=D(Ht)?U():null,z(e,"IfStatement");case Jt:return Ot||ct.allowReturnOutsideFunction||n(mt,"'return' outside of function"),M(),D(me)||N()?e.argument=null:(e.argument=$(),F()),z(e,"ReturnStatement");case Kt:M(),e.discriminant=X(),e.cases=[],j(de),It.push(tn);for(var a,u;wt!=pe;)if(wt===jt||wt===Ut){var l=wt===jt;a&&z(a,"SwitchCase"),e.cases.push(a=B()),a.consequent=[],M(),l?a.test=$():(u&&n(At,"Multiple default clauses"),u=!0,a.test=null),j(ye)}else a||V(),a.consequent.push(U());return a&&z(a,"SwitchCase"),M(),It.pop(),z(e,"SwitchStatement");case Qt:return M(),Ze.test(ft.slice(kt,mt))&&n(kt,"Illegal newline after throw"),e.argument=$(),F(),z(e,"ThrowStatement");case te:if(M(),e.block=H(),e.handler=null,wt===Vt){var h=B();M(),j(_e),h.param=ht(),Rt&&qe(h.param.name)&&n(h.param.start,"Binding "+h.param.name+" in strict mode"),j(ge),h.guard=null,h.body=H(),e.handler=z(h,"CatchClause")}return e.guardedHandlers=Bt,e.finalizer=D(Yt)?H():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),z(e,"TryStatement");case ee:return M(),Z(e),F(),z(e,"VariableDeclaration");case ne:return M(),e.test=X(),It.push(Qe),e.body=U(),It.pop(),z(e,"WhileStatement");case ie:return Rt&&n(mt,"'with' in strict mode"),M(),e.object=X(),e.body=U(),z(e,"WithStatement");case de:return H();case me:return M(),z(e,"EmptyStatement");default:var c=St,f=$();if(t===Dt&&"Identifier"===f.type&&D(ye)){for(var r=0;r<It.length;++r)It[r].name===c&&n(f.start,"Label '"+c+"' is already declared");var d=wt.isLoop?"loop":wt===Kt?"switch":null;return It.push({name:c,kind:d}),e.body=U(),It.pop(),e.label=f,z(e,"LabeledStatement")}return e.expression=f,F(),z(e,"ExpressionStatement")}}function X(){j(_e);var t=$();return j(ge),t}function H(t){var e,n=B(),i=!0,r=!1;for(n.body=[],j(de);!D(pe);){var s=U();n.body.push(s),i&&t&&L(s)&&(e=r,O(r=!0)),i=!1}return r&&!e&&O(!1),z(n,"BlockStatement")}function Y(t,e){return t.init=e,j(me),t.test=wt===me?null:$(),j(me),t.update=wt===ge?null:$(),j(ge),t.body=U(),It.pop(),z(t,"ForStatement")}function G(t,e){return t.left=e,t.right=$(),j(ge),t.body=U(),It.pop(),z(t,"ForInStatement")}function Z(t,e){for(t.declarations=[],t.kind="var";;){var i=B();if(i.id=ht(),Rt&&qe(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=D(Se)?$(!0,e):null,t.declarations.push(z(i,"VariableDeclarator")),!D(ve))break}return t}function $(t,e){var n=J(e);if(!t&&wt===ve){var i=E(n);for(i.expressions=[n];D(ve);)i.expressions.push(J(e));return z(i,"SequenceExpression")}return n}function J(t){var e=K(t);if(wt.isAssign){var n=E(e);return n.operator=St,n.left=e,M(),n.right=J(t),q(e),z(n,"AssignmentExpression")}return e}function K(t){var e=Q(t);if(D(be)){var n=E(e);return n.test=e,n.consequent=$(!0),j(ye),n.alternate=$(!0,t),z(n,"ConditionalExpression")}return e}function Q(t){return tt(et(),-1,t)}function tt(t,e,n){var i=wt.binop;if(null!=i&&(!n||wt!==le)&&i>e){var r=E(t);r.left=t,r.operator=St;var s=wt;M(),r.right=tt(et(),i,n);var o=z(r,s===Ae||s===ke?"LogicalExpression":"BinaryExpression");return tt(o,e,n)}return t}function et(){if(wt.prefix){var t=B(),e=wt.isUpdate;return t.operator=St,t.prefix=!0,Ct=!0,M(),t.argument=et(),e?q(t.argument):Rt&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),z(t,e?"UpdateExpression":"UnaryExpression")}for(var i=nt();wt.postfix&&!N();){var t=E(i);t.operator=St,t.prefix=!1,t.argument=i,q(i),M(),i=z(t,"UpdateExpression")}return i}function nt(){return it(rt())}function it(t,e){if(D(xe)){var n=E(t);return n.object=t,n.property=ht(!0),n.computed=!1,it(z(n,"MemberExpression"),e)}if(D(ce)){var n=E(t);return n.object=t,n.property=$(),n.computed=!0,j(fe),it(z(n,"MemberExpression"),e)}if(!e&&D(_e)){var n=E(t);return n.callee=t,n.arguments=lt(ge,!1),it(z(n,"CallExpression"),e)}return t}function rt(){switch(wt){case se:var t=B();return M(),z(t,"ThisExpression");case Dt:return ht();case Et:case Lt:case zt:var t=B();return t.value=St,t.raw=ft.slice(mt,yt),M(),z(t,"Literal");case oe:case ae:case ue:var t=B();return t.value=wt.atomValue,t.raw=wt.keyword,M(),z(t,"Literal");case _e:var e=xt,n=mt;M();var i=$();return i.start=n,i.end=yt,ct.locations&&(i.loc.start=e,i.loc.end=bt),ct.ranges&&(i.range=[n,yt]),j(ge),i;case ce:var t=B();return M(),t.elements=lt(fe,!0,!0),z(t,"ArrayExpression");case de:return ot();case Zt:var t=B();return M(),ut(t,!1);case re:return st();default:V()}}function st(){var t=B();return M(),t.callee=it(rt(),!0),D(_e)?t.arguments=lt(ge,!1):t.arguments=Bt,z(t,"NewExpression")}function ot(){var t=B(),e=!0,i=!1;for(t.properties=[],M();!D(pe);){if(e)e=!1;else if(j(ve),ct.allowTrailingCommas&&D(pe))break;var r,s={key:at()},o=!1;if(D(ye)?(s.value=$(!0),r=s.kind="init"):ct.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=i=!0,r=s.kind=s.key.name,s.key=at(),wt!==_e&&V(),s.value=ut(B(),!1)):V(),"Identifier"===s.key.type&&(Rt||i))for(var a=0;a<t.properties.length;++a){var u=t.properties[a];if(u.key.name===s.key.name){var l=r==u.kind||o&&"init"===u.kind||"init"===r&&("get"===u.kind||"set"===u.kind);l&&!Rt&&"init"===r&&"init"===u.kind&&(l=!1),l&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return z(t,"ObjectExpression")}function at(){return wt===Et||wt===Lt?rt():ht(!0)}function ut(t,e){wt===Dt?t.id=ht():e?V():t.id=null,t.params=[];var i=!0;for(j(_e);!D(ge);)i?i=!1:j(ve),t.params.push(ht());var r=Ot,s=It;if(Ot=!0,It=[],t.body=H(!0),Ot=r,It=s,Rt||t.body.body.length&&L(t.body.body[0]))for(var o=t.id?-1:0;o<t.params.length;++o){var a=o<0?t.id:t.params[o];if((Ve(a.name)||qe(a.name))&&n(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var u=0;u<o;++u)a.name===t.params[u].name&&n(a.start,"Argument name clash in strict mode")}return z(t,e?"FunctionDeclaration":"FunctionExpression")}function lt(t,e,n){for(var i=[],r=!0;!D(t);){if(r)r=!1;else if(j(ve),e&&ct.allowTrailingCommas&&D(t))break;n&&wt===ve?i.push(null):i.push($(!0))}return i}function ht(t){var e=B();return t&&"everywhere"==ct.forbidReserved&&(t=!1),wt===Dt?(!t&&(ct.forbidReserved&&(3===ct.ecmaVersion?Fe:je)(St)||Rt&&Ve(St))&&ft.slice(mt,yt).indexOf("\\")==-1&&n(mt,"The keyword '"+St+"' is reserved"),e.name=St):t&&wt.keyword?e.name=wt.keyword:V(),Ct=!1,M(),z(e,"Identifier")}t.version="0.5.0";var ct,ft,dt,pt;t.parse=function(t,n){return ft=String(t),dt=ft.length,e(n),s(),W(ct.program)};var _t=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},gt=t.getLineInfo=function(t,e){for(var n=1,i=0;;){$e.lastIndex=i;var r=$e.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return kt=yt,y(t),r.start=mt,r.end=yt,r.startLoc=xt,r.endLoc=bt,r.type=wt,r.value=St,r}ft=String(t),dt=ft.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(vt=t,ct.locations){Tt=1,Pt=$e.lastIndex=0;for(var n;(n=$e.exec(ft))&&n.index<t;)++Tt,Pt=n.index+n[0].length}Ct=e,l()},i};var vt,mt,yt,xt,bt,wt,St,Ct,Tt,Pt,At,kt,Mt,Ot,It,Rt,Bt=[],Et={type:"num"},zt={type:"regexp"},Lt={type:"string"},Dt={type:"name"},Nt={type:"eof"},Ft={keyword:"break"},jt={keyword:"case",beforeExpr:!0},Vt={keyword:"catch"},qt={keyword:"continue"},Wt={keyword:"debugger"},Ut={keyword:"default"},Xt={keyword:"do",isLoop:!0},Ht={keyword:"else",beforeExpr:!0},Yt={keyword:"finally"},Gt={keyword:"for",isLoop:!0},Zt={keyword:"function"},$t={keyword:"if"},Jt={keyword:"return",beforeExpr:!0},Kt={keyword:"switch"},Qt={keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},ne={keyword:"while",isLoop:!0},ie={keyword:"with"},re={keyword:"new",beforeExpr:!0},se={keyword:"this"},oe={keyword:"null",atomValue:null},ae={keyword:"true",atomValue:!0},ue={keyword:"false",atomValue:!1},le={keyword:"in",binop:7,beforeExpr:!0},he={"break":Ft,"case":jt,"catch":Vt,"continue":qt,"debugger":Wt,"default":Ut,"do":Xt,"else":Ht,"finally":Yt,"for":Gt,"function":Zt,"if":$t,"return":Jt,"switch":Kt,"throw":Qt,"try":te,"var":ee,"while":ne,"with":ie,"null":oe,"true":ae,"false":ue,"new":re,"in":le,"instanceof":{keyword:"instanceof",binop:7,beforeExpr:!0},"this":se,"typeof":{keyword:"typeof",prefix:!0,beforeExpr:!0},"void":{keyword:"void",prefix:!0,beforeExpr:!0},"delete":{keyword:"delete",prefix:!0,beforeExpr:!0}},ce={type:"[",beforeExpr:!0},fe={type:"]"},de={type:"{",beforeExpr:!0},pe={type:"}"},_e={type:"(",beforeExpr:!0},ge={type:")"},ve={type:",",beforeExpr:!0},me={type:";",beforeExpr:!0},ye={type:":",beforeExpr:!0},xe={type:"."},be={type:"?",beforeExpr:!0},we={binop:10,beforeExpr:!0},Se={isAssign:!0,beforeExpr:!0},Ce={isAssign:!0,beforeExpr:!0},Te={postfix:!0,prefix:!0,isUpdate:!0},Pe={prefix:!0,beforeExpr:!0},Ae={binop:1,beforeExpr:!0},ke={binop:2,beforeExpr:!0},Me={binop:3,beforeExpr:!0},Oe={binop:4,beforeExpr:!0},Ie={binop:5,beforeExpr:!0},Re={binop:6,beforeExpr:!0},Be={binop:7,beforeExpr:!0},Ee={binop:8,beforeExpr:!0},ze={binop:9,prefix:!0,beforeExpr:!0},Le={binop:10,beforeExpr:!0};t.tokTypes={bracketL:ce,bracketR:fe,braceL:de,braceR:pe,parenL:_e,parenR:ge,comma:ve,semi:me,colon:ye,dot:xe,question:be,slash:we,eq:Se,name:Dt,eof:Nt,num:Et,regexp:zt,string:Lt};for(var De in he)t.tokTypes["_"+De]=he[De];var Ne,Fe=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),je=i("class enum extends super const export import"),Ve=i("implements interface let package private protected public static yield"),qe=i("eval arguments"),We=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ue=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Xe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",He="------------------------------------------------------------------------------------------------------------------------------------------",Ye=new RegExp("["+Xe+"]"),Ge=new RegExp("["+Xe+He+"]"),Ze=/[\n\r\u2028\u2029]/,$e=/\r\n|[\n\r\u2028\u2029]/g,Je=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Ye.test(String.fromCharCode(t)))},Ke=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&Ge.test(String.fromCharCode(t))))},Qe={kind:"loop"},tn={kind:"switch"}});var x={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},b={"-":"__negate","+":null},w=a.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{});return p.inject(w),g.inject(w),q.inject(w),s&&("complete"===o.readyState?setTimeout(d):Y.add(s,{load:d})),{compile:h,execute:c,load:_,parse:u}}.call(this),i=new(l.inject(a.exports,{enumerable:!0,Base:a,Numerical:f,Key:K,DomEvent:Y,DomElement:H,document:o,window:s,Symbol:M,PlacedSymbol:k})),i.agent.node&&t("./node/extend.js")(i),"function"==typeof define&&define.amd?define("paper",i):"object"==typeof e&&e&&(e.exports=i),i}.call(this,"object"==typeof self?self:null)},{"./node/extend.js":5,"./node/window.js":5}],10:[function(t,e,n){function i(t,e){return this instanceof i?(this.x=t||0,void(this.y=e||0)):new i(t,e)}function r(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function s(t){return t*a}function o(t){return t/a}n=e.exports=i,i.fromArray=function(t){return new i(t[0]||0,t[1]||0)},i.fromObject=function(t){return new i(t.x||0,t.y||0)},i.prototype.addX=function(t){return this.x+=t.x,this},i.prototype.addY=function(t){return this.y+=t.y,this},i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},i.prototype.addScalarX=function(t){return this.x+=t,this},i.prototype.addScalarY=function(t){return this.y+=t,this},i.prototype.subtractX=function(t){return this.x-=t.x,this},i.prototype.subtractY=function(t){return this.y-=t.y,this},i.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},i.prototype.subtractScalarX=function(t){return this.x-=t,this},i.prototype.subtractScalarY=function(t){return this.y-=t,this},i.prototype.divideX=function(t){return this.x/=t.x,this},i.prototype.divideY=function(t){return this.y/=t.y,this},i.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},i.prototype.divideScalar=function(t){return 0!==t?(this.x/=t,this.y/=t):(this.x=0,this.y=0),this},i.prototype.divideScalarX=function(t){return 0!==t?this.x/=t:this.x=0,this},i.prototype.divideScalarY=function(t){return 0!==t?this.y/=t:this.y=0,this},i.prototype.invertX=function(){return this.x*=-1,this},i.prototype.invertY=function(){return this.y*=-1,this},i.prototype.invert=function(){return this.invertX(),this.invertY(),this},i.prototype.multiplyX=function(t){return this.x*=t.x,this},i.prototype.multiplyY=function(t){return this.y*=t.y,this},i.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},i.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},i.prototype.multiplyScalarX=function(t){return this.x*=t,this},i.prototype.multiplyScalarY=function(t){return this.y*=t,this},i.prototype.normalize=function(){var t=this.length();return 0===t?(this.x=1,this.y=0):this.divide(i(t,t)),this},i.prototype.norm=i.prototype.normalize,i.prototype.limit=function(t,e){return Math.abs(this.x)>t&&(this.x*=e),Math.abs(this.y)>t&&(this.y*=e),this},i.prototype.randomize=function(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this},i.prototype.randomizeX=function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x);return this.x=r(n,i),this},i.prototype.randomizeY=function(t,e){var n=Math.min(t.y,e.y),i=Math.max(t.y,e.y);return this.y=r(n,i),this},i.prototype.randomizeAny=function(t,e){return Math.round(Math.random())?this.randomizeX(t,e):this.randomizeY(t,e),this},i.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},i.prototype.toFixed=function(t){return"undefined"==typeof t&&(t=8),this.x=this.x.toFixed(t),this.y=this.y.toFixed(t),this},i.prototype.mixX=function(t,e){return"undefined"==typeof e&&(e=.5),this.x=(1-e)*this.x+e*t.x,this},i.prototype.mixY=function(t,e){return"undefined"==typeof e&&(e=.5),this.y=(1-e)*this.y+e*t.y,this},i.prototype.mix=function(t,e){return this.mixX(t,e),this.mixY(t,e),this},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyX=function(t){return this.x=t.x,this},i.prototype.copyY=function(t){return this.y=t.y,this},i.prototype.copy=function(t){return this.copyX(t),this.copyY(t),this},i.prototype.zero=function(){return this.x=this.y=0,this},i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.cross=function(t){return this.x*t.y-this.y*t.x},i.prototype.projectOnto=function(t){var e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this},i.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},i.prototype.horizontalAngleDeg=function(){return s(this.horizontalAngle())},i.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},i.prototype.verticalAngleDeg=function(){return s(this.verticalAngle())},i.prototype.angle=i.prototype.horizontalAngle,i.prototype.angleDeg=i.prototype.horizontalAngleDeg,i.prototype.direction=i.prototype.horizontalAngle,i.prototype.rotate=function(t){var e=this.x*Math.cos(t)-this.y*Math.sin(t),n=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=n,this},i.prototype.rotateDeg=function(t){return t=o(t),this.rotate(t)},i.prototype.rotateTo=function(t){return this.rotate(t-this.angle())},i.prototype.rotateToDeg=function(t){return t=o(t),this.rotateTo(t)},i.prototype.rotateBy=function(t){var e=this.angle()+t;return this.rotate(e)},i.prototype.rotateByDeg=function(t){return t=o(t),this.rotateBy(t)},i.prototype.distanceX=function(t){return this.x-t.x},i.prototype.absDistanceX=function(t){return Math.abs(this.distanceX(t))},i.prototype.distanceY=function(t){return this.y-t.y},i.prototype.absDistanceY=function(t){return Math.abs(this.distanceY(t))},i.prototype.distance=function(t){return Math.sqrt(this.distanceSq(t))},i.prototype.distanceSq=function(t){var e=this.distanceX(t),n=this.distanceY(t);return e*e+n*n},i.prototype.length=function(){return Math.sqrt(this.lengthSq())},i.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},i.prototype.magnitude=i.prototype.length,i.prototype.isZero=function(){return 0===this.x&&0===this.y},i.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},i.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},i.prototype.toArray=function(){return[this.x,this.y]},i.prototype.toObject=function(){return{x:this.x,y:this.y}};var a=180/Math.PI},{}]},{},[2]);